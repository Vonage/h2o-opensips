=========================== Release 2.2.8 ==============================

2019-06-11  Razvan Crainea  <razvan at opensips dot org>
	* [b9495be75] :

	Bump version to 2.2.8


2019-06-11  Vlad Patrascu  <vladp at opensips dot org>
	* [e2309bcb3] :

	cachedb_cassandra: use extensible buffers for query strings
	This fixes errors caused by queries being truncated becuase of the
	small static buffers that were previously used.

	Closes #1696
	(cherry picked from commit ad1232d211ab97b4367c1f22fbb2828df6b534d1)


2019-06-11  Vlad Patrascu  <vladp at opensips dot org>
	* [e2f606eb7] :

	dialog: fix behavior of is_in_profile() if no value is passed
	The function should also return true when a dialog does belong to a
	profile with values but no value is passed to reinforce the check.
	(cherry picked from commit d3bc0e256f925ee2c25aea483e14afca8dfcdbbe)


2019-06-11  Vlad Patrascu  <vladp at opensips dot org>
	* [72a8034d6] :

	dialog: do not accept replicated counters for local profiles
	(cherry picked from commit c5638e9bb58d6db6b428c3cd65502513b28817a5)


2019-06-11  Vlad Patrascu  <vladp at opensips dot org>
	* [7cb53484e] :

	dialog: fix a crash when removing dialog from profile
	Do replicate counter structure deletion if the profile is not shared.
	(cherry picked from commit d721a94237c48343b2bcab16bd2a84f3dd618d69)


2019-06-10  Liviu Chircu  <liviu at opensips dot org>
	* [b6d20d76c] :

	mathops: Allow negative operands in math_rpn()
	(cherry picked from commit c0fe97a0e9b980327033e4bdf667106e51462288)


2019-06-02  OpenSIPS  <github at opensips dot org>
	* [beec05a02] :

	Rebuild documentation


2019-05-29  Liviu Chircu  <liviu at opensips dot org>
	* [614127061] :

	Fix various documentation typos or shortcomings
	(cherry picked from commit 59f8505d3597c2848ca05f64879d97a8748997ea)
	(cherry picked from commit 1b970d85e4af15ce879d7dfc3b796e9178bad082)


2019-05-28  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [d35ace2d1] :

	Merge pull request #1208 from dronord/ora_bigint
	db_ora: dont trim VAL_BIGINT
	(cherry picked from commit 3ddbbf6275b381a8bee0f45a856595304a26d1ce)


2019-05-28  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [1b5702a88] :

	Merge pull request #1207 from dronord/ora_fetch
	fix and optimize oracle fetch
	(cherry picked from commit f7e45ba6e02cb1b130d5eef4285aadf879e948f8)


2019-05-28  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ab7954015] :

	Merge pull request #1701 from vitalikvoip/2.4_fix_tcpchild_busy_counter
	Fix TCP connections load balancing to use all TCP workers evenly
	(cherry picked from commit 55d95ecae41274fbeafed9b39a6251cbb0aa47b1)


2019-05-28  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [2cc203614] :

	Merge pull request #1239 from dronord/ora_integer
	Oracle NUMBER not NUM in application
	(cherry picked from commit a6c9376e7514bb0e7c4a7061057d1a59a2e421c1)


2019-05-26  OpenSIPS  <github at opensips dot org>
	* [c095ffc52] :

	Rebuild documentation


2019-05-23  Razvan Crainea  <razvan at opensips dot org>
	* [aa0e74557] :

	proto_ws: build GET Host header based on destination IP and port
	Thanks go to Bogdan Iancu for spotting this
	(cherry picked from commit a3eda1b1393c7eb0475b41b4db1a51d86eb0882f)


2019-05-09  Liviu Chircu  <liviu at opensips dot org>
	* [845917eca] :

	systemd: Inherit default settings when checking config
	This prevents oom errors when starting the service with some heavy-duty
	scripts which load lots of modules / have lots of startup logic and
	demand a bit more memory than the binary's defaults provide.

	Reported by Ken Rice.
	(cherry picked from commit a1357f48256246742a3927c65b54990f9e53f1f4)


2019-04-21  OpenSIPS  <github at opensips dot org>
	* [87eeb79e5] :

	Rebuild documentation


2019-04-15  Razvan Crainea  <razvan at opensips dot org>
	* [025a4cd8b] :

	dialog: fix mem leak generated by missing replies
	When cseq was to change generated replies, if those replies were never
	generated (due to missing replies from UAC), the callback was leaking.
	(cherry picked from commit 13bceaf647b2cd885f516bb61e2dd04da964d1a4)


2019-04-14  OpenSIPS  <github at opensips dot org>
	* [51a469b40] :

	Rebuild documentation


2019-04-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a7a05c9aa] :

	Fix missing escaping in JSON output via mi_json
	TAB, Back Space, Form Feed, New Line and Carriage Return must be escaped in the values returned by mi_json.
	(cherry picked from commit d0156db0a0c09353864f7600b948ed5e4177ab9e)


2019-04-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6e930dd43] :

	Name the MI nodes in t_uac_dlg reply
	Without names, the reply will be inconsistent in JSON format
	(cherry picked from commit b8b8352007ace2c1886046a949aa4a7b7ed6d8ed)


2019-04-07  OpenSIPS  <github at opensips dot org>
	* [b7c335360] :

	Rebuild documentation


2019-04-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6d2fe7a1e] :

	Fix concurrent parsing over samed shm message.
	As print_rr_body() may be called from different processes but over the same shm request, the performed parsing may lead to conflicts (different procs will fight one each other in setting the "parsed" field of the hdr_field in shm.
	This will easily lead to memory corruption and crashes. As real case, different replies to the same request may trigger print_rr_body in topology_hiding(), over the same shm cloned request.
	The newly added paramter (no_change) will instruct print_rr_body() to do its job but without changing anything in the inout set of RR hdrs.
	(cherry picked from commit e1004f864587a37a1e5630d1181fa323ba51df14)


2019-04-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [65de8a584] :

	Fix dangling path vector in shm cloned request.
	When doing save() on reply, be sure you free whatever path_vec may be attached via save_aux() in pkg. Keep in mind that the request is a cloned request in shm.
	Closes #1640.
	May thanks to @netaskd for his help in troubleshooting this issue.
	(cherry picked from commit 2b6b000305f0957e2e020bdfa9be869795cc41dd)


2019-03-31  OpenSIPS  <github at opensips dot org>
	* [6cf292a30] :

	Rebuild documentation


2019-03-26  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [d429a3b85] :

	Merge pull request #1643 from rrb3942/postgresql_bulk_fix
	db_postgres: Fix errors on bulk insert after delete/update
	(cherry picked from commit b931ffe57d207f99f831a19a2a571e29ed0d3279)


2019-03-26  Razvan Crainea  <razvan at opensips dot org>
	* [4ffc279b7] :

	dispatcher: add partition support to ds_list MI cmd
	(cherry picked from commit 56f9a8bf2c5a5dc1ab8e1a5aace96c35d413b174)


2019-03-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4b865f72f] :

	Fix AVP context over sending requests via local route.
	Be sure the internally expose the same AVP list for running the local route and sending the request out.
	Fixes #1642
	(cherry picked from commit bf25311d92f412f8e735ce6919c0689ff117d4a0)


2019-03-24  OpenSIPS  <github at opensips dot org>
	* [66676dfd5] :

	Rebuild documentation


2019-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [1ca9273e6] :

	pua_dialoginfo: Fix pkg memleak
	(cherry picked from commit d87169c7a1f22e06a2569c72535a561575937daa)


2019-03-17  OpenSIPS  <github at opensips dot org>
	* [3dff9436e] :

	Rebuild documentation


2019-03-13  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [dd45a84fe] :

	Merge pull request #1635 from rrb3942/compact_session_expires
	Add Session-Expires header to compact_form_hdrs
	(cherry picked from commit 18a4b9024d9e6864693f27830d86e7ead4c77e3e)


2019-03-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [74296412e] :

	Fix useless/bogus pointer reset
	Related to previos commit
	(cherry picked from commit 0c80bcaf68b34c99a8b62b2e3c88bae43df97ff8)


2019-03-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3dbb98fa4] :

	Small fix in test during blacklist name parsing
	Related to d11ba50413b53e2c0dafa091de98b6bb8bd5b972
	(cherry picked from commit 71120b601371bf7d49e49ed4eb9f0e11f284b0b3)


2019-03-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b96d9cc14] :

	Fix building blacklist's name when using partitions
	Do not include the partition name in the name of the blacklist
	(cherry picked from commit d11ba50413b53e2c0dafa091de98b6bb8bd5b972)


2019-03-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [570eb6164] :

	Avoid warnings when duplicates found in blacklists.
	(cherry picked from commit 11aebdeb90cdcf850505cf3042f2591f80df018b)


2019-03-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [16e248654] :

	Removed bogus critical logs.
	Do not report errors if data does not exists - we may end up in such a cleanup situation during a failed startup (with no data loaded).
	(cherry picked from commit 427affcf474d62305ddbe5a8616944a61ee69d80)


2019-03-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [49e752093] :

	Improve docs on "define_blacklist" param
	(cherry picked from commit 2c7ebe6de1f45f531b566db28a76953bdfb779e2)


2019-03-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [739f75999] :

	Fix t_reply_with_body() when called after t_newtran()
	Force an update of the cloned request (from transaction) with info from the real request before internally running t_reply_with_body(). As t_reply_with_body() works with the cloned request, we need to be sure it is up-2-date; and t_newtran() does a partial cloning of the requests - so, if the transaction already exists better update its cloned request to be sure it has all data.
	Credits for detailed reporting to @rrb3942
	Closes #1632
	(cherry picked from commit 00a3ab348b0400fc63d25f742916ec65602f7e3f)


2019-03-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d7ac87cf9] :

	Fixed $log_level for returning negative values
	Use signed function to covert from int to str, as log_leve may be negative (-1==ERR).
	(cherry picked from commit 0b465a386b4759dfb51b6265484deb5d9dd7710e)


2019-03-10  OpenSIPS  <github at opensips dot org>
	* [95daaca37] :

	Rebuild documentation


2019-03-08  Liviu Chircu  <liviu at opensips dot org>
	* [01247d4d9] :

	registrar: Clarify the 'm' lookup() flag
	(cherry picked from commit aa276bff046246f3d5fba8ec8161968119f7c44d)


2019-03-07  Razvan Crainea  <razvan at opensips dot org>
	* [51652f6fc] :

	b2b_entities: don't unref UNDEFINED tm
	Close #1629
	(cherry picked from commit e6f181e26129cf1ad64071723c0c2456bac60bb7)


2019-03-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e53327ccd] :

	Fixed access to acc vars in failure route during internally generated final replies(408)
	Register the internal TM callback for FAILURE all the time, as it will be responsible for populating the acc context in Transaction when handling an internally generated final reply (408).
	Credits for reporting and identifing the issue to @rrb3942
	Closes #1602
	(cherry picked from commit 732038b6decf0809f52ef39ed97d7f025dca416e)


2019-03-06  Razvan Crainea  <razvan at opensips dot org>
	* [e8e837595] :

	dialog: proper parsing of serialized dlg vals
	Before this fix, if a value was having more than two "legitimate" `\`
	(ascii 92) chars inside the value, OpenSIPS would have crashed.

	Credits go to 46Labs for reporting!
	(cherry picked from commit 9c4bb36bcb7938409e317b2227e917150bb24855)


2019-03-06  Răzvan Crainea  <razvan at opensips dot org>
	* [f52064dea] :

	Merge pull request #1594 from vasilevalex/validate_ipv6
	Allow IPv6 address in hostname
	(cherry picked from commit 873bd820cb1770b048435dc5bb7a7b99a156539e)


2019-03-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ea5d858fd] :

	Remove some extensive logging (needed only for dev)
	(cherry picked from commit 60024ad92931054104b88dce4a0ca04935cb76e5)


2019-03-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5dfc23aa8] :

	Fix cps counting for the SBT algorithm
	Credits shared with @razvancrainea for sorting out the issue and reworking the alg implementation.
	(cherry picked from commit 732e3d6157f92f22ab8ad83d1e87d8beb4aa838e)


2019-03-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bb901a900] :

	Fix the parsing of $rl_count name
	(cherry picked from commit d7224382be37821026643e753de68c17b24307c3)


2019-03-03  OpenSIPS  <github at opensips dot org>
	* [8d7005bca] :

	Rebuild documentation


2019-02-28  Liviu Chircu  <liviu at opensips dot org>
	* [e1372feb8] :

	dialog: Remove unused vars


2019-02-28  Liviu Chircu  <liviu at opensips dot org>
	* [524495d70] :

	dialog: Propagate new $DLG_timeout values to DB/BIN
	Make sure to store/replicate the new value, not the old one!

	Credits to Vlad Patrascu for helping track this down
	(cherry picked from commit d948aa037b04bbfa37581876655edd7fcd26570e)


2019-02-17  OpenSIPS  <github at opensips dot org>
	* [4675b9eb9] :

	Rebuild documentation


2019-02-12  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [1b23a0989] :

	Merge pull request #1614 from wdoekes/wjd-correct-presence-list-mi-flush-2.4
	Correct presence list MI flush in OpenSIPS 2.4
	(cherry picked from commit a7eeaf1873d9d76309975aaf7b4f4ad02e435941)


2019-02-10  OpenSIPS  <github at opensips dot org>
	* [b0e7f0479] :

	Rebuild documentation


2019-02-08  Razvan Crainea  <razvan at opensips dot org>
	* [06b641ba5] :

	net/tcp: save fd before sending the conn to main
	Save local fd of the connection before sending it to TCP main, to make
	sure we it won't get overwritten by main, and we close somebody else's
	file descriptor.
	(cherry picked from commit ed4e862db1dbeefd6db8559425c2da26fa239dd9)


2019-02-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ba4d8a683] :

	Remove double free on bad input
	Credits for the fix go to @rrb3942
	Closes pull request  #1599
	(cherry picked from commit eb07ae953c18aa1812579225cece6947c4364590)


2019-02-03  OpenSIPS  <github at opensips dot org>
	* [e62db61a2] :

	Rebuild documentation


2019-02-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9f3e477e1] :

	Fixed uninit len for th_contact_encode_passwd param.
	As the used len was all the time 10 (the len of the default passwd), if you have set a shorter one, the actual used passwd has some trailing memory garbage (up to 10 char len). This grabage could be (99.999%) constant during runtime, but 100% different after a restart. Shorly, the decoding on ongoing contact would have failed after a restart.
	(cherry picked from commit 4a17a828861feb6be07f67103ad352e7d8c817f6)


2019-01-30  Liviu Chircu  <liviu at opensips dot org>
	* [9b8b28c70] :

	Avoid errors on "$rU = <NULL expression>;" statements
	(cherry picked from commit 94d2f05940e7078d1acf485ea848eb9e5f34b00f)


2019-01-27  OpenSIPS  <github at opensips dot org>
	* [6d55985ae] :

	Rebuild documentation


2019-01-23  Liviu Chircu  <liviu at opensips dot org>
	* [8b37b7afa] :

	doc/build-contrib.sh: Add new contributors
	(cherry picked from commit 9569c2c8e0a974438b954c6a1fa721048c9b7b2c)


2019-01-23  Liviu Chircu  <liviu at opensips dot org>
	* [bfd7dd7b8] :

	Fix poorly managed route param recursion level on an error state
	(cherry picked from commit b491999b2449b0f22d57dd92ce53e0b4f51a35de)


2019-01-20  OpenSIPS  <github at opensips dot org>
	* [8a79578ed] :

	Rebuild documentation


2019-01-18  Liviu Chircu  <liviu at opensips dot org>
	* [38bb157ba] :

	registrar: Fix incomplete commit d2a958dca
	Many thanks to @fedorna for catching this one!

	Fixes #1588

	(cherry picked from commit d47b51604604431a0390cd1ecc4514e0e0fe195b)
	(cherry picked from commit 7b61a7e9e6334d537c2ca1e1aa196c52f4dc83ef)


2019-01-18  Liviu Chircu  <liviu at opensips dot org>
	* [0c244e2e4] :

	nathelper: Fix segfault while interpreting the branch value
	(cherry picked from commit 81f6ac78649d17372d6183a97403514281c537e0)


2019-01-17  Razvan Crainea  <razvan at opensips dot org>
	* [a95885d2c] :

	debian: fix changelog version
	Reported by Jasper Hafkenscheid (hafkensite on GitHub)
	Close #1584


2019-01-13  OpenSIPS  <github at opensips dot org>
	* [a6234fe05] :

	Rebuild documentation


2019-01-09  Ovidiu Sas  <osas at voipembedded dot com>
	* [5b21d462d] :

	httpd: Handle Content-Type: text/html and enhance some err logs
	(cherry picked from commit 7829916b8505b6425cdf2b7dc6a25b0604a91bb5)


2019-01-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [27f9e0a65] :

	[mi_xmlrpc_ng] Fix methodResponse XMLRPC formating
	The 'struct' tag must be enclosed in a 'value' tag.
	Fixes #1499
	(cherry picked from commit c1cfba8806e64158942a13e062bfdf2611d76f21)


2019-01-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8904e6a39] :

	 httpd: use newer API of libmicrohttpd
	 For new versions of libmicrohttpd, use MHD_create_response_from_buffer instead
	 of deprecated MHD_create_response_from_data.
	 Also MHD_HTTP_NOT_ACCEPTABLE is replacing MHD_HTTP_METHOD_NOT_ACCEPTABLE

	 cherry-pick from 621bf99a45fe22502cbed7541f1343dfb1314583


2019-01-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b14153a6f] :

	[MI] Fix missing/wrong Content Type in HTTP responses
	When registering a callback to the HTTP server, let it also know what will be the Content Type for the returned data.
	Fixes #1509
	(cherry picked from commit b3e0f6cc9c3e04f986f00919778b92c1f6839104)


2018-12-23  OpenSIPS  <github at opensips dot org>
	* [89b2a0e3e] :

	Rebuild documentation


2018-12-21  Razvan Crainea  <razvan at opensips dot org>
	* [fabb64c93] :

	compression: re-compute the uri after rebuilding the buffer
	When freeing the buffer in be3b603667, the URI in transaction remained
	pointing to the old buffer. Therefore when building local ACK or CANCEL,
	URI was having garbage.

	Fixes #1575

	Many thanks to Jock McKechnie for reporing it and offering testing support
	(cherry picked from commit d87766364096e567dbd15f9d8ff1dd2b6082703e)


2018-12-20  Razvan Crainea  <razvan at opensips dot org>
	* [6b7f95c8c] :

	dialog: do not replicate update messages on early
	This suppresses some errors generated by incomplete replicate messages
	(missing callee socket, tags, etc.)
	(cherry picked from commit 7dd023c2501579adb287506aa59c32801e57b1cc)


2018-12-19  Alexey Vasilyev  <alexei.vasilyev at gmail dot com>
	* [4cdd2bb2c] :

	db: correct parsing ipv6 address for host
	(cherry picked from commit bfbfa83ba860aead9d6d7b1c91f08185ee4425e1)
	(cherry picked from commit 4c08620d630cf26bb28615ba39062a8a0c7ce8e0)


2018-12-19  Alexey Vasilyev  <alexei.vasilyev at gmail dot com>
	* [bec1d4181] :

	cachedb: correct parsing ipv6 address for host
	(cherry picked from commit 084ab2c38667a71120552d933ffa901fdbf5b9dc)
	(cherry picked from commit 07a4390eb39f75dc4716d0875db1bd140102ae9f)


2018-12-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b28f6b2f7] :

	Fix parsing SIP buffer when needed HDR is last.
	Be sure and not not include the HDR to BODY separator as part of the last hdr.
	Fixes #1555.
	(cherry picked from commit 24ebbbe42bb1a888b0a06b08dd5c6a280e4ec2c6)


2018-12-18  Vlad Patrascu  <vladp at opensips dot org>
	* [f932176db] :

	mmgeoip: fix gcc compile warning
	(cherry picked from commit 88ef1217067f08998ff4d5f28dcd4aabfc677a23)


2018-12-18  Vlad Patrascu  <vladp at opensips dot org>
	* [0bb4c6648] :

	mmgeoip: update driver to support GeoIP2
	Closes #1362
	(cherry picked from commit 4272fcee0a18fec577f2e1438909dcfdb1b4418d)


2018-12-18  Liviu Chircu  <liviu at opensips dot org>
	* [71c6efdc4] :

	registrar / mid_registrar: Fix lookup() with a custom AoR
	Thanks to Antonis Psaras (@apsaras) for reporting!

	Fixes #1571
	(cherry picked from commit d2a958dcad300ba4dd9e63e8a4ccbc2da6d60224)

	 Conflicts:
		modules/mid_registrar/lookup.c
		modules/registrar/lookup.c


2018-12-17  Razvan Crainea  <razvan at opensips dot org>
	* [26c846d49] :

	compression: do not free buf for stateless
	The callback frees them for you, resulting in a double free.
	Bug introduced in be3b6036.

	Reported by Ryan Bullock on GitHub.
	(cherry picked from commit 57f142bdeda5dd7ad4406cab184ab7a2668e32a1)


2018-12-16  OpenSIPS  <github at opensips dot org>
	* [2b54b5119] :

	Rebuild documentation


2018-12-13  Razvan Crainea  <razvan at opensips dot org>
	* [228870af6] :

	rtpengine: fix possible crash in via-branch
	Before this fix, if one was asking for a via branch id that was not
	available, OpenSIPS was crashing.
	Fixes #1556
	(cherry picked from commit 624317765d4ad49e0a3dd31b563b0c3c91657959)


2018-12-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8332714f9] :

	Fixed cloning of hostend structs.
	The h_addr is only a #define to h_addr_list[0], leading to overwriting the new h_addr_list[0] with the old (src) value.

	Credits to Dan Pascu (@danpascu) for reporting and assisting with the troubleshooting.
	(cherry picked from commit 5f1ec371b00b0bf8e16e37b94b010517572e88e5)


2018-12-03  Liviu Chircu  <liviu at opensips dot org>
	* [ae290152f] :

	Fix possible pkg buffer overflow in all {sdp.*} transformations
	Thanks to Bogdan for directing the troubleshooting of this bug.
	Thanks to 46Labs for providing extensive troubleshooting information.


2018-12-02  OpenSIPS  <github at opensips dot org>
	* [006c6fdb8] :

	Rebuild documentation


2018-11-29  Dan Pascu  <dan at ag-projects dot com>
	* [1017225bf] :

	Fixed segfault when resource list document is not found


2018-11-27  Razvan Crainea  <razvan at opensips dot org>
	* [9efcb7d07] :

	compression: fix leaks when message was rebuilt
	When the initial buffer had to be changed, the previous one was no
	longer released, resulting in a memleak.

	Credits go to Jock McKechnie for reporting and providing testing env!
	(cherry picked from commit be3b60366763c3c0390f20be590420440c834204)


2018-11-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [15cdc6f92] :

	Improve docs
	A bit more details on handling GRUU.
	Thanks to Robert Dyck for contributing on this.
	(cherry picked from commit 2fa7389b973360c12c46963ec6cef9bb038e3b0d)


2018-11-26  Razvan Crainea  <razvan at opensips dot org>
	* [b1a9dcf9c] :

	b2b_logic: use late negociation for last ACK using MI bridge
	(cherry picked from commit 25fb33ee7f562b1f2b7a4001d9c6460ba3199a04)


2018-11-26  Vlad Paiu  <vladpaiu at opensips dot org>
	* [94b7a5b26] :

	Fixed dr_number_routing crash with empty partition
	(cherry picked from commit b0bf9270729b0de5f7894688411353e1c5738be3)


2018-11-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a03416105] :

	Fix formating floats in SQL queries.
	Force POSIX locale for LC_NUMERIC to be sure that the dot separater is used when using floats in SQL queries (some locales are using the comma for that, breaking the SQL syntax).

	Closes #1538
	(cherry picked from commit 0ccda2e249890238f94736dfd8b179c359afa8f0)


2018-11-25  OpenSIPS  <github at opensips dot org>
	* [d578fa6e7] :

	Rebuild documentation


2018-11-22  Liviu Chircu  <liviu at opensips dot org>
	* [5a147c6e3] :

	acc: Fix buffer overflow


2018-11-22  Aron Podrigal  <aronp at guaranteedplus dot com>
	* [0cd9bba22] :

	Fixed what was missed out in 6bc2a94
	refs #1537
	(cherry picked from commit 3462e8906c878f779ba696db29b3610606f0d9f5)


2018-11-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a21fa6ddd] :

	Fix nested triggers of local route.
	Use a dynamically allocated sip_msg struct rather than a static one.
	Credits go to Aron Podrigal to spot and report the problem.
	Addresses #1537
	(cherry picked from commit 6bc2a94c85d61c61f50ed5fc63e626a23a63258e)


2018-11-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [928ea999b] :

	Fix setting loop params during fallback.
	While doing a prefixless rule matching, reset the rule_idx to be sure we break the fallback looping.
	Addresses #1536
	(cherry picked from commit 95bf163ae951fe145c4735682f8949dc1626abb0)


2018-11-22  Razvan Crainea  <razvan at opensips dot org>
	* [362b3c220] :

	net/tcp: listen for read events after async connect
	After an async connect succeeds, the fd should also be added in reactor
	for read events, otherwise these will be lost.

	Many thanks go to Pete Kelly for reporting and testing!
	(cherry picked from commit ca643dee0f8851be7c1756bd270f168e41fb053c)


2018-11-19  Fabian Gast  <fabian.gast at nfon dot com>
	* [87a33af73] :

	Fix changed iana url
	(cherry picked from commit 97dbc56a44b0cbfd7321cc03adc9a0f4ba044632)


2018-11-18  OpenSIPS  <github at opensips dot org>
	* [9c6b26e5b] :

	Rebuild documentation


2018-11-16  Liviu Chircu  <liviu at opensips dot org>
	* [a20e6f49a] :

	tm: Properly re-init branches after t_relay("0x02") fails
	A t_relay("0x02") failure would do the required t->uac[] array element
	buffer cleanups (good!) but then have these elements completely zeroized
	(bad!).  These entries must additionally be initialized afterwards,
	similarly to how init_branches() leaves them after a new transaction is
	built.

	Many thanks to Debasis Das from Twilio for reporting this bug.
	(cherry picked from commit 853755f11d372c29866bed948796320314540084)


2018-11-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [857b9a1dc] :

	Fix annoying bogus error log
	(cherry picked from commit 42934c42400842a2e72e6766e040037f366643f4)


2018-11-11  OpenSIPS  <github at opensips dot org>
	* [9ca20fd2c] :

	Rebuild documentation


2018-11-11  Liviu Chircu  <liviu at opensips dot org>
	* [de714edc3] :

	build-contrib.sh: Fix a counting bug with renamed modules
	The "pre-rename" documentation-related commits were being skipped when
	dealing with renamed modules.
	(cherry picked from commit d6a6e8d6830e80a87b48583b79117058a34e720c)


2018-11-10  Liviu Chircu  <liviu at opensips dot org>
	* [d9d27e358] :

	Improve documentation
	    * sql_cacher: fix grammar
	    * rtpproxy: improve function signatures (each param is optional)
	    * fix typos
	(cherry picked from commit 03c910bdf36a5740ee0f79b146ad46895d2ecda9)


2018-11-09  Vlad Patrascu  <vladp at opensips dot org>
	* [245916dea] :

	sql_cacher: small doc improvement regarding delimiter parameters
	(cherry picked from commit 3b1c13a749328a9f3e341d942ca2a990e95ae877)


2018-11-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [98d832089] :

	Fix INT only restriction on integer columns in DR
	The mysql views report any static integer as DB_BIGINT, makeing it impossible to be used with drouting.
	(cherry picked from commit a9eba1f38f1cdf70c7b58f145fea7c030aa7ef4d)


2018-11-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e4ffbf766] :

	Fix too script restrictions on allowed types of routes for runing certain functions.
	(cherry picked from commit 6a11f68cb7a2381c2b6febff9b47979237761ff6)


2018-11-08  Razvan Crainea  <razvan at opensips dot org>
	* [a2b243572] :

	ws: decrement load statistic in case of error or other msg


2018-11-04  OpenSIPS  <github at opensips dot org>
	* [bd8931565] :

	Rebuild documentation


2018-11-01  Liviu Chircu  <liviu at opensips dot org>
	* [b455e1de8] :

	HP_MALLOC: Recover from double pointer free
	Similar idea to commit 2254d00115.

	Related to #1518.
	(cherry picked from commit 9094b55152423617d9c4455ae9513b881616eaff)


2018-10-31  Razvan Crainea  <razvan at opensips dot org>
	* [60c1a0204] :

	stun: prevent buffer overflow on error
	(cherry picked from commit dca22b0484725ddbbbb7d8acd1e0faf57f278e38)


2018-10-30  Razvan Crainea  <razvan at opensips dot org>
	* [2396ab57a] :

	trans/sdp: fix detection of first line
	(cherry picked from commit b8e3f61a7b1b95cc8f8e0cece789271e2867cd7d)


2018-10-28  OpenSIPS  <github at opensips dot org>
	* [f63d75847] :

	Rebuild documentation


2018-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [7baf10783] :

	rest_client: Plug pkg leak on failed async transfers
	(cherry picked from commit fe5e1b8da01ba0e5698e080c27726cf2abb74249)
	(cherry picked from commit 4f017ec93a747e5a155e78c2844d516e0b99b28b)


2018-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [7481a3799] :

	rest_client: Repair poor timeout settings at startup
	(cherry picked from commit a2a8dc78d2a78676ce1f5b8c9b8f31ef27cb1906)
	(cherry picked from commit a7812103981b6ae3432704af662907af938a0c33)


2018-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [0aca50566] :

	tcp: init tcp req even for CRLF pingpong
	Before this commit, the TCP request was not released for ping-ping
	constructed using multiple packets. This lead to an unknown state in the
	TCP parser, hence an abort() was triggered.
	(cherry picked from commit c20181fa36de2d96d6dd9e8dbc533bcc6b95d8a8)


2018-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [413c7cf9d] :

	bin: fix invalid memory access
	Inspired from a3a260d7d45868382d00ee366e00000e7badd36a
	(cherry picked from commit 63f0ad718861870a1ba6d931db573ab6e98627a3)


2018-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [2f36d9678] :

	net: reset msg attempts every time a msg is fully processed
	(cherry picked from commit 6a4bf36ca3524e0211a874c9d5e62c65b33cb28e)


2018-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [82dbce7ad] :

	proto_hep: reset msg attempts when request is completed
	(cherry picked from commit bf74fccad45e85869f1fb73d47787c7c661bfeff)


2018-10-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [888708f83] :

	Fixed wrong error messages.
	Reported by Nick Altmann
	(cherry picked from commit 40c73fc1bada8fea20b0408186da2ed15eb8c285)


2018-10-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [38b3e35a3] :

	Do not expose the transaction when t_newtran() detects a retransmission
	It is much safer and consistent to avoid exposing the transaction when retransmision is detected; t_newtran() anyhow is automatically taking care of the retransmission handling, so makes no sense to expose the transaction further.
	(cherry picked from commit 51859e0455595b445e60f687592bdbc0a6cf64c6)


2018-10-23  Liviu Chircu  <liviu at opensips dot org>
	* [b9e27d066] :

	drouting doc: Fix bad examples and descriptions
	    * dr_is_gw() works fine with any pvar
	    * is_from_gw(): clarify that it matches IP + port
	    * improve example quality

	(cherry picked from commit 8c4ac521bfeaddb68ff9a9dd96f556e3d8c38b0d)
	(cherry picked from commit f5fb1c33013a76b745a98359d4bc14be761cf222)


2018-10-22  Razvan Crainea  <razvan at opensips dot org>
	* [2ee861521] :

	rtp*: add errno in error output
	(cherry picked from commit 36e6c87f0e8acff7da43d7838cb5067174f956ac)


2018-10-22  Razvan Crainea  <razvan at opensips dot org>
	* [5eaf4ced0] :

	debian: add python module
	(cherry picked from commit bd86da3db984ff024abb467d809e51fe88f89a45)
	(cherry picked from commit d302651e3506478d56dbab08f7f35ea5296e2f3d)


2018-10-22  OpenSIPS  <github at opensips dot org>
	* [ea64e5d5e] :

	Rebuild documentation


2018-10-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f2eb8d403] :

	Improve docs
	Add external reference to the advanced ACC tutorial
	(cherry picked from commit 3f04700e329f19c4024bb4cc1e2d70d3558cbd39)


2018-10-16  Dan Pascu  <dan at ag-projects dot com>
	* [b56af1e6c] :

	Fixed memory leaks when freeing socket_info


2018-10-16  Dan Pascu  <dan at ag-projects dot com>
	* [1482352ba] :

	Fixed illegal memory access after being freed


2018-10-16  Liviu Chircu  <liviu at opensips dot org>
	* [67fae210c] :

	build system: Add special handling for gcc 7.2
	It appears that gcc's "-dumpversion" behaves differently in 7.2
	than in previous versions, due to "-dumpfullversion" being introduced.

	$ gcc -dumpversion
	7
	$ gcc -dumpfullversion
	7.2.0

	This breaks compilation on systems such as Xubuntu 17.10 with:

	Makefile.defs:930: You are using an old and unsupported gcc version
	(7), compile at your own risk!

	This backwards-incompatible change seems to have been reverted in 7.3+,
	though, where the full version is once again being dumped:

	$ gcc -dumpversion
	7.3.0
	$ gcc -dumpfullversion
	7.3.0
	(cherry picked from commit 79418dce9b14754bf15285b7d72b93513c5c93cd)


2018-10-16  Liviu Chircu  <liviu at opensips dot org>
	* [b137c7afd] :

	siptrace/script_helper: Fix crashes with missing headers
	Thanks to Ben Newlin and Jon Abrams for spotting this issue!
	(cherry picked from commit b14f1435e0a3da22ab4fded86aeb4d94a050f775)


2018-10-15  OpenSIPS  <github at opensips dot org>
	* [07c00698b] :

	Rebuild documentation


2018-10-08  Razvan Crainea  <razvan at opensips dot org>
	* [0cf2557f1] :

	rtpengine: only compute weight sum over active servers
	This also fixes the case where a server is only used as failover.

	Credits go to Sasmita Panda for reporting this.

	Close #1488.
	(cherry picked from commit d227b4a61f4628112a37decd58f1f4b206b2c2b1)


2018-10-08  Razvan Crainea  <razvan at opensips dot org>
	* [b6b8e150a] :

	exec: fix spec parsing for exec
	Single variables are GPARAM_TYPE_PVS, not GPARAM_TYPE_PVS, which is a
	formatted string and can have multiple specs and text in it.


2018-10-08  Razvan Crainea  <razvan at opensips dot org>
	* [4b3fd03d5] :

	async: fix fd leaking and invalid memory overwrite
	Also simplify the async interface to prevent dereferencing the fd.
	This commit combines the following master commits:

	9b45482861c53d79718f4eeff57a25b278964c5f
	2b264d0b8c0b8f25d1e895247a1f0f8697ae34e5
	ac549a0d5f3a084cd7034bf45b603f95c64025af

	Kudos to Liviu Chircu for brainstorming and optimizing the initial fix.

	(cherry picked from commit 989b7b939c1f88e4ba6fe18e44ec640ca2f9a467)
	(cherry picked from commit 5de384726ab5485a266d20f471eb4d20c174d07f)


2018-10-08  Razvan Crainea  <razvan at opensips dot org>
	* [73c4659ed] :

	db_mysql: add support for mysql 8.0
	Fix includes path to prevent adding mysql from source code.
	no longer define bool for libmysql > 8.0

	Credits go to KetanKothari(IRC) for reporting this.
	Close #1456

	(cherry picked from commit 13c6bbbf7bdefeb314ba3624b311684c366c33bc)
	(cherry picked from commit e2761e0f7570088d9c18174976c141f654dea2d5)


2018-10-08  OpenSIPS  <github at opensips dot org>
	* [31523a9de] :

	Rebuild documentation


2018-10-03  Liviu Chircu  <liviu at opensips dot org>
	* [de8e95f8c] :

	str_strstr(): Fix unnecessary error log
	(cherry picked from commit 640263ded013767b25a19eea8bf1276a5f6be5b0)


2018-10-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fcc81db26] :

	Fix error logs in terms of missing newline or formating
	(cherry picked from commit 76cf8f4513b0de4353ee52dec5e4df00f23dc493)


2018-10-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6efc7eeca] :

	Properly set the custome values for the dr tables.
	IF set via modparam, be sure we recalculate the len of the new table name BEFORE we start using it :)
	Thanks to @nikbyte and @kertor for report and help.
	Closes #1479
	(cherry picked from commit a9cd32d75530b79a365f9262f0f919285048cbf7)


2018-10-02  Liviu Chircu  <liviu at opensips dot org>
	* [ff86090c8] :

	dispatcher: Do not start without any partitions
	(cherry picked from commit a1b1f38088a0306310dfeffc189dd813015a93bd)


2018-10-02  Razvan Crainea  <razvan at opensips dot org>
	* [9da0694bf] :

	compression: fix memory in mc_compact()
	The function was not releasing the parsed bodies for known headers

	Reported by Jock McKechnie on mailing list
	(cherry picked from commit 3fef51da747721895fe418987dd8c5db025d478a)


2018-10-01  Razvan Crainea  <razvan at opensips dot org>
	* [53e4c3b0d] :

	db_postgres: add timeout parameter
	Prevent db_postgres from getting OpenSIPS stuck trying to connect to
	an unreachable PostgreSQL server.

	Credits go to Andrew(kertor) for reporting this.
	Close #1443

	(cherry picked from commit c7e91f5356c9888c7d9c171cb12bd27a1412922d)
	(cherry picked from commit 280a4dafca390b980a686882783c53bd81b44201)
	(cherry picked from commit f928222580094687dff77c7e8e760819dfc86e8f)


2018-10-01  OpenSIPS  <github at opensips dot org>
	* [4281a6e1d] :

	Rebuild documentation


2018-09-27  Liviu Chircu  <liviu at opensips dot org>
	* [baae077c7] :

	topology_hiding: Fix possible startup crash
	How to reproduce:
	    loadmodule "topology_hiding.so"
	    loadmodule "dialog.so"
	... without enabling "force_dialog".

	Alternative, temporary fix (until you update your binaries):
	    loadmodule "dialog.so"
	    loadmodule "topology_hiding.so"
	(cherry picked from commit d837021b1558da7a147197e60e2d6d61570dc978)


2018-09-27  Liviu Chircu  <liviu at opensips dot org>
	* [1034b67f3] :

	ip_addr2a(): Improve error handling
	Do not return a NULL pointer when attempting to print an unknown address
	family, rather an empty string.

	Reported by @danceinrain
	Fixes #1478
	(cherry picked from commit a5a3644a4bef21f0fc042d92d4e0166bb94a9ffa)


2018-09-27  Liviu Chircu  <liviu at opensips dot org>
	* [a903fa5d6] :

	Fix some JSON-incompatible MI replies
	(cherry picked from commit c658e07b07f63e17535ecac998bf30ff02f0ad78)


2018-09-26  Liviu Chircu  <liviu at opensips dot org>
	* [6777960d5] :

	rest_client: Fix some POST corner-cases
	This patch addresses two rare bugs such that they may now only occur
	with old curl versions (pre 7.17.1, that's pre 2007).

	When calling rest_post() or rest_put(), assuming we're fetching the
	request body buffer into "req_body" via fixup_get_svalue():

	    1. since req_body->s is not dup'ed and may point to a PV buf,
		the next SIP message may impact the currently "just launched"
		async transfer by overriding the value stored in the PV buffer
		before libcurl fully reads it

	    2. req_body->s is provided by a PV which does not NULL-terminate
		strings (e.g. $du), thus curl's strlen() may overflow or crash
	(cherry picked from commit c2c7b052b4b4d05abde20520098acc68f8cd3ed0)


2018-09-26  Razvan Crainea  <razvan at opensips dot org>
	* [d72409d66] :

	rest_client: prevent overflow in Content-Type
	(cherry picked from commit c92794e1899ca5fbfc8e9ad488026cc5f344e68a)


2018-09-24  OpenSIPS  <github at opensips dot org>
	* [068533398] :

	Rebuild documentation


2018-09-20  Nick Altmann  <nick.altmann at gmail dot com>
	* [4e2b491e7] :

	RPM spec: fix scenario_callcenter.xml file


2018-09-20  Razvan Crainea  <razvan at opensips dot org>
	* [6ddf2c69d] :

	call_center: deploy scenario file at install
	Deploy the scenario_callcenter.xml b2b scenario file at install.

	Thanks go to cleberb on GitHub for reporting this!
	Close #1464
	(cherry picked from commit a6d681c89a583cbeec372b90ca25a8ccc09cffe0)


2018-09-20  Liviu Chircu  <liviu at opensips dot org>
	* [c11c96a62] :

	Change source file mode to 644
	(cherry picked from commit ac91f3cda4e6b194dc8284128bf9e903df875f12)


2018-09-20  Peter Lemenkov  <lemenkov at gmail dot com>
	* [a9b2dac45] :

	Change file mode to 644
	(cherry picked from commit 029d2cf72ca792ceb874f400c432466238438fa5)


2018-09-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [daff8db7a] :

	Rebuild DB schema


2018-09-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [47bbc9ed7] :

	Fix URI_LEN defintion
	256 was a typo, 255 is the max len for a varchar in mysql
	Thanks again to Brandon Lee @palmtown
	Related to #1462
	(cherry picked from commit 2f5e5ffa7ffc272283aba919e112140085c94279)


2018-09-17  OpenSIPS  <github at opensips dot org>
	* [06b5d40d7] :

	Rebuild documentation


2018-09-13  Vlad Patrascu  <vladp at opensips dot org>
	* [5c163f512] :

	tls_mgm: fix IPv6 support in TLS domain definition


2018-09-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7353d9d93] :

	Regenerate DB schema


2018-09-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b195addba] :

	Fixed len for the username column
	(cherry picked from commit b66851b9eab4f1d5685dea19e3c38e74405c5abc)


2018-09-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [dc49d902c] :

	Fix IPv6 related storage capacity.
	Extand SIP_URI from 128 to 256 to be sure that IPv6 containing URIs (especially SIP contact URIs) to fit.
	Closes #1462
	(cherry picked from commit 6c8370be3da4b32240a4cd12fd71436ab9de78d7)


2018-09-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c71c07afc] :

	Fix IPv6 support in lb_is_destination() and lb_count_call().
	(cherry picked from commit c4505fadb1c4cd1207b489103a909d46a4acb262)


2018-09-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [87307817f] :

	Fix IPv6 support in ds_is_in_list().
	Closes #1459
	(cherry picked from commit 774c22d83eace7b7e0d37f503f8759ffffdf5f9a)


2018-09-12  Dan Pascu  <dan at ag-projects dot com>
	* [1466b5d97] :

	Improved log message


2018-09-12  Dan Pascu  <dan at ag-projects dot com>
	* [90f606805] :

	Adjusted logging of private memory used based on its configured type


2018-09-12  Dan Pascu  <dan at ag-projects dot com>
	* [b52fc07d2] :

	Adjust the reactor size in accordance to the type of memory being used


2018-09-12  Dan Pascu  <dan at ag-projects dot com>
	* [bf2f63d5a] :

	Fixed displaying the memory size


2018-09-11  Dan Pascu  <dan at ag-projects dot com>
	* [b31444af5] :

	Fixed segmenation fault caused by accessing deallocated memory


2018-09-10  OpenSIPS  <github at opensips dot org>
	* [1a32f8b10] :

	Rebuild documentation


2018-09-04  Vlad Patrascu  <vladp at opensips dot org>
	* [acb5961a1] :

	cachedb_cassandra: update documentation
	(cherry picked from commit f85724f9b229548542ccfa6b5a157ad3d7b534bd)


2018-09-04  Vlad Patrascu  <vladp at opensips dot org>
	* [8ed195ced] :

	cachedb_cassandra: check if counters table exists before using it
	(cherry picked from commit a81860e6050a70afcd6da18d9b75be02ebaf1af4)


2018-09-04  Vlad Patrascu  <vladp at opensips dot org>
	* [3c54186dc] :

	cachedb_cassandra: use quoted identifiers in queries
	(cherry picked from commit c58945b324281a3a243e97300dffd5ca2755c26f)


2018-09-04  Vlad Patrascu  <vladp at opensips dot org>
	* [cd9279745] :

	cachedb_cassandra: change the separator in the URL database to '.'
	(cherry picked from commit 37d240643301053a0f6ba9f2558a3e8e60500556)


2018-09-04  Vlad Patrascu  <vladp at opensips dot org>
	* [e0b6d2922] :

	cachedb_cassandra: update driver
	Update the OpenSIPS Cassandra driver from the deprecated Thrift based
	implementation to the newer DataStax C/C++ driver that uses Cassandra's
	native transport protocol and the Cassandra Query Language.

	Closes #1117
	(cherry picked from commit 6f873a7fb98e0a2a53e098976a83037390d13efc)


2018-09-02  OpenSIPS  <github at opensips dot org>
	* [394f14808] :

	Rebuild documentation


2018-08-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c245e77a4] :

	Backport the word64 support for encode/decode


2018-08-31  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [107e1f61b] :

	Merge pull request #1448 from vasilevalex/topo_hide_rfc
	Change topology hiding Contact header to fit RFC 3261
	(cherry picked from commit aa1c800b649cb6833513284550e4c25b2aeed9ee)


2018-08-19  OpenSIPS  <github at opensips dot org>
	* [ce1aeb836] :

	Rebuild documentation


2018-08-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [526fb1eed] :

	Fixed freeing NULL rpl from REDIS server.
	Reported by @mrmeyers99
	Closes #1442
	(cherry picked from commit b33b7a7e71ce0b76a80c3abf430f572074869e22)


2018-08-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1d28bc228] :

	Fixed reporting the correct query retcode via db_virtual
	There are mainly 2 fixes here:
	- correct iteration in the list of connection when failed conns are found or detected
	- correct aggregation of the retcode, based on all performed queries in the list
	(cherry picked from commit 8369c3191ed0f355eaf8087767ea113861101a81)


2018-08-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [749b4bf74] :

	Fix memory leak on redis cache misses
	Closes #1441
	Credits go to @mrmeyers99
	(cherry picked from commit cf88b4b261a434f9c39e0254440175549db2f8c9)


2018-08-14  Liviu Chircu  <liviu at opensips dot org>
	* [3146d6803] :

	dialog: Complete commit 4ba14e51cbbb
	Commit 4ba14e51cb did not actually change anything, as the runtime
	environment was also hardcoded to only write to AVPs / pseudo-vars.

	We now fix get_profile_size(), as well as fetch_dlg_value() such that
	they properly write to any writable pvar at runtime.

	(cherry picked from commit 005b89eed94f207047be8c7a424618b650cd3042)
	(cherry picked from commit a822be19ed56bf17e9524bd379925889bc6bf708)


2018-08-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3330d8349] :

	Fix wrong chapter'ing in docs
	(cherry picked from commit 0e978c907d58a868e6c81f4685c1e46189910fc1)


2018-08-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1d78de260] :

	Fix cases in db_url parameter examples
	(cherry picked from commit 550e8cb8a75dd193ada51fc102e4573c2be862af)


2018-08-12  OpenSIPS  <github at opensips dot org>
	* [19d5c63f2] :

	Rebuild documentation


2018-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c944c09b3] :

	Suppressed too verbous dbg messages
	(cherry picked from commit ae6e9665ec8c0585c40abcb51b5ba138e5721423)


2018-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [40dbf9a01] :

	Fix crash when using an undefined db virtual set
	(cherry picked from commit c288a1c1ab49b3b40bbb5efa8dd629383b2e34b6)


2018-08-10  Vlad Patrascu  <vladp at opensips dot org>
	* [678cee4bb] :

	sql_cacher: fix an error message
	(cherry picked from commit 98662b927bc67b9c9f113e853176f499cd732354)


2018-08-10  Vlad Patrascu  <vladp at opensips dot org>
	* [6c2b6c2aa] :

	sql_cacher: fix db handlers for multiple caching entries
	(cherry picked from commit 29b04376ea57875c8918815696b599821a8e5a64)


2018-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d568558ef] :

	Fix cases in db_urls parameter doc.
	(cherry picked from commit ea78949ff7f9725d4a6f278c3d646dacace2d11a)


2018-08-10  Razvan Crainea  <razvan at opensips dot org>
	* [b1cb3a7d6] :

	dialog: fix MI profile_end_dlgs return to 200 OK
	Before this change the command was returning 400 OK on success
	(cherry picked from commit 3c7f8943aa70f6871a934e450b8e4fffe71b9ddd)


2018-08-09  Razvan Crainea  <razvan at opensips dot org>
	* [aea1e294e] :

	etc/tls: remove passphrase
	(cherry picked from commit 7bd8f1dd77352ffde1c8c7721172816aa25149c8)


2018-08-06  Razvan Crainea  <razvan at opensips dot org>
	* [bcc82a137] :

	db_mysql: re-try query in case of a server deadlock


2018-08-05  OpenSIPS  <github at opensips dot org>
	* [8afe5318a] :

	Rebuild documentation


2018-08-04  Liviu Chircu  <liviu at opensips dot org>
	* [60a8d4826] :

	Module doc: Normalize section names
	(cherry picked from commit b4295bc23a68d78c3ab45ea7c878e901a7d434a5)


2018-08-04  Liviu Chircu  <liviu at opensips dot org>
	* [8d247b526] :

	Improve documentation
	    * tm:
	        - t_relay() "0x02" flag
	        - t_newtran()
	    * registrar: $avp(attr)
	    * dialog: match_dialog()

	(cherry picked from commit bc0855275ebde456eb0cfd7682774fc316a41dc8)
	(cherry picked from commit d79850377282facc29ab84a85af06cdccecabd9e)
	(cherry picked from commit 9f75f2baec522a61a0e05747495e1c625f299485)

	Fix missing documentation anchors

	(cherry picked from commit 57ea5ab03abde87c379108dcbfa8931910575663)


2018-08-04  Liviu Chircu  <liviu at opensips dot org>
	* [022572cd8] :

	Codebase improvements
	(cherry picked from commit 81771e7c53de6cf85b96f55fbcbd1d9591ca42a8)
	(cherry picked from commit ac12fc933e041091c68c950769d744a86d4b61eb)
	(cherry picked from commit aaef503729cca7863bf92da10d6ecc4e7bcf87a8)


2018-08-04  Liviu Chircu  <liviu at opensips dot org>
	* [3f14d905b] :

	Fix typos
	(cherry picked from commit b93a79e31a79b13fe06ab6a0b89fb3f7f20399e6)
	(cherry picked from commit 59231f41c0ea5e85c783e595c83f997128906bbb)
	(cherry picked from commit 425075dd60022bb1b16440bf184ba7c2652440dd)


2018-08-04  Liviu Chircu  <liviu at opensips dot org>
	* [c53f5bb05] :

	doc/build-contrib.sh: Improve locale management
	(cherry picked from commit ae97cea6b5354b68659c87396b1ef852f98f115f)
	(cherry picked from commit efba6a239d69776b245c88cb66c9311cf01d5b1e)
	(cherry picked from commit 2653083baa6c860d45cae4f8bd83c34a194e8632)


2018-08-02  Liviu Chircu  <liviu at opensips dot org>
	* [b39a7a25e] :

	cachedb_mongodb: Fix modparam typo
	(cherry picked from commit deb76e340a8322aa7a1eea0d73f40e00867d1c47)
	(cherry picked from commit 61ef877c5b7d43925cd7587b2a798afcdce637da)


2018-08-02  Liviu Chircu  <liviu at opensips dot org>
	* [02d159ff0] :

	dialog: Make get_profile_size() less restrictive
	Allow any writable pvar to be given for the 'size' output parameter.
	(cherry picked from commit e1346ce9f889cf609155ee83972d751275b1bcab)


2018-07-30  Liviu Chircu  <liviu at opensips dot org>
	* [2887c8124] :

	doc/build-contrib: Simplify external scripting
	(cherry picked from commit dce68e49123974ab0cc563d0e5ed528d67337a61)


2018-07-26  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [42163eff0] :

	Merge pull request #1421 from pasanmdev/2.3
	* fixed msg payload content to be string rather than binary data
	(cherry picked from commit fd8c0401d472f35884d70b3bd2d327799275447d)


2018-07-26  Maksym Sobolyev  <sobomax at sippysoft dot com>
	* [a91b70164] :

	Add <sys/uio.h> where writev(2) is used.
	(cherry picked from commit 1837ef23c2bcc02bec9d3ae8e088295eb6d34f3a)


2018-07-26  Björn Esser  <besser82 at fedoraproject dot org>
	* [34bbead41] :

	modules/json: Properly detect json-c version and adaptions for v0.13
	(cherry picked from commit 57ae84b2d8b2e0af1a66d529e4e94b21f3df319d)


2018-07-24  OpenSIPS  <github at opensips dot org>
	* [6a642eec1] :

	Readme files regenerated


2018-07-24  OpenSIPS  <github at opensips dot org>
	* [b832ce1cf] :

	Generated and imported the per-module contri files


2018-07-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [989e6fa94] :

	Remove the extra '\n' returned by ctime().
	Reported by Kirill Galinurov.
	(cherry picked from commit 01f8f0867431ddb9e085f4cee460e3e748314887)


2018-07-23  Razvan Crainea  <razvan at opensips dot org>
	* [9234a417a] :

	proto_tcp/bin/hep: fix deadlock when delaying writes
	(cherry picked from commit 058cc22cb55dce9b890308b9f83a42a88691f2c8)


2018-07-18  Liviu Chircu  <liviu at opensips dot org>
	* [04ede5361] :

	Module doc: Add an auto-generated "contributors" chapter
	Each module will additionally contain an auto-generated
	doc/contributors.xml file.

	To generate a contributors.xml file:
	    * git fetch origin 'refs/replace/*:refs/replace/*'
	       (pull the entire SER/OpenSER/OpenSIPS history tree)
	    * make modules-contrib [modules=modules/<your_module>]

	Follow the comments in doc/build-contrib.sh for more info.

	(cherry picked from commit 52016c07f3dbc047a7eaef1a504256ac6564bf30)
	(cherry picked from commit fe47a527d7111343a67c021456e4bdf909dc4332)


2018-07-17  Vlad Patrascu  <vladp at opensips dot org>
	* [ceaa35721] :

	Regenerate default TLS user certificate and rootCA
	(cherry picked from commit 9ee39b75fe1296820d70a86a2e2343b46a01fcbc)


2018-07-13  Razvan Crainea  <razvan at opensips dot org>
	* [014263ece] :

	dialog: fix dialog_table param
	(cherry picked from commit b81be8ec8c43b426b3432fa6aa023128a926c053)


2018-07-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6432eaae2] :

	Fixed accepting (again) the comma char inside URI.
	Fixes #1385
	This issue was introduced with commit the a7e724a commit, starting 2.4
	(cherry picked from commit 1e74986285035e29b49017a38d95cbdf8c57b485)


2018-07-05  Razvan Crainea  <razvan at opensips dot org>
	* [ae0195f18] :

	db_mysql: doc: clarifying max_db_queries meaning
	(cherry picked from commit 75be0c227d57fe5c96b0819ca993e6e906e3ffb2)


2018-07-04  Vlad Patrascu  <vladp at opensips dot org>
	* [dc6082a76] :

	AVL map: handle oom error when duplicating key in map_get()
	(cherry picked from commit 85de3a9f716b6b9150a98214f3673100c07ed82f)


2018-06-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a2717b3e8] :

	Fixed typo in documentation.
	Reported by Alexey Kazantsev
	(cherry picked from commit 48f82e2bfd04a0bec5c6690dad34c43c199c8fdf)


2018-06-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aa7df4f3e] :

	Fix bogus data access.
	Access data after the NULL test and after the lock is taken.
	Reported by Nick Altmann (@nikbyte)
	(cherry picked from commit 2300e4504f1d9282fed98de8bebd1bc1750306c1)


2018-06-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e85d8b480] :

	Fixed wrong return without locl release.
	Reported by Nick Altmann (@nikbyte)
	Closes #1409
	(cherry picked from commit 9cc75c0ac3155f5d5c55643123e906f347e93e41)


2018-06-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [45b98ddc1] :

	Fixed error message for rmrule cmd
	(cherry picked from commit 2ee9ba5d6f2e587d74766f0c7feab0a68e3e5e13)


2018-06-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [58ec09e1f] :

	Fixed wrong example
	The correct cmd is "rmrule", nu "rmgrule".
	Started from a report by @willyrgf
	Closes #1412
	(cherry picked from commit 76e90cf571a1155753a04edeb36dbfec1cf65345)


2018-06-28  Fabian Gast  <fabian.gast at nfon dot com>
	* [4bab15cf1] :

	switch / case skips the "default" statement during fall-through
	fixes #1371
	(cherry picked from commit 0d57cdcf1f33778587898b1f646e494202a61b32)


2018-06-21  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [c7551f25a] :

	Merge pull request #1394 from lemenkov/improve_docs
	Improve docs
	(cherry picked from commit 7a6e93f0a77d8b1ef907603ba60bd07e4e46759b)


2018-06-19  Callum Guy  <callum.guy at x-on.co dot uk>
	* [4ffab4636] :

	revised timeout value information
	(cherry picked from commit b73991a90737f54eee1ac0c65c31014ca43c4667)


2018-06-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4a6033259] :

	Fixed missing locking when checking gws
	Closes #1373.
	(cherry picked from commit 2f7dd83206b6b26c2588bfd44e663197a5cd2593)


2018-06-15  Liviu Chircu  <liviu at opensips dot org>
	* [e8363de52] :

	module stats: Improve module name matching regex
	Reported by @cbsergiocf
	Fixes #1392
	(cherry picked from commit bbcfcb334262d5d5ba12828cfca313f01a3cce82)


2018-06-15  Liviu Chircu  <liviu at opensips dot org>
	* [39fac1664] :

	sngtc docs: Fix outdated links
	(cherry picked from commit 14ad190473b4082e3048c957222c7d04f37c5136)


2018-06-15  Liviu Chircu  <liviu at opensips dot org>
	* [ee3505736] :

	fraud_detection: Fix badly handled corner cases
	    * do not segfault on oom (get_stats() returns NULL)
	    * do not deadlock when failing to fetch the time
	    * do not segfault when failing to create a dialog
	    * do not return success on failed allocations + logic
	    * do not leak memory on oom failures
	(cherry picked from commit 375e9d4f0eba9ad2197ebf5da6c6e974bc7954ea)


2018-06-04  Razvan Crainea  <razvan at opensips dot org>
	* [b453038e2] :

	proto_*: check returned events from poll
	Inspired from ticket #1374
	(cherry picked from commit 52e54daa0ff989537d2381c905744b1b898387ad)


2018-06-04  Răzvan Crainea  <razvan at opensips dot org>
	* [cbb242922] :

	Merge pull request #1374 from Vonage/bugfix/tcp_send_poll_revents
	Fix bug which will cause processes to get stuck in tcp send loops.

	(cherry picked from commit a5633eab0c7c0d20698908dad83c781e403998ac)
	(cherry picked from commit 548df1b986d2d6bdee56529129245c1664b6dd82)


2018-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [f07dc2a65] :

	path: Fix buffer overflow with use_path_received + IPv6
	Introduced in commit b3bf15646a
	(cherry picked from commit 636a7420072b90c21bd3073b2c2bad6b375284ea)


2018-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [34751fecf] :

	path: Fix "use_path_received" in double-Path scenarios
	Due to the fact that run_rr_callbacks() returns the 2nd Route (Path)
	header field value when previously having done protocol switching (thus
	having inserted two Path headers), the "use_path_received" feature of
	the path module would not work -- it wouldn't set the $du at all.

	The reason for this is that add_path_received() appends its ";received="
	to inside Path #1 (the outbound path of the registration / the inbound
	path of future requests) when doing double-Path recording.

	This patch simply moves the ";received=" append operation performed by
	add_path_received() into Path #2 (inbound path of registration /
	outbound path of future requests), and adapts other code that needs it
	(e.g. save("location", "p1v")) to properly be able to fetch it.

	Reported by @futsystems

	Fixes #1358

	(cherry picked from commit 71c7d75f66c8f0dc4ce411fd97d2dc867b39ce8d)
	(cherry picked from commit 109f7dace65d8e0c87c9a025e8f434768fd52b5f)


2018-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [eed7a5019] :

	path: Add escaping logic for add_path_received()
	Simply dumping a SIP URI as a ";received=" Path header field parameter
	value is problematic and leads to two kinds of issues:

	a. invalid SIP URIs, where the ";transport=" is specified twice:

	Path: <sip:127.0.0.1:5061;transport=tcp;lr; ...
	       ... received=sip:127.0.0.1:51959;transport=tcp>

	b. in double Path scenarios (e.g. when switching protocols from, say,
	TCP -> UDP), since the ";received=" is inserted as the
	inbound Path header field value, this can lead to a strange
	"protocol conversion" effect:

	Path: <sip:127.0.0.1:5061;r2=on;lr ...
	       ... ;received=sip:127.0.0.1:42917;transport=tcp>
	Path: <sip:127.0.0.1:5061;transport=tcp;r2=on;lr>

	^ notice how the inbound Path intended to advertise an UDP URI, but the
	add_path_received() managed to "convert" it into a TCP URI because of
	its inability to escape its token. nathelper is an easy first victim of
	this conversion, as it will attempt to send pings using the incorrect
	transport after reading the topmost Path (Route) header.

	This patch adds escaping/unescaping logic for the ";received=" feature
	of add_path_received() along with any code that makes use of this
	feature. Example resulting URI for the above example:

	Path: <sip:127.0.0.1:5061;r2=on;lr ...
	       ... ;received=sip:127.0.0.1:42917%3dtransport%3btcp>

	(cherry picked from commit b3bf15646affe981d4b266381d59f210e6e882fd)
	(cherry picked from commit 6e0ec1f7bae4b5a5076fce445d28ba1cbf790feb)

=========================== Release 2.2.7 ==============================

2018-05-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0d4823fef] :

	[siptrace] use bitwise and instead of logical end
	(cherry picked from commit 0e8baf4a602af76d30ea5084529f660aaf298fc3)


2018-05-24  Razvan Crainea  <razvan at opensips dot org>
	* [798e9edf4] :

	Bump version to 2.2.7


2018-05-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e125b4080] :

	Fixed URI comparing when usernames are empty
	(cherry picked from commit a69c8541b08eb171f24eca55444e777a3b527509)


2018-05-21  Vlad Patrascu  <vladp at opensips dot org>
	* [ef6da267a] :

	mi_xmlrpc_ng: fix system memory leaks when parsing xml
	Closes #1359
	(cherry picked from commit 06a1b186c9d8eba35e3f7bbff83f41325c60ac24)


2018-05-21  Răzvan Crainea  <razvancrainea at users.noreply.github dot com>
	* [c26cab4c6] :

	Merge pull request #1366 from ryan-esty/2.3
	added rtcp-mux-require

	Close #1364
	(cherry picked from commit c9a7552ce3c9f0dfd9b80c242a03ce27a744cfe5)


2018-05-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eabb4a872] :

	Fixed wrong DB result free in case of error.
	(cherry picked from commit bcad20098f92587ef465e3c634bd362ae3908522)


2018-05-07  Liviu Chircu  <liviu at opensips dot org>
	* [6a07d588f] :

	acc: Fix "ms_duration" computation
	Reported by John Quick

	(cherry picked from commit f2c86ed3fa19d256c1a2c5ae5b246871ccc8b312)
	(cherry picked from commit 88b3cb65e746d2402b69d5bd41651f418c968db7)


2018-05-02  Liviu Chircu  <liviu at opensips dot org>
	* [053f1feed] :

	registrar: Fix expires handling on 200 OK save()
	Silently use the default_expires, similarly to the behavior during a
	standard save() on a REGISTER, without throwing warnings.

	Credits to Norman Brandinger for providing the patch.
	(cherry picked from commit bbfdbaf9d69ef39160459b6f5f81e5a2e9344cdc)


2018-04-30  Liviu Chircu  <liviu at opensips dot org>
	* [91a82aff7] :

	core: Fix $branch(flags) manipulation
	It now accepts and prints a space-separated list of branch flags.

	Fixes #1341
	(cherry picked from commit e2fd262f368928c8d71ec386c724de7025d6191a)


2018-04-26  Razvan Crainea  <razvan at opensips dot org>
	* [3dcebdb42] :

	dlg: suppress info for updating contact
	(cherry picked from commit 07ea9b686ec72d7155a2207f398a43e67026ea74)


2018-04-26  Razvan Crainea  <razvan at opensips dot org>
	* [4af577a03] :

	dialog: update contact on re-INVITEs and UPDATEs
	Closes ticket #964

	(cherry picked from commit 125a1dc5327cf1ae9d056c64f679abf03c7a6890)
	(cherry picked from commit 461b8f82007c0b8320c88c998764587a7b35a987)


2018-04-26  Razvan Crainea  <razvan at opensips dot org>
	* [d19a2611d] :

	dialog: remove debugging CRIT message
	(cherry picked from commit ecb29ab2db8d95e291467c0fcd932167fbdf8bc6)


2018-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [345fbbbd7] :

	Fixed proper handling of IPv6 net masks
	Reported by Pasan Meemaduma.
	Fixes #1336
	(cherry picked from commit 86d3b84de04cd072a0d1eb2ecf34bcb8d121d2d0)


2018-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [03e24c2e5] :

	Fixed wrong triggering of post script callbacks.
	If the async() statement translates into a sync/inline operation as triggered from a non request route, do not trigger the post script callbacks.
	Fix for #1312
	(cherry picked from commit 7a821af654b11c51a171a7454b99ebf757becdbd)


2018-04-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a11ef084a] :

	Fixed cloning of parsed_uri and parsed_uri_ok.
	Translate the parsed_uri pointers after setting the new new_uri buffer. Also take care and properly update the parsed_uri_ok flag.

	Reported by @ankurgupta001 - many thanks for the testing.
	Credits also to Razvan Crainea (@razvancrainea) for troubleshooting.
	Closes #1300
	(cherry picked from commit 4a78508bbfc4c4f888399d8bf47b8c0a658ef9c3)


2018-04-20  Razvan Crainea  <razvan at opensips dot org>
	* [8df79b68d] :

	ratelimit: fix count dec and reset for SBT algo
	also fix counter var for SBT algo
	(cherry picked from commit a5ee8aa1df49a1c7703959396ab12cdca34b5291)


2018-04-19  Razvan Crainea  <razvan at opensips dot org>
	* [5d229f5bf] :

	rtpengine: prevent from reversing tags on DELETE
	When a delete is used on a reply route, do not reverse the tags,
	otherwise rtpengine will not match the proper session. More details on
	github, ticket #1339.
	(cherry picked from commit 818a74c9924f754bee0cd1d976c955ce7fe17e95)


2018-04-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [45a3a83d7] :

	Fixed missing include.
	Reported by Nick Altmann


2018-04-19  Liviu Chircu  <liviu at opensips dot org>
	* [42609bcdf] :

	fraud_detection: Complete commit 904e66b8
	Reported by Denis

	(cherry picked from commit 581ca5c8c188d349525cd718560669849bacde15)
	(cherry picked from commit 7c26ec86cd6641cef8e26a2e43f58f005aee5cbf)


2018-04-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [46531052c] :

	updated README file


2018-04-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [32e14f9ba] :

	Fix function get_local_contact() to add transport
	to have consistency over b2b and presence module, fix the get_local_contact() to also add the transport indication in the URI it builds. This will simplify the code in presence (as we do not have to add the transport param later, from several parts of the code) and also fixes the b2b code where the transport was not added at all in the URIs.

	Credits go to @arttemk for identifing the problem and suggesting the fix.
	Fix for  #1275

	(cherry picked from commit eb50b9b1516599316752ad5a4d037d10f625bc60)
	(cherry picked from commit fe542451142930d695b6b9cac447b4e04dbd4b16)


2018-04-19  Liviu Chircu  <liviu at opensips dot org>
	* [cd6497505] :

	ctl tools: Fix errors in verbose mode
	(cherry picked from commit a1332cbbd061adc3c0f56de2f08e0b13fbf40adb)


2018-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [f439585a4] :

	dialog: always check if create dialog was called on initial INVITE
	(cherry picked from commit 2a2027a6e99ae20d6b3580950cfe39b81d46f087)


2018-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [16f086011] :

	rtpengine: prevent SDP from being rewritten


2018-04-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [88607dbe1] :

	Fix branch cancelation after a t_reply()
	Be sure and call which_cancel() only when cancel_uac() is also called, otherwise the cancelling markers may prevent further canceling acttions on the transaction
	Credits go to Stepan Pologov @sisoftrg
	Fix for #1337
	(cherry picked from commit d8ef9f1264f33469340b5961aaf8a76310f5e258)


2018-04-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c22f6ab32] :

	Fix CRIT logs back to DBG.
	(cherry picked from commit ee7db82ae39eb13fa3675dd05112731af36dfbfc)
	(cherry picked from commit dd8fc985ac0c52a3b01055d2b82e6f51ce847b82)


2018-04-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c01855467] :

	Fix dialog unref for local BYEs.
	Instead of unref-ing the dialog when a final reply is received for the local BYE, better wait until the BYE transaction is destroyed. IF not, we will end up with a dangling dailog pointer in the BYE transaction.
	Fix for #1330 where a local BYE retransmission in combination with TH ends up acessing the dangling dialog pointer.
	Many thanks to Nick Altmann for the support in investigating this issue.

	(cherry picked from commit ec52613da12d43299edf0dab26ae80e5d2153854)
	(cherry picked from commit 2d02ffba4890457ee2f3e0a49b59bea2c7872c7f)


2018-04-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [439990c22] :

	Fix bogus delete on undefined AVPs.
	Reported by John Quick.
	(cherry picked from commit 5df9679c09ea8a247baac9e9ffdaff8e238feb4a)


2018-04-12  Vlad Paiu  <vladpaiu at opensips dot org>
	* [164f0732d] :

	Also flush carrier id AVPs when initiating a new routing
	Fixed cases where do_routing() followed by route_to_carrier() would report the wrong carrier id
	(cherry picked from commit 7844aaba9400e6480d341c18ac41dcc17b403070)


2018-04-12  Liviu Chircu  <liviu at opensips dot org>
	* [b2d71e1e8] :

	OpenSIPS ViM syntax: Allow "." in pvar names
	Reported by John Quick
	(cherry picked from commit 7f1407baa80dd8383deb8fe11d52dbcb3631f354)


2018-04-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6d576b650] :

	Fix is_ip_registered() to use IP-wise matching.
	Instead of doing string comp, better convert to ip_addr both IPs and do the comp as ip_addrs. This fixes the comp for IPv6, as IPv6 does not have a unique string representation.
	(cherry picked from commit dc6fa00e6c7d25f296d25b727c1074a5abefdf5d)


2018-04-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b37a70ba7] :

	README updated


2018-04-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [28d584b9c] :

	Updated description of the mask_col.
	Reported by Pasan Meemaduma
	Part of #1336
	(cherry picked from commit d4f83db42e10ffd6b4ebe74f61507fa0e135aa39)


2018-04-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1ffebe92e] :

	updated description of make field (according to ipv6)
	(cherry picked from commit 4c8b3488d3b37f71470f9b5e81eeb1723e837441)


2018-04-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4aa150e34] :

	Fixed checking IP addr against host/name
	Instead of coverting an IP addr to string and to string matching, it is more sane to try to covert the host/name to IP addr (anyhow in 99% it will be an IP as it is taken from VIA hdr). The old string matching fails for IPv6 as the string representation of an IPv6 is not unique (like for IPv4) - you may have compact format for IPv6.

	Reported by Pasan Meemaduma
	(cherry picked from commit a69f6de764cefab7cb7179b2f439780e74082461)


2018-04-05  Liviu Chircu  <liviu at opensips dot org>
	* [0f8cd9fad] :

	fraud_detection: Fix a couple of limitations
	    * reset the "sequential calls" stats similarly to the other ones
	    * add a new modparam ("use_local_time")

	Reported by Denis via mailing list.

	(cherry picked from commit 904e66b83488f5153133bb2068c4802754ab2aba)
	(cherry picked from commit 35b3681a513ba72f26dacda5aadc8fe64d035ada)


2018-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3f952c25d] :

	Force case insensitive matching via fnmatch
	remove_hf(,'g') uses fnmatch with FNM_CASEFOLD if available (as it is a GNU extension)
	Closes #1333
	Reported by Nick Altmann
	(cherry picked from commit 19a869148c98a1d7b13bac7e19a23a3e8d37fe3f)


2018-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a0a155326] :

	Fix previous backport
	(cherry picked from commit cad377ed6aee8d878bcd8e674e84fcfea6096f25)


2018-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [37b486a3c] :

	Fix IPv6 support for check[_source]_address functions
	Try to parse the string IP as both IPv4 and IPv6.
	Closes #1334
	(cherry picked from commit bb6b210294bba23ee22b9961fa5c8e764001d48c)


2018-04-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ecef11381] :

	Fix output of bm_poll_results using mi_json.
	Missing ARRAY flag in a node with a list on nodes without names.
	Reported by Nick Altmann
	Fixes #1332
	(cherry picked from commit 0070cbb130d525708f4c50d0ba6fbaa31209e655)


2018-04-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [060f3f037] :

	Fix multiple int2str coversion in function parameters
	While evaluating the parameters of the module funtions (which can be up to 6) some of them can internally use pvar evaluation with conversion from int to str.
	Shortly, multiple int2str may be before in a row. To avoid data overlapping, the int2str uses now a set of 7 rotating buffers (instead of a single one).
	(cherry picked from commit 304d1554914302363915aa06db91bcffff27d07c)


2018-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bcefec3b7] :

	Fix typo in command name
	This is the correct fix for  #1305
	(cherry picked from commit 5740fff644f82c5115d0f831e579c62178436eb9)


2018-03-30  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [2b83c6455] :

	Merge pull request #1322 from nikbyte/master
	Allow ds_select_dst and ds_select_domain in branch route
	(cherry picked from commit 2168cfa3614a9c3c6c377c47e35c33342e96da25)


2018-03-22  Dan Pascu  <dan at ag-projects dot com>
	* [dc87f8326] :

	Fixed building release dependent debian packages on debian unstable/sid


2018-03-22  Dan Pascu  <dan at ag-projects dot com>
	* [c91a740d7] :

	Strip PATH from opensipsdbctl too for debian package


2018-03-22  Dan Pascu  <dan at ag-projects dot com>
	* [ed60db7a4] :

	Fixed typo in debian rules


2018-03-22  Dan Pascu  <dan at ag-projects dot com>
	* [3543353d5] :

	rtpengine: Fixed compilation when PKG_MALLOC is not defined


2018-03-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [216373825] :

	Removed bogus debug log
	(cherry picked from commit 5cd8e0eceb7c76e649d0558968a6f97396265ede)


2018-03-06  Razvan Crainea  <razvan at opensips dot org>
	* [6a921f19d] :

	ratelimit: fix documentation
	Properly document which routes the functions are allowed to run into.
	(cherry picked from commit 06aa1ed8c2575029adb031fc3ceae31aaa4c0a27)


2018-03-06  Razvan Crainea  <razvan at opensips dot org>
	* [25a0dc14d] :

	httpd: make buffer a quarter of the pkg memory
	Exactly as it is described in the documentation.
	(cherry picked from commit 0c0679bd22943aef3f59591daffab4e8e24fba74)


2018-03-06  Razvan Crainea  <razvan at opensips dot org>
	* [3379a23c1] :

	topo_hiding: do not delete shm lumps from add_rm list
	These lumps can point somewhere in the middle of a shm lumps chunk, thus
	will result in a memory corruption error.

	Many thanks to Jonathan Hulme for providing testing environment!
	(cherry picked from commit 28254a2aa55520f1381862c3c5744699231aeab7)


2018-03-06  Razvan Crainea  <razvan at opensips dot org>
	* [52384fbc6] :

	dialog: fix previous commit warning
	(cherry picked from commit ff86066ea02fc4f90d445df89d0654e0cef777be)


2018-03-06  Razvan Crainea  <razvan at opensips dot org>
	* [e23d77fdb] :

	dialog: fix reinvite pinging
	make sure that pinging is properly engaged

	Credits go to Jonathan Hulme
	Closes #1082
	(cherry picked from commit 552bd4e7a7770e8e23768b35cc00226bc4863cbe)


2018-03-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [988341567] :

	Removed wrong error message.
	If the counter does not exist, simply print NULL, do not throw an error
	(cherry picked from commit aa61326000c940dbc172d317b4c558536753f143)


2018-03-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b955d6751] :

	Fixed DB URL escaping.
	The ability to escape/encode DB URLs using %xy became a must with the auto generated user and passwords in the cloud envs.
	(cherry picked from commit 5b0bc1e30ebfc1e67f4967c3e66cfa7577ee5b58)


2018-03-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6f1d51d38] :

	Fix extra 1 byte being copied after removing param.
	I have no clue why that "+1" was there :-|. Makes no sense.
	Reported by Ben Newlin <Ben.Newlin@genesys.com>
	(cherry picked from commit f1ec655b053962edb5afe9a57ecd9cf81dc52f6d)


2018-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [f4ee1c761] :

	F_MALLOC: Fix "last free" line reports when debugging
	If -DBG_MALLOC is in use, double free operations would report the
	"first free" to actually be the malloc operation, which is incorrect.
	(cherry picked from commit 234cf3967c7f6adf138a5b873e5f6d7040eba4df)


2018-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [d10a6e782] :

	F_MALLOC: Improve double free error reporting
	(cherry picked from commit 9e9221802d51abe6fcb5bfadc51cbd75cbbf3658)


2018-03-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [98fb6fb6a] :

	Remove some heavy log (instroduced with the prev commit).
	(cherry picked from commit ef89e181ff7cb8274b12d0a34aff74e0ae5a3a4a)


2018-03-01  Vlad Patrascu  <vladp at opensips dot org>
	* [9f3464a68] :

	sql_cacher: fix supported column types to include blob
	(cherry picked from commit 1378b51bc9111233b5ed95d490235aae435127a3)


2018-02-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e68044a78] :

	Extend the test for re-using pre-compiled regexp.
	A failure in compiling a regexp may lead to an inconsistent state, where the buffer is correctly populated, but the regexp pointer is NULL -> on next usage, the code will attempt to directly used (as the regexp buffer matches) the NULL pointer and crash.
	Reported by Ben Newlin <Ben.Newlin@genesys.com>
	(cherry picked from commit b77c1823ead3b61875e9f0dae1d57c9a6455135b)


2018-02-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b9641f69d] :

	Fix dangerous \0 adding outside the str buffer.
	It is bogus to write a 0 outside the str buffer as (1) the buffer may be in data zone (so read-only) or (2) it may be in shm memory and an overflow may corrupt the memory manager
	Reported by Ben Newlin <Ben.Newlin@genesys.com>

	(cherry picked from commit 93cc348717f91ad3c31775b99e0d1863ffce84ae)
	(cherry picked from commit ab8488b7090d32c47b49d916efe271e599ea69b4)


2018-02-27  Razvan Crainea  <razvan at opensips dot org>
	* [1cc8c6129] :

	net: only start TCP workers if there are listeners
	Credits goes to Xaled for reporting this on mailing list
	(cherry picked from commit bdeb8ff131d23e38cbac68a65ce2f48dfe8c572d)


2018-02-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [69230e445] :

	Fix displaying the usrloc domains.
	Dropped the "records" parameters as there is no way to count in advance how many records we may have in a dynamic shared hash table.
	Renamed "table" attribute into "hash_size" as this what it display :P

	Related to #1265
	(cherry picked from commit c9e7db08eab37f50814e57519de3ffd57fc20e8d)


2018-02-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9494087a2] :

	Update the help messge.
	'-D' is not "do not fork" anymore, but enbles the "debug mode"
	Reported in #1295
	(cherry picked from commit e472e528685d09f065bf0712838878ad1a1d5c72)


2018-02-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [71356c2b3] :

	Added docs for the probing_verbose module parameter.
	Reported via #1280

	(cherry picked from commit ffa51f822516c813d3580b4c10f13debfe3ddc52)
	(cherry picked from commit 734bb9a03e1f24830259a306e77ccf3da8878c14)


2018-02-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a54435633] :

	Added doc node about usage across differen top routes.
	Related to #1277 report
	(cherry picked from commit fefc33f107882f45b23b77013e8a9d3a21531da0)


2018-02-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [996aaf643] :

	Fixed return code in del_uri_param() function.
	Avoid returning 0 if the param is not found, as 0 terminates the whole script execution.
	Reported by Ben Newlin <Ben.Newlin@genesys.com>
	(cherry picked from commit 6bd6d7128f4412fec2c038f9aa65f3005d4cc688)


2018-02-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [878d96bed] :

	Remove any capability constraints because of the used MODE.
	As we are not aware of the relation (if any) between the real DB URLs from the set, it is not correct to restrict DB capabilities based on the used MODE. Like if it is Round Robin, do not do UPDATE ever. Maybe the URLs point to the nodes of the same cluster.
	(cherry picked from commit 305a570f7dc48a8bb4ffd60f33b0df3438fd0246)


2018-02-21  Razvan Crainea  <razvan at opensips dot org>
	* [5531b1d37] :

	Revert "rtpengine: allow specifying 15 length options"
	This reverts commit d9625d5dc8bbf3a288ce79b36b96afb69ffb3fb4.


2018-02-21  Razvan Crainea  <razvan at opensips dot org>
	* [d9625d5dc] :

	rtpengine: allow specifying 15 length options
	(cherry picked from commit baf4af90f249258bb8355630ca8b0c0ac46f6fd1)


2018-02-16  Liviu Chircu  <liviu at opensips dot org>
	* [81196e176] :

	F_MALLOC: Recover from double pointer free
	This patch makes F_MALLOC more robust in production by avoiding memory
	corruption in case of double free operations. Previously, the hash state
	would immediately get corrupted on such operations, and it would only be
	a matter of time before the allocator would crash in some random place
	with a useless backtrace resembling:

	\#0  0x0000000000507209 in fm_remove_free (qm=0x7f7d578d2010, size=56) at
	mem/f_malloc.c:200
	200          *pf=n->u.nxt_free;

	When DBG_MALLOC is defined, F_MALLOC will now abort() on a double free,
	similar to QM_MALLOC.

	(cherry picked from commit 2254d0011535d37d8aa05387d4d967d074d7b9d5)
	(cherry picked from commit cabb4c0824662a2261f4aa4e577ead6cc789e4c6)


2018-02-15  Liviu Chircu  <liviu at opensips dot org>
	* [fea96eb07] :

	rest_client: Fix a string handling bug in append_hf()
	Issue reported by Pasan Meemaduma
	(cherry picked from commit 888d5e9b3f99423288a20065a2b90d28a9bb030e)


2018-02-14  Dan Pascu  <dan at ag-projects dot com>
	* [e4738b9d7] :

	permissions: Handle integer columns of different sizes in tables/views


2018-02-13  Razvan Crainea  <razvan at opensips dot org>
	* [af686b991] :

	fix passing NULL values for route param
	(cherry picked from commit 25d6396eac8bd0bc96eab5d983c0d40f217cea72)


2018-02-07  Razvan Crainea  <razvan at opensips dot org>
	* [0f780de66] :

	ratelimit: create pipe in a generic manner
	Fix pipe init by merging the pipe create in a single, common function.

	(cherry picked from commit d6933ad99ccfa20edbd375155a4b8e06b4e495a5)
	(cherry picked from commit 4b29ec62eff1af6e4a2222d40bfa5cee8c43a64f)


2018-02-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [926efd43d] :

	rtpproxy: revert commit ee2731212303eb7055b3bd165464fe44fae05e7b  - add comments to better explain logic behind code
	(cherry picked from commit ebbe49c50ce045a41b390198e3ee731450aaf600)


2018-02-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [6a312d48c] :

	nathelper: revert commit a45d4dcaf046bb273cfe5905ac035845a6867945  - add comments to better explain logic behind code
	(cherry picked from commit 1e36fa1afafb90fcffcd88fdecc5c74e24ceb990)


2018-02-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [dc258b09d] :

	nathelper: manual backport for 3c39167e333a8801772f49f8561a015bfa1836f1  - fix test condition for updateing IP for fix_nated_sdp()
	(cherry picked from commit a45d4dcaf046bb273cfe5905ac035845a6867945)


2018-02-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [fda88d51d] :

	rtpproxy: fix test condition for altering IP in SDP while forcing RTP
	(cherry picked from commit 55e9479b32c2d01a12a3278afb75b0fa520605c4)


2018-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bfec5afe2] :

	Fix reverse_hex2int64() prototype
	As the computed value is an unsigned (as data size), it cannot be returned as int as it will overflow and get converted to a negative value. This will colide with the negative error ret code -1
	(cherry picked from commit ed12eb97c06a23491c8b831124600361b0b63f2f)


2018-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1004b73bb] :

	Explicit reset of conn ID on error
	if reverse_hex2int fails, be sure the conn id stays 0.
	(cherry picked from commit a61fa8646e6f865b347b3e725c6362dc15d4e57b)


2018-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c584715b5] :

	Fix reverse_hex2int() prototype
	As the computed value is an unsigned (as data size), it cannot be returned as int as it will overflow and get converted to a negative value. This will colide with the negative error ret code -1
	Reported by Daniel Zanutti.
	(cherry picked from commit 095dc57300b9665b090e999a540db8b391f8d22e)


2018-02-02  Vlad Patrascu  <vladp at opensips dot org>
	* [2a3c1c8b2] :

	event_flatstore: return proper error message for evi_flat_rotate
	(cherry picked from commit 47aa5f7a464f6c70e803f10e17eb8d841a5dffd3)


2018-02-02  Vlad Patrascu  <vladp at opensips dot org>
	* [0c4786a2b] :

	event_flatstore: fix some locking issues
	(cherry picked from commit e340e70cfaf0762e81b94b896144cb636398022e)


2018-02-02  Vlad Patrascu  <vladp at opensips dot org>
	* [3442c57e6] :

	event_flatstore: fix possible crash when subscribing
	(cherry picked from commit c4d113a927890bc09b00e5263f44329c4d71099a)


2018-02-01  Razvan Crainea  <razvan at opensips dot org>
	* [e90b75a19] :

	cfg: fix error reporting for unenclosed scriptvars
	(cherry picked from commit adfc62b55cc2ada7ccac78bdaeab3bbdd47e5abf)


2018-02-01  Razvan Crainea  <razvan at opensips dot org>
	* [d16689a29] :

	ratelimit: replicate the current counter for SBT
	(cherry picked from commit 08bc17915bc113ee045f8a6d37257450a199c753)


2018-01-31  Razvan Crainea  <razvan at opensips dot org>
	* [1802e9cbe] :

	pvar: fix $hdr() to allow variable headers
	(cherry picked from commit b7862ccdd5290ebd8d41e2f5b0aadc6e93f1e8dd)


2018-01-31  Razvan Crainea  <razvan at opensips dot org>
	* [654a7a3f9] :

	tls_mgm: fix doc for client_domain_avp


2018-01-30  Razvan Crainea  <razvan at opensips dot org>
	* [7a99d7e96] :

	dialog: fix README to reflect actual event params
	(cherry picked from commit 6243d57bab3918b2714cdfd1ff509a89fa324f5a)


2018-01-17  Razvan Crainea  <razvan at opensips dot org>
	* [24507b1ce] :

	Bump version to 2.2.6

=========================== Release 2.2.6 ==============================

2018-01-17  Razvan Crainea  <razvan at opensips dot org>
	* [211671cb5] :

	rtpengine: handle POLLHUP while draining
	Thanks go to Pete Kelly for reporting this
	(cherry picked from commit 151c1cf0e7b0b600a7ce2ec2807738aec214b607)


2018-01-16  Razvan Crainea  <razvan at opensips dot org>
	* [7202f18ef] :

	compression: fix memory leak due to whitelists
	Thanks go to Nick Altmann for reporting this
	Closes #1252
	(cherry picked from commit d33253b6bdf4561f2a978fc093992d72a87773fb)


2018-01-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [56571b2e0] :

	Fix RURI len calculation after removing param.
	Reported by Denis Lemire
	(cherry picked from commit 50735b93508d77b4e44223450f60ae43082b14bb)


2018-01-16  Razvan Crainea  <razvan at opensips dot org>
	* [001936624] :

	net_tcp: remove fd from reactor before cleaning up
	(cherry picked from commit 8c5651be24edfc3aef8478089fb7c6495638b5a9)


2018-01-11  Razvan Crainea  <razvan at opensips dot org>
	* [f1f9a9298] :

	protos/tcp: respect async operations order
	In case there is a write request, before actually writing the data on
	the network, check if there are any async chunks left, and make sure
	they are sent before any other write happens. This is necessary to make
	sure the order of the packets is respected, otherwise we might end up
	with fragments of other packets in the stream.

	Thanks go to Vlad Patrascu for reporting and testing this.
	(cherry picked from commit 5773e65b9058643191544763e0f5ff26f5a7fb3b)


2018-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c7cd7e1e4] :

	Fix TO parsing when there is a comma inside a quoted display/value
	This bug was introduced during the re-factoring of the TO parser to support multple body parts - see 908b9f190bff3b356f76ce8ca75d43a2c149a412

	Reported by Tito Cumpen <tito@xsvoce.com>
	(cherry picked from commit 769fb3c5913c9d7e583c4cdbdf26aae82cdaa205)


2018-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1da701a56] :

	Fixed parameter passing for dr_is_gw().
	If partitions are not used, do a logic shift for the parameters with one position to the left to compensate the missing partition param.

	Reported by Jonathan Hunter <hunterj91@hotmail.com>

	(cherry picked from commit 963f05169c18abd9b2ccdf26170e08628a54becb)
	(cherry picked from commit d448ab6e3599dd188a0edd1cef591a7ef604fa06)


2018-01-09  Razvan Crainea  <razvan at opensips dot org>
	* [3a2ea8d6a] :

	pike: enforce remove latency to at least sampling_time_unit + 1
	This prevents UNBLOCK events from being lost.
	(cherry picked from commit cf190a95515def67333aeab2ab5b74629ed74d22)


2018-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [57065cadf] :

	Fixed expantion of shm_info() for HP_MALLOC
	Reported by Nick Altmann
	Closes #1240
	(cherry picked from commit cec2d66b72a1c65cd3c7fa0276211aa8566cc268)


2018-01-05  Liviu Chircu  <liviu at opensips dot org>
	* [6954ffdbd] :

	menuconfig: Fix a PREFIX handling bug
	This patch fixes a bug where menuconfig corrupts the Makefile.conf
	PREFIX variable value by incorrectly trimming the last char in an
	attempt to ensure that the value has a trailing '/' char. This would
	happen each time the user launches menuconfig and chooses
	"Exit & Save All Changes".

	Reported by @Jeffrey2019 on GitHub.
	Fixes #1248.
	(cherry picked from commit aab1ec7e0dcefdef173e327cd35a857895ad3a75)


2018-01-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [496bcb5e7] :

	Improve docs on db_url setting
	(cherry picked from commit f7216003b5d19a80fbf115987c9b4f8b4f43bc5e)


2018-01-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [39974122e] :

	Fixed handling of TTL 0 in DNS answers.
	RFC1035 states : "Zero TTL values are interpreted to mean that the RR can only be used for the transaction in progress, and should not be cached."

	Reported by Marcin Luczkiewicz @ Magrathea Telecom
	(cherry picked from commit b4d74ebd5fee055065e2e400f10c97a8bad3d9dd)


2017-12-22  Razvan Crainea  <razvan at opensips dot org>
	* [d07bfb78d] :

	dispatcher: restore URI headers check from prev. commit
	(cherry picked from commit 6b2ad1fe3f37ccb5aa0b7fc4da6676278baacedb)


2017-12-22  Razvan Crainea  <razvan at opensips dot org>
	* [1583965bd] :

	dispatcher: fix TCP and TLS destinations
	Before this commit, the structures used internally to store the
	destinations URI were not storing the URI parameters - since these were
	dropped, URIs that contain TCP or TLS transport would be involuntary
	converted to UDP.
	This fix also stores the provisioned parameters in the dst_uri.

	Closes #1227
	(cherry picked from commit 575a1b15936bdc306e00ca01c8534567201d13a9)


2017-12-21  Razvan Crainea  <razvan at opensips dot org>
	* [5dc400017] :

	dialog: don't mark new dialogs as deleted
	(cherry picked from commit e845b37a598d6315b68c4063528b8c72496ce23c)


2017-12-21  Liviu Chircu  <liviu at opensips dot org>
	* [a0193d0b3] :

	cache_counter_fetch(): Fix bogus error handling
	(looks like a copy-paste bug)
	(cherry picked from commit 9a19ff96a2c7db4c544c20065c1c90bb2a5e8aae)


2017-12-21  Liviu Chircu  <liviu at opensips dot org>
	* [9af49a7a9] :

	cachedb core: Fix a minor mem leak
	(cherry picked from commit 1f3a0a3358d13cdfab9e844790ac58711be6ef99)


2017-12-21  Liviu Chircu  <liviu at opensips dot org>
	* [0af523068] :

	db: Fix a minor mem leak
	(cherry picked from commit 8b6884e98e8b4cbabcd3218f8b7a73864a07fc95)


2017-12-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4933c4224] :

	Fixed error message.
	Properly report the hdr name (PAI or PPI) when hdr fields validation fails
	(cherry picked from commit 30d47e65835bacc766ae05257ef50df2e9420468)


2017-12-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [230c45fe5] :

	Fix validation for PAI, PPI and Diversion headers
	These headers must be parsed as multu-field headers
	Also for PAI and PPI we apply extra checks as per RFC3325.

	Close #1134
	Close #1228
	(cherry picked from commit 69ef92cd9f74020da5398eab0f81668bb8e12281)


2017-12-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6ef5ed61b] :

	Fix hdr parsing to accept multi-value bodies.
	The parser for Diversion, PAI and PPI use now the parse_multi_to() in order to handle multi name-addr/addr-spec hdr bodies.
	(cherry picked from commit 908b9f190bff3b356f76ce8ca75d43a2c149a412)


2017-12-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5f5d1a160] :

	Refactor generic parse_to() to accept multi-value headers.
	New function parse_multi_to() added to allow parsing of multi-value (comma separated) name-addr/addr-spec headers (like Diversion, PAI, PPI).
	Changes are backward compatible in regards to original parse_to() function.
	(cherry picked from commit a7e724a09c01c78a5f3c303d2966a55883eaffeb)


2017-12-19  Razvan Crainea  <razvan at opensips dot org>
	* [cbfef48c7] :

	deprecate epoll_et and use epoll_lt instead
	epoll_et needs draining the socket out of data, which behaves against
	our balancing mechanism.


2017-12-19  Razvan Crainea  <razvan at opensips dot org>
	* [326468e90] :

	ratelimit: improve expire_time parameter doc
	Kudos the Ecosmob team for reporting this!
	(cherry picked from commit 49805a1c0a6ca1a59de1d6b0298e3288bca9b45f)


2017-12-19  Razvan Crainea  <razvan at opensips dot org>
	* [09bef813a] :

	ratelimit: improve documentation on rl_check()
	Consider using rl_dec_count() for declined calls.

	Credits go to Ecosmob for reporting this.
	(cherry picked from commit 0124e7f28ad8fd04f9d8f7f3d555568c21fa3b28)


2017-12-19  Razvan Crainea  <razvan at opensips dot org>
	* [5a2666620] :

	ratelimit: fix slot_period documentation
	slot_period should be expressed in milliseconds, not milliseconds

	Kudos to the Ecosmob team for reporting this!
	(cherry picked from commit f932cc4c02d34bcc725ee0a3659343bdee0afd5e)


2017-12-15  rvlad-patrascu  <vladp at opensips dot org>
	* [3e287215f] :

	sql_cacher: complete mem leak fix from previous commit
	(cherry picked from commit 5923267fb67200562bcae1662878d3024106613e)


2017-12-15  rvlad-patrascu  <vladp at opensips dot org>
	* [7ec85193e] :

	sql_cacher: fix memory leaks when loading from SQL on demand
	(cherry picked from commit 5179bc2f97b65236dddfe59cc9c6795e4a1bde36)


2017-12-15  rvlad-patrascu  <vladp at opensips dot org>
	* [21be99194] :

	sql_cacher: fix possible crash when loading from SQL on demand
	Elements from the list of queries in progress are now properly removed.
	(cherry picked from commit 6aef8347bbfaf5bec21455abc0baa4024faf55d6)


2017-12-13  Razvan Crainea  <razvan at opensips dot org>
	* [e9ddcc5a7] :

	dialog: fix error typo
	(cherry picked from commit 49bb70dd1a018efe04e9640778bb295f8ad2665c)


2017-12-13  Razvan Crainea  <razvan at opensips dot org>
	* [715cd66b9] :

	clang: fix blacklist bitwise check warnings
	(cherry picked from commit e37be3ab2f8c985c2e59323f8dfcc22153695e51)


2017-12-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a968d16a2] :

	Fix ambuguity in cache DB URL parser.
	Do not accept URLs like schema:group//.. ; Correct format is schema:group://.. or schema://..
	(cherry picked from commit 87025cc925f5eadc87c9ee757326d6b5b9f5df87)


2017-12-07  Razvan Crainea  <razvan at opensips dot org>
	* [377df6af7] :

	ip.resolve: null terminate queried string
	Thanks go to Nick Altman for reporting this!
	(cherry picked from commit f0fcf326ccd240b9b3de7d8e9f83aa82e8e12662)


2017-12-06  Razvan Crainea  <razvan at opensips dot org>
	* [0271920ab] :

	add interface name only if specified
	(cherry picked from commit 27de1916851ffc7d4208b5db119c0036170b1f56)


2017-12-06  Razvan Crainea  <razvan at opensips dot org>
	* [07feb8111] :

	add support for '*' keyword for listeners
	Using this feature you can specify opensips it should listen for a
	specific protocol on all interfaces. The syntax is:
	```
	listen = udp:*:5060
	```
	(cherry picked from commit 4b39b578d430d49301a7d3fcf2f13d1bcc52a962)


2017-11-27  Razvan Crainea  <razvan at opensips dot org>
	* [591651133] :

	debian: let debuild figure out mysql dependencies
	Reported by Nick Altmann


2017-11-23  Razvan Crainea  <razvan at opensips dot org>
	* [561c4aad0] :

	increase required libssl library version
	Thanks a lot Nick Altmann for your help in debugging this!


2017-11-23  Razvan Crainea  <razvan at opensips dot org>
	* [0c499cd9c] :

	debian: prioritize libssl1.0-dev over libssl-dev


2017-11-22  Razvan Crainea  <razvan at opensips dot org>
	* [7a97f23b4] :

	packaging/debian: fix support for stretch


2017-11-22  Razvan Crainea  <razvan at opensips dot org>
	* [32c6e6e78] :

	packaging: sync debian and redhat_fedora service files
	Thanks to Nick Altman's suggestions
	(cherry picked from commit ef82312cbef3ba944df546eaee25b49659df899a)


2017-11-22  Razvan Crainea  <razvan at opensips dot org>
	* [2ae490715] :

	debian: add m4 support in systemctl
	(cherry picked from commit f562251d91a8a57e662db513e2d393a1f9de2884)


2017-11-22  Razvan Crainea  <razvan at opensips dot org>
	* [eebe5056f] :

	debian: add lsb-release dependency
	Suggested by Nick Altmann to fix stretch and xenial build errros
	(cherry picked from commit 069a8f6d187b8b714da40783554d02db31d8319e)


2017-11-22  Razvan Crainea  <razvan at opensips dot org>
	* [b0cef9060] :

	move all debian files in a single directory
	(cherry picked from commit d4fdc854fc337e6749b2c17ad376b4b8827a2651)
	(cherry picked from commit 1ab7d29b0450e14bcf4d16b7ba3f3308e928fda6)


2017-11-21  Razvan Crainea  <razvan at opensips dot org>
	* [e8b43c095] :

	Merge branch 'lemenkov-mariadb_unnecessary_include'
	(cherry picked from commit 63042c9221e596556233f7fc1b174cc30f6cfb8b)


2017-11-21  Razvan Crainea  <razvan at opensips dot org>
	* [a81664a0a] :

	couchbase: fix multiple hosts usage
	Closes #1216
	(cherry picked from commit c23ad230af545e2ed9a153a0f4a4e5c3998f16f3)


2017-11-16  Liviu Chircu  <liviu at opensips dot org>
	* [0fcf5710b] :

	usrloc: Fix bad logical condition
	Reported by Răzvan Crainea.
	(cherry picked from commit a644f1b370d61e60b2f4de20c9728564d8d8a06d)


2017-11-16  Liviu Chircu  <liviu at opensips dot org>
	* [77df0c04a] :

	usrloc: Fix locking for contact_id-based deletion
	The delete_ucontact_from_id(), get_ucontact_from_id() pair of functions
	were masking possible code execution paths which would lead to unsafe memory
	access. This, in turn, would cause the ping_checker_timer() job of nathelper to
	occasionally crash and burn.

	Reported by solo@astercc.org.
	(cherry picked from commit 18a93c89aa1c32498689a6f6dd09911272c18896)


2017-11-09  Razvan Crainea  <razvan at opensips dot org>
	* [10849522c] :

	rtpengine: do not use replace bson for delete
	Prevent the module for using replace-* attributes for any other
	operation than offer or answer. This allows you to use the
	rtpengine_manage() function easier.

	Reported by Edwin Hoff
	(cherry picked from commit d67fbb9809427cc4087563bbbebf556420f1f330)


2017-11-09  Razvan Crainea  <razvan at opensips dot org>
	* [3bc8378d0] :

	db_sqlite: let the DB interface determine the capabilities
	This prevens the module from advertising bogus capabilities - in this
	case the sqlite module was saying that it has the ASYNC RAW queries
	support, although it didn't.

	Reported by Wilhelm Lundgren on list
	(cherry picked from commit b9ca13a643e4c21aeba1fa9d88c57a054a290f64)


2017-10-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4d0cc205d] :

	Fix creating the profiles list in the dlg_list_ctx MI command
	The profiles are not array, but list as they have different names for the nodes.Reported by Vladimir Dubov (@vovad)
	Closes #1166
	(cherry picked from commit 60d161d447ccf082aa1be7fbb2261c5548dcd3bf)


2017-10-24  Razvan Crainea  <razvan at opensips dot org>
	* [4910a0618] :

	db_virtual: fix previous commit
	(cherry picked from commit f53a74f5a6d572d69fa7439a3762ca6c3faba751)


2017-10-24  Razvan Crainea  <razvan at opensips dot org>
	* [8eba36ea9] :

	db_virtual: provide DELETE capabilities for ROUND mode
	(cherry picked from commit 4c7cbb7e06183b318393977f993b0ff31508cd4c)


2017-10-24  Razvan Crainea  <razvan at opensips dot org>
	* [f68aa52e0] :

	db: do not compute capabilities
	Do not compute capabilities for modules that pre-populate them. This
	fixes an issue where the db engine was overwriting the db capabilities
	of db_virtual.

	Thanks go to Jonathan Hulme for reporting and providing testing
	environment
	(cherry picked from commit 0527560978028de80a51343714429e5a3d923919)


2017-10-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3632786ef] :

	Fix init of the cachedb related module params
	Init val_prefix, noval_prefix and size_prefix before general cachedb init.
	Credits go to @Tinet-AaronAn
	Closes #1203
	(cherry picked from commit ec8d6a982a93d96fec8683426d2107bda67de66f)


2017-10-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fc24275f7] :

	Improved explanation on the "port" parameter.
	The port parameter sets the default port for the protocol, affecting both listeners and sending URIs.
	(cherry picked from commit e67a055fc8c3481dd6189d3d412f69dac1a20842)


2017-10-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [621a6103e] :

	Fix escaping URI parameters - skip alphanumerical chars.
	Reported by Ben Newlin on "user" mailing list.
	(cherry picked from commit b5094f0dc6a4f52555f9cca1ea9df7c846749482)


2017-10-16  rvlad-patrascu  <vladp at opensips dot org>
	* [29d764d52] :

	dialog: also share module flags when replicating dialogs
	(cherry picked from commit ad35e7cedc44efd90c58f26a853585ece5883bac)

	Conflicts:
		modules/dialog/dlg_replication.c


2017-10-16  rvlad-patrascu  <vladp at opensips dot org>
	* [b18a61ef3] :

	dialog: fix a runtime bug with DLGCB_LOADED callbacks
	Relying on the fact that all modules that register dialog callbacks are initialised
	after the dialog module (thanks to module dependencies), we can run all DLGCB_LOADED
	callbacks at registration time and also keep them in a list for calling them later
	(i.e reloading from database via MI cmd or receiving replicated dialog).

	This fixes a series of bugs where the DLGCB_LOADED callback is not run during, e.g.
	"dlg_db_sync" MI command or received replicated dialogs which do not have their
	callbacks installed or run.
	(cherry picked from commit 8c8f27f6091289061f6aaf0d3c85ccd27db80a0d)


2017-10-13  Liviu Chircu  <liviu at opensips dot org>
	* [caf912d64] :

	drouting docs: Clarify behavior for the gateway "type" parameter
	(cherry picked from commit 9cf184ec74731bf6a4709ebdfacd09b0bc171365)


2017-10-12  rvlad-patrascu  <vladp at opensips dot org>
	* [df0772f66] :

	acc: fix possbile memory leak when calling do_accounting() on CANCEL while "report_cancels" modparam not set
	(cherry picked from commit aa32bf1b6909c8471eea8c2170a3a2a3f94be1cf)

	Conflicts:
		modules/acc/acc_logic.c


2017-09-25  Răzvan Crainea  <razvan at opensips dot org>
	* [2a2684bba] :

	Merge pull request #1195 from etamme/master
	check if trace id node exists before de-reference (fix segfault)
	(cherry picked from commit 675164c747e4f538dfa34fcdfb46b9adbf3567e4)


2017-09-21  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [82062c17c] :

	Merge pull request #1168 from sippy/master_freebsd_fix
	Fix some minor build issues on FreeBSD
	(cherry picked from commit bf1c6de3c7ec7aae74df3fe6f5a753f5cf2488ee)


2017-09-21  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [03138917f] :

	Merge pull request #1191 from etamme/master
	fix memory leak in cpl-c write_to_db
	(cherry picked from commit 2a64a1455d63fdabf9d9130811d2932e245afd1e)


2017-09-15  Razvan Crainea  <razvan at opensips dot org>
	* [24ffc204a] :

	siptrace: allow capturing on any port
	reported by Eric Tamme from OnSIP
	(cherry picked from commit b7f9ca3316f4d6c740fc62599a55bae97026efbd)


2017-09-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [21df6c823] :

	Fix bogus error message (probabaly copy paste error)
	Credits for the fix go to Michael Mavroudis.
	(cherry picked from commit 9e497ea4ab03c67cb073bdf0dccef2b16bff80e2)


2017-09-13  Razvan Crainea  <razvan at opensips dot org>
	* [6798532da] :

	proto_wss: release lock even if write fails
	Detected and fixed by Eric Tamme from OnSIP
	(cherry picked from commit 99af2fc44f0b8216bdbe7320d41adb208144ada0)


2017-09-13  Razvan Crainea  <razvan at opensips dot org>
	* [cdcd9f19d] :

	proto_wss: write all TLS chunks under a single lock
	Reported by Eric Tamme from OnSIP
	(cherry picked from commit e113e147c71b2fa4f84bed3621b91d1ed1de38f6)


2017-09-12  Razvan Crainea  <razvan at opensips dot org>
	* [b73baa828] :

	parse_fline: fix implicit cast sign
	(cherry picked from commit b0eb928e7241e9c8c2fcfff3e3bb3704fbfddae6)


2017-08-31  rvlad-patrascu  <vladp at opensips dot org>
	* [59c0fba17] :

	siptrace: fix type for message DB column value, str instead of blob
	(cherry picked from commit 36f43169e238a53f7c077832f4d968ca8be38b4f)

	Conflicts:
		modules/siptrace/siptrace.c


2017-08-31  Razvan Crainea  <razvan at opensips dot org>
	* [3292cd930] :

	ratelimit: fix buffer overflow when using SBT algorithm
	Make sure the window doesn't overflow
	Fixes #1176
	(cherry picked from commit d8854637e9329e7d6a52b87aa5cc4601450011c3)


2017-08-29  Razvan Crainea  <razvan at opensips dot org>
	* [e3f4d0fc8] :

	dialog: do not allow callbacks in state DELETED
	If these callbacks would have been registered, they will be never ran,
	but the free function will still be called. This breaks some modules
	(such as acc), which rely the function will be called.
	(cherry picked from commit 83669d2caec38823ce79ccd12eec4ed013e2d867)


2017-08-16  Razvan Crainea  <razvan at opensips dot org>
	* [64407f8a9] :

	event_xmlrpc: rebuild buffer for each event
	This prenvets crashes when multiple xmlrpc subscribers are used
	(cherry picked from commit 1885c0d4679f4b7b62b00512aa9b23de8880bff4)


2017-07-27  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [23a905773] :

	Merge pull request #1164 from caringi/master
	db_mysql: fix build against MariaDB 10.2
	(cherry picked from commit 77e678a6a18822cf8ceb30732494cf492a5a1407)


2017-07-26  Liviu Chircu  <liviu at opensips dot org>
	* [d770b95dd] :

	rest_client: Update documentation
	Reported by Tito Cumpen
	(cherry picked from commit f302175382620848a22c6bcec237dfee270e0de6)

	Ignore rest_put()-related hunks.


2017-07-25  Razvan Crainea  <razvan at opensips dot org>
	* [441b48c57] :

	ratelimit: fix documentation typo
	(cherry picked from commit 91da5063ddb56d31dbe6be6013434ea9083a7013)


2017-07-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [acb11c9f5] :

	Fixed wrong TLS parameters.
	TLS configuration parameters were moved from proto_tls to tls_mgm module.
	Credits to Mike Tesliuk for reporting this.
	(cherry picked from commit f0e36896be10c69581ebf77def209df084c82d13)


2017-07-24  Razvan Crainea  <razvan at opensips dot org>
	* [d6b1412eb] :

	b2b_entities: fix b2b key memory leak
	(cherry picked from commit 8ba6567f2d81d9a912a6ab9dd0d23d265c77ba41)


2017-07-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fa52af691] :

	Fix replicating NULL socket in contact
	A contact added by ul_add MI contact has a NULL contact, so take care on this during contact replication. Also, when receiving a replicated contact with NULL socket, do not discard it, but simply set NULL socket.

	Reported by Samusenko Andrej on user mailing list
	(cherry picked from commit d1d897ebc1f7cdd0c817952c28d5c5877b51f304)


2017-07-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5a4550b23] :

	Fix incorrect bug log.
	A missing tracing context in the SL_reply_out callback is perfectly valid - if you send from script a reply (se_send_reply) without doing any sip_trace() before.


2017-07-13  Liviu Chircu  <liviu at opensips dot org>
	* [8d7f4a00f] :

	opensips.vim: Update syntax


2017-07-13  Razvan Crainea  <razvan at opensips dot org>
	* [b93fc35ab] :

	drouting: fix parameters specifications for gw detection functions
	(cherry picked from commit 991b3ef4fabb4a21dd0f95ea18a5e934261be01c)


2017-07-12  Razvan Crainea  <razvan at opensips dot org>
	* [695fc03eb] :

	acc: restore new_uri in case an error occurs on reply
	(cherry picked from commit e2f9d8fc73a8414fc80430abd4ba5975cb1bfe89)


2017-07-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [dad353ac2] :

	Fix milliseconds (for call duration) consistency across ACC backends.
	Each backend was evaluating the END time by itself, leading to discrepencies in the reported milliseconds between different backends (when multiple backends were used for CDR reporting).
	The fix consists in having a single END time value shared to all ACC backends.


2017-07-05  Razvan Crainea  <razvan at opensips dot org>
	* [4e226933c] :

	Update ChangeLog for 2.2.5


=========================== Release 2.2.5 ==============================

2017-07-05  Razvan Crainea  <razvan at opensips dot org>
	* [caf4cb779] :

	Bump version to 2.2.5


2017-07-05  Razvan Crainea  <razvan at opensips dot org>
	* [3a164717e] :

	acc: specify that *extra_bye should be populated before matching dialog


2017-07-05  Liviu Chircu  <liviu at opensips dot org>
	* [d41274279] :

	dialog: Update FAQ regarding issue #938
	"The 2.2 dialog does not support simultaneous use of dialog and profile
	replication"


2017-07-05  Liviu Chircu  <liviu at opensips dot org>
	* [72a8a4259] :

	exec: Fix incorrect pclose() calls on standard I/O streams
	Many thanks to Walter Doekes for detailing this issue

	(also including some minor code improvements)
	(cherry picked from commit 96ba9ed03d2223f09b6fd25061d229c2c7ee5eb4)


2017-07-05  Razvan Crainea  <razvan at opensips dot org>
	* [54a575276] :

	acc: release memory allocated for loaded dialogs


2017-07-04  Liviu Chircu  <liviu at opensips dot org>
	* [8e65aa71b] :

	pua: Fix several locking & memory access bugs
	Several issues with publ_cback_func():
	    * 1 x extra lock release upon breaking "send publish" loop
	    * N x extra lock releases inside the loop, per each failed publish
	    * invalid memory access on "presentity" ptr after send_publish_int()
	(cherry picked from commit 9957ff2d9acc4a2686495b5e2ea43cdc3bb7e3ed)


2017-07-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9cf756c73] :

	Destroy the TCP conn even if the WS link has missing data.
	Perform full conn destroy (in the TCP network layer) even if the WS link doesn't have (very unlikely) the proto-specific data attached.
	(cherry picked from commit e08d54e6bc1a2550cd3ec6c7aec12f6a69b6377a)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [91c14ce67] :

	Remove bogus auto conversion from SIP uri to TEL uri
	For ancient reasons, a SIP URI with user=phone was automatically converted to a TEL URI. Such conversion, automatically done, is dangerous - there is nothing in the RFC3261 stating something like this. Even more, the conversion is not complete - besides moving the username parameters to URI parameters, the domain is not stripped and the TEL not added.
	(cherry picked from commit 05ece794083f8328cbd5259cdb7b3aead8d9f943)


2017-07-03  Liviu Chircu  <liviu at opensips dot org>
	* [eaafc9b77] :

	cfg parser: Fix underflow with an empty mpath
	(cherry picked from commit 9e07f3f3650607c3e0298182aa3bb08d377e8837)


2017-07-03  Liviu Chircu  <liviu at opensips dot org>
	* [8c35fc4e2] :

	Revert "Set proper UPDATED flag upon cloning."
	This reverts commit 7723cd3f6d08d95c3a1d56801e2f234f8e521c23.


2017-07-03  Liviu Chircu  <liviu at opensips dot org>
	* [09a7533ed] :

	TCP engine: Fix the TCP worker duplicate connection check
	(cherry picked from commit 8845fd7950ec90fad7498b323745c86cac4070f6)


2017-07-03  Liviu Chircu  <liviu at opensips dot org>
	* [ad06f0ffd] :

	TCP engine: Fix misleading logs
	(cherry picked from commit a7249f03d7a16221e21b8f57eb73540f0b8c4888)


2017-07-03  Razvan Crainea  <razvan at opensips dot org>
	* [2ae866fab] :

	net/tcp: do not reset conn proc_no as a writer
	when releasing a conn as a writer, do not reset the process owner of the
	conn, otherwise a reader will have to re-take it back.
	(cherry picked from commit d5fca4482ab1746351157ee0353474a24b084f60)


2017-07-03  Liviu Chircu  <liviu at opensips dot org>
	* [9ede5894a] :

	TCP engine: Fix a race condition related to con lifetime management
	Connections which received a read event concurrently with their
	expiration time could trigger an indefinitely long, CPU wasteful, rapid
	succession of back-forth passing of the connection object between TCP Main
	and a TCP worker process.

	The fix involves adding a TCP connection lifetime update in the TCP worker
	just after receiving the connection object from TCP Main (this is correct
	- there is some pending data, the connection is non-idle), before the
	expiration check is done.

	Thanks to Bogdan for helping with troubleshooting
	(cherry picked from commit 99181710c3f52b4ca97186623af0a7760191a276)


2017-07-03  Liviu Chircu  <liviu at opensips dot org>
	* [7d30b9c23] :

	TCP engine: Fix ref counting bug in async writes
	TCP writes done by TCP workers were subject to an extra
	dereferencing operation, potentially leading to memory corruption
	due to SHM overwriting on freed tcp_connection structs.

	This patch eliminates the extra dereferening operation, while also
	taking care not to break the code for non-TCP worker writers, which
	will now have their passed connections dereferenced by TCP main.
	(cherry picked from commit 04e2d6e5f46b98c481b2e810ea0aa73c7be36b40)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [36db1302d] :

	Set some default value for "already", to avoid bogus printing.
	Reported by Ovidiu Sas
	(cherry picked from commit e1497271f02966736de834c35bf5943d0fd9ef0b)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [24ea7e8db] :

	Downgrade severity and extra loging on epoll self healing
	(cherry picked from commit b60780c502ae3b7b9f54f2047da04cb95d915e5b)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d2c8ad75b] :

	Triggered fds with no fd_map are reported and removed from epoll
	If epoll triggers on a fd that has a cleared (removed) fd_map, remove it from epoll.
	(cherry picked from commit ade9c93d807abb97ababa0033589b46f70c040da)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [24de2216d] :

	Flag reset fixed; print flags as hexa
	(cherry picked from commit 34d98d82dc7cff162782b57af8e8f04e6719109c)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0121d8907] :

	Fix for prev+1 commit - fd=0 should be consider unset (as -1)
	(cherry picked from commit 0dfbad3861e6fb066db3a4aea4e78f17ab0b27f5)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8dd3d5a95] :

	Fix prev commit - data may be null for valid fd maps (like timer jobs)
	(cherry picked from commit b90094c46bb8dadc3f6f13be6c394c6b7208190e)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [172a15fe4] :

	Added extra code for sanity checks over reactor data
	(cherry picked from commit ab26d05599074e8ef4a5ba7f68e60c739be7cbfc)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b276dca39] :

	Added auto-healing for reactor.
	If the epoll() fires a fd with a removed fd_map, better do not trigger the handler and remove the fd from epoll and fd_array
	(cherry picked from commit 4929bcee6b69a809052d25f141a1849cd272a749)


2017-07-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7723cd3f6] :

	Set proper UPDATED flag upon cloning.
	IF the cloning is full (with the updatable part too), set the UPDATED flag too
	(cherry picked from commit 0f9e65fef33d2846eaf0d3f17a469c321796cee5)


2017-06-30  Razvan Crainea  <razvan at opensips dot org>
	* [c49243600] :

	clusterer: prevent crash when calling send_to after destroy


2017-06-30  Razvan Crainea  <razvan at opensips dot org>
	* [4ab78a7e6] :

	acc: fix substitutions typo
	(cherry picked from commit 8025792838edec6437f984556460efc206883c36)


2017-06-29  Liviu Chircu  <liviu at opensips dot org>
	* [f2d0e2084] :

	exec: Improve docs for "time_to_kill"
	Reported by Tito Cumpen
	(cherry picked from commit 5c407c64cb8d68fbdbefb8779be9810a4760d66e)


2017-06-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3893f836c] :

	Related to prev fix - dialog table has no PK
	(cherry picked from commit 805c0e2f3d4921e939edb142170278e7286934ee)


2017-06-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ed4a53126] :

	Fix granting permissions on the PK of location table.
	As the PK column has a custom name "contact_id", it needs special handling when granting permissions upon PSQL DB creation.
	(cherry picked from commit 0f36c9d0f7c31f30eaac6b16c11c71704022245b)


2017-06-23  Liviu Chircu  <liviu at opensips dot org>
	* [6bd0cf8c9] :

	Fix a bug in is_ws()
	Reported by Răzvan
	(cherry picked from commit 951f7e10d1d79276f075bc9fd3cc16245b4a07d5)


2017-06-22  rvlad-patrascu  <vladp at opensips dot org>
	* [9179e95d9] :

	tls_mgm: start even if there are invalid TLS domain definitions in DB


2017-06-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0bef0f469] :

	Fixed MI printing of tid (trace ID) URLs.
	Discard on-stack buffer and use formated printing for IP + port.
	Use MI_DUP_VALUE flag for adding the DB URL
	(cherry picked from commit 7249c95f94c63e195e4e680b8bd6e73efa1421fd)


2017-06-21  Liviu Chircu  <liviu at opensips dot org>
	* [c980b440c] :

	regex transformation: Fix a double free bug
	Supplying a bad regular expression to {re.subst} would lead to
	a double pkg_free().

	Credits to Nick Altmann for reporting / helping with troubleshooting
	(cherry picked from commit 00d44e8bb17b7391fa0c7a18137d880ba0dff4ee)


2017-06-19  rvlad-patrascu  <vladp at opensips dot org>
	* [12f5fa199] :

	clusterer: start even if unable to load provisioning info from DB(invalid data)


2017-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [911478b10] :

	Fix leak in use_next_gw()
	The leak occurs only when doing fallback between rules.


2017-06-15  Liviu Chircu  <liviu at opensips dot org>
	* [5d77718da] :

	Allow negative values for "memdump" and "memlog"
	They should behave just as "log_level" does.
	(cherry picked from commit eb5c3d4ba5ef5c3ff9f17c093ad76c1067cc87ac)


2017-06-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3c0df80d3] :

	Fix memory leak in do_routing()


2017-06-13  Liviu Chircu  <liviu at opensips dot org>
	* [d9d5ffe04] :

	Do not exit startup sequences with unusable HP_MALLOC params
	(cherry picked from commit df29102e9d6c06ef73f112898dd5feac171985cf)


2017-06-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fa28637cf] :

	Intercept ECONNRESET and  silently handle it as EOF


2017-06-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ca4294336] :

	Intercept ECONNRESET and silently handle it as EOF
	(cherry picked from commit 27a36a940fba6b40b44951fe75d35082c27cb00e)


2017-06-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [985bb087a] :

	Just code identation.
	(cherry picked from commit 69e3576d884234271cbb9142d471dbcfbb95a34d)


2017-06-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f0a578147] :

	Do not log EINTR and EAGAIN as errors during UDP write.
	(cherry picked from commit cf8caeb8ed35f221b06621f6123d8d4dbb878753)


2017-06-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0ca314423] :

	Intercept ECONNRESET and  silently handle it as EOF
	(cherry picked from commit a90723d896dfdddf2e7f7b52fac7d7348ec740c0)


2017-06-09  Liviu Chircu  <liviu at opensips dot org>
	* [af07e2387] :

	usrloc: Fix contact deletion bug with db_mode = 3 (DB_ONLY)
	Fixes #1136


2017-06-07  Razvan Crainea  <razvan at opensips dot org>
	* [4727e88bd] :

	ratelimit: clarify limits scope for timer_interval
	Reported by Max Mühlbronner on mailing list
	(cherry picked from commit 52b7ece216b55d5729340beaec50a90715fc51f7)


2017-05-31  Razvan Crainea  <razvan at opensips dot org>
	* [d62973b95] :

	dialog: don't flush in db unnecessary flag values
	(cherry picked from commit 9d0436eef00e65b1e0d660517228bdf9d5c9207c)


2017-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [281aef555] :

	Fixed examples in docs
	(cherry picked from commit ae1c1f32bd71a21c638c0903bcbaeab53d07ec78)

=========================== Release 2.2.4 ==============================

2017-05-18  Razvan Crainea  <razvan at opensips dot org>
	* [a45e376f9] :

	Bump version to 2.2.4


2017-05-17  Razvan Crainea  <razvan at opensips dot org>
	* [05e45cd24] :

	dialog: update documentation for triggered event
	Updated documentation for the event triggered when the state is changed
	(cherry picked from commit 494e048cddf70db858401745a530e219eeb2908e)


2017-05-17  Razvan Crainea  <razvan at opensips dot org>
	* [9fec57bd4] :

	rtpproxy: allow multiple servers on same machine
	Before this fix, rtpproxy was accepting a single connection from a
	specific IP. This prevented multiple rtpproxy servers on the same
	machine (or behind the same NAT) to send timeout notifications
	simultaneously.
	Using this fix each rtpproxy provisioned can have on connection to
	opensips.
	This commit also adds some extra debugging.

	Reported and debugged by Flavio Goncalves.
	Fix #865
	(cherry picked from commit 070e7d4710983abf76a3d16bdc67371c6c4941ce)


2017-05-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [591edd532] :

	[siptrace] allow only one variable or text for trace id function param
	(cherry picked from commit 191592838b85e1ec07ee6d154567c53edd9de0e9)


2017-05-12  Razvan Crainea  <razvan at opensips dot org>
	* [d31756bfe] :

	net: print destination when msg_send() fails
	(cherry picked from commit df23995f69b485d24b9162487ac4ea7d56a9870c)


2017-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [fb89fc0b6] :

	Proper fix for PostgreSQL login
	Submitted by @volga629
	(cherry picked from commit abd1e655f9816b44590d0f73dd309b30650b0b5e)


2017-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [1bc4247d8] :

	str2ip(): Do not reject IPs with leading '0' byte
	This is useful in some code areas (e.g. allowing 0.0.0.0/0 "catch-all"
	networks in the permissions module)
	(cherry picked from commit c75a7ddcd190997e84e6aa1d54da37993135dc1d)


2017-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [7d0d5f2ce] :

	dialog: Fix possible crash in "profile_get_values" MI command
	(cherry picked from commit 2d474f003bc5f8a3e00c303fb0bf91bc31b2eb1a)


2017-05-11  Razvan Crainea  <razvan at opensips dot org>
	* [30b3b0fa8] :

	fix $source_uri pvar when using IPv6
	This fix encloses the IPv6 address in square brackets in the resulted
	URI

	Reported by Ankur Gupta on mailing list
	(cherry picked from commit 9798924ba8b24d3829e9ef536ef8f1542056d34d)


2017-05-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0b3419f52] :

	Fix doc formating and improve some description
	(cherry picked from commit aa2f0f5f2bd304e3f4923aca358bdacc70065e15)


2017-04-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [074e10469] :

	[proto_hep] fix handling tcp requests coming in multiple chunks
		This commit fixes 2 bugs:
		1) fixes not reading second part of a single TCP request
	because of bad parsed pointer update;
		2) fixes major bug that was causing packets to be processed
	infinite times by hep callback when one message + some part of a
	second message came in a chunk and in the second chunk it was the
	second part of the second message; the tcp request structure was
	not updated(complete was not set to 0 after first message was
	processed) causing the second message to be processed an infinte amount
	of times into the database;
	(cherry picked from commit 6c51756205e96cb2c22d781256aa7484cdb3ffa5)


2017-04-26  rvlad-patrascu  <vladp at opensips dot org>
	* [d4d47daf4] :

	tls_mgm: fix some error/log prints when using only domain name
	Closes #946


2017-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d745c50c6] :

	[usrloc] remove unnecessary condition; minor naming fixes
	(cherry picked from commit f915a8088d1576211f5023c8e3924cd8451b5e62)


2017-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0e83202dc] :

	[usrloc] fix contact removal in DB_ONLY mode
	(cherry picked from commit b807576180ef4ae0e85176bab364703f4af5b419)


2017-04-25  Dan Pascu  <dan at ag-projects dot com>
	* [17484ac32] :

	Added support for RFC6598 private address range
	(cherry picked from commit b604bd9a977f7237a0eab7abe15616b7a1a6364b)


2017-04-24  Liviu Chircu  <liviu at opensips dot org>
	* [32f5fabd1] :

	tm: Assume ASYNC_DONE also when forcibly resuming async operations
	Fixes #1074
	(cherry picked from commit 8ea9082b85d97065b4c49932233d87f51bffd0f8)

	Conflicts:
		modules/tm/async.c


2017-04-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4f88a23f6] :

	[db datetime parsing] parse only date if date-time format parsing fails
	(cherry picked from commit 334c67a9fb93fefe724292bd883f30ba722b2aa3)


2017-04-24  Liviu Chircu  <liviu at opensips dot org>
	* [c64349791] :

	fraud_detection: Fix sequential_calls stat
	Fixes #888
	(cherry picked from commit 1eb3ff4ad9eeda17ad713400ec6142d210a07fdd)

	Conflicts:
		ut.h


2017-04-24  Razvan Crainea  <razvan at opensips dot org>
	* [a638bd574] :

	sql_cacher: fix bogus return check
	Fixes Coverity CID 167552
	(cherry picked from commit 809df8d5842a1bf098666058657149d54d6136ff)


2017-04-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d88c1abf9] :

	Adapt code for 2.2


2017-04-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2bd1adfaf] :

	Fix bug in GW pinging.
	Disable the destination if the ping sending fails. If we cannot ping it, for sure we will not be able to send call to it too.
	Closes #982
	(cherry picked from commit 478d3f33cce65996a627613345c77fe5373b717f)


2017-04-21  Liviu Chircu  <liviu at opensips dot org>
	* [5e5be4a9e] :

	opensipsctl: Fix PostgreSQL login
	Closes #1089
	(cherry picked from commit 00906dec7df55d9feb117af53e059943a229993b)


2017-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [f7cf28b4e] :

	sql_cacher: fix uninitialized return code in case of error
	(cherry picked from commit 38fd4a6335e31303a0075a3d202a89cc3c2e9e03)


2017-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [bc7a9dbb2] :

	topo_hiding: fix COND_FAILED insertion for after and before
	(cherry picked from commit 017c5e40d3bd5b8fd08cb2184f884ad9f668a268)


2017-04-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4e3ae9214] :

	Fixed t_check_trans() not to report end-2-end ACKs
	end-2-end ACKs are sequential requests (in dialog) forming a separate transaction than the INVITE; In terms of ACK matching, the t_check_trans() reports only hop-by-hop ACKs (to negative replies) which are part of the INVITE transaction.
	(cherry picked from commit dee4d12f8e99adbb6e46476eaeaf2b80130cb5a9)


2017-04-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [887bc4b36] :

	Fixed bogus returned code for sl_send_reply()
	If called for an ACK request, the sl_send_reply() func returns 0, terminated the script execution; Changed to return success (1).
	(cherry picked from commit 527017104058deb253ba5be6b32239483f834839)


2017-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [8089b0209] :

	dialog: update contact at the end of initial req processing
	This makes the fix_nated_contact() changes visible throughout the entire
	processing of the initial request.
	(cherry picked from commit df59d0dcf595c0fe4538b873ee0c113891a0e98e)


2017-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [fdff64124] :

	dialog: split contact and route_set buffers
	This allows changing each of the contact/route set individually
	(cherry picked from commit 3371f80cdbc6b6ac05e8c88756239a306a21d580)


2017-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [e5bf141ca] :

	topo hiding: replace contact lumps with NOP
	This prevents possible dangling pointers in the contact uri (changed by
	the fix_nated_contact() function). Instead of deleting the lumps that
	alter the contact, we replace them with a NOP and COND_FALSE.
	(cherry picked from commit 4bba4d800cdb76c64c6a3b66b0849a0ff1eb90a2)


2017-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [0f03976f2] :

	registrar: is_ip_registered() also checks contact host
	The is_ip_registered() function should match the IPs to the registered
	parameter, if it exists, or to the contact's host otherwise.

	Thanks go to Ovidiu Sas for reporting this.

	Close #1086
	(cherry picked from commit 7057e6765779eeb55155827d843c483c4c8e2a65)


2017-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [a667b46b4] :

	Improve memory allocation error reporting
	Reporting "bytes needed" may speed up troubleshooting broken code which
	attempts to allocate bogus amounts of memory.
	(cherry picked from commit ad71e0e9e3e7bae6d5f45091aeddbb674c04ab1c)


2017-04-19  Razvan Crainea  <razvan at opensips dot org>
	* [8981b7a4c] :

	debian: add wheezy files


2017-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [f99506c3a] :

	debian: stretch: remove proto_tls tls_mgm proto_wss and identity
	Debian stretch has only ssl 1.1.0, which is incompatible with our code
	for now


2017-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [7d37e01f7] :

	remove RADIUS for stretch since it is not supported


2017-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [2a8cbb4dd] :

	add packaging files for stretch


2017-04-14  Razvan Crainea  <razvan at opensips dot org>
	* [8a362b634] :

	timerfd: only linux supports timerfd
	(cherry picked from commit e9e0891f02a31d4037039c85059e12144a85381f)


2017-04-13  Razvan Crainea  <razvan at opensips dot org>
	* [07cf310d8] :

	tls_mgm: fix kerberos error log
	(cherry picked from commit b4ce514b0a22fb3d301126723cd455aa33e516dd)


2017-04-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [48afe505e] :

	Fix wrong BUG log, downgrading it to ERR
	Also improved the log messages by printing the proto name (not only its index)
	(cherry picked from commit b7b8717d87ff898fd68ed76f1e9b6ef63c8cb5a0)


2017-04-12  Razvan Crainea  <razvan at opensips dot org>
	* [69d705b71] :

	tm: update branch route only if it was specified in branch route
	(cherry picked from commit 77b37f5316623e0e55da4b798e6e0549100ff2f2)


2017-04-11  Liviu Chircu  <liviu at opensips dot org>
	* [33c414430] :

	HP_MALLOC: Do not abort on oom
	(cherry picked from commit 92ccfc3b32d28f6cc3af982515820fbc337d9073)


2017-04-10  Razvan Crainea  <razvan at opensips dot org>
	* [9bc50af7b] :

	trans: always indicate that WS is a TCP based connection
	This sorts out the issue where only WSS is used, but its clients are
	advertising transport=ws in URI's param, according to RFC 7118.
	(cherry picked from commit cc9a767fa5458b1bc1abbab557c7a0451e2cef35)


2017-04-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4b0ab2743] :

	Arm in-dilaog pinger _after_ ACK.
	By doing this we avoid any possible conflict (in terms of overlapping) with a delayed ACK.
	Reported by Schneur Rosenberg

	Fixes #1034
	(cherry picked from commit 8816636a41dc6f9439b159acba6c9acdf70a8205)


2017-04-05  Razvan Crainea  <razvan at opensips dot org>
	* [ef09a3f35] :

	Supress errors when gracefully timing out
	Thanks Chris Maciejewski for reporting and providing testing environment
	(cherry picked from commit d15472598499564161cb22283eb1a40cdabd7cb0)


2017-04-05  Razvan Crainea  <razvan at opensips dot org>
	* [c89d383fc] :

	net: add marker for tcp main


2017-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [875f9cabd] :

	Fix couple of debug logs.
	(cherry picked from commit 5475cd5b8a8edf82569411c464aee2d601d9e6ac)


2017-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [99aa81d04] :

	Fixed mixing of return code.
	Do not re-use the "ret" return code variable when comes to testing the running of the script route (per rule) - it may stay stay to 0 and stop the whole script execution.
	(cherry picked from commit 981209748cd07b876a29e0fb0e5b991ac39a99a7)


2017-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ab477d079] :

	Fixed upating SIP msg changes into transaction in failure route.
	Do auto transaction update only in request route, otherwise we may end up storing local changes (per-branch).


2017-04-05  Liviu Chircu  <liviu at opensips dot org>
	* [f3666f57a] :

	opensipsctl: Supress random "path not found" errors
	In case a binary is not found (e.g. gdb), opensipsctl will properly
	report this by default when its related command is called.
	(cherry picked from commit 5717839d265bd97d040634bb371ed1e7fecf33c5)


2017-04-04  Razvan Crainea  <razvan at opensips dot org>
	* [5de6cebe5] :

	dialog: make replication more robust
	* keep the dialog locked while building the replication buffer
	* mark replicated dialogs to prevent them from being created twice
	* fix replication statistics
	(cherry picked from commit f94c3137637f1e1f3113ae1500c876405877a616)


2017-04-04  Razvan Crainea  <razvan at opensips dot org>
	* [aefdc19c6] :

	net:tcp: make sure commands are sent through correct unix socket
	Also prevent trying to delete fd's from hash when they are not
	registered for reading/writing
	(cherry picked from commit 7bab7e35e7ff02f1844acfb523db8e6a7e6275cc)


2017-04-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1768ffb3d] :

	[sipcapture] free allocated structures from sip_msg if no script
	(cherry picked from commit da840cc7e0ff5f27372fcce0022987ef80560f46)


2017-04-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8dad4f030] :

	[proto_hep] fix memleak if script is passed
	(cherry picked from commit b8842cee29fa22f659fbb2e91b56c9a128d8fce4)


2017-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [50641b362] :

	Revert "net:tcp: remove unnecessary tcpmain_sock"
	This reverts commit 5dc5ffb14465e687772f4f843591dd9257a200f9.


2017-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [8e00b690a] :

	snmpstats: fix int to unsigned int warnings
	(cherry picked from commit 5e61f3b910d78d2e9087801214545965febb4d6a)


2017-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4023a5d79] :

	Fix async() statement - run it as sync if not in request route
	(cherry picked from commit fb1240ce53baa67e8bd0945210feb8d24e1251a3)


2017-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a603e2a13] :

	Switched Async to ON by default (as per docs)
	(cherry picked from commit bd1bc7860207a8eb6a2d861501066a2dcc80a0cf)


2017-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [5dc5ffb14] :

	net:tcp: remove unnecessary tcpmain_sock
	The tcpmain_sock has been completely repurposed and can no longer be
	used to send data back to TCP main - only unix_tcp_sock may be used.
	(cherry picked from commit cf8229a178c885b81b12040b66a48d651ef90031)


2017-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9cffcaa50] :

	Avoid chown on PID and PGID files in debug mode
	In debug mode, these files are not created in debug mode (as daemonize() is not triggered), so any chown() will simply fail on it.
	(cherry picked from commit 15a0ea716e5274f09ef01fa8cdce8029b7e14a30)


2017-03-30  Liviu Chircu  <liviu at opensips dot org>
	* [59cf57244] :

	core "net:" statistics: Fix an integer signedness bug
	Due to runaway usage of bitwise shifting, the byte matching code would fail to
	work for interfaces having low order bytes with greater values than 128
	(e.g. udp:31.32.33.147:5060). Consequently, all "net:" statistics for them
	would show up as zeroes.

	Thanks to Bogdan and Răzvan for discovering and troubleshooting
	(cherry picked from commit 009691c6c7672927f68cfb8a0340166167a04107)


2017-03-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [db9f2b947] :

	Remove obsolete parameter from loadbalancer menuconfig script
	(cherry picked from commit 959099898a6b1194efe0c643b7afac6f6723ba18)


2017-03-28  Razvan Crainea  <razvan at opensips dot org>
	* [cf8c2beb1] :

	sql_cacher: prevent free for uninitialized variables
	(cherry picked from commit 1b2549d53b429321bec01a3cdc2174b9837b2124)


2017-03-28  Razvan Crainea  <razvan at opensips dot org>
	* [8026f7cdc] :

	sql_cacher: prevent deadloc in case of error
	(cherry picked from commit e1e7471f7c41a27e27548980708a6f4490ff8a53)


2017-03-28  Razvan Crainea  <razvan at opensips dot org>
	* [084b8e25b] :

	sql_cacher: fix memleak when key is not found
	(cherry picked from commit 1257adf351c04ee8924d56b0699079ca429a5fed)


2017-03-28  Liviu Chircu  <liviu at opensips dot org>
	* [119723ead] :

	sql_cacher: Fix pkg memory leaks
	(cherry picked from commit e72fc5f354dd4416a375916352c6014a9f883b6d)


2017-03-27  Razvan Crainea  <razvan at opensips dot org>
	* [99beee231] :

	fix transformations for input larger than 1024 bytes
	(cherry picked from commit 8e9eb3efb2734714d5303e92cf03fccaee3b88e9)


2017-03-27  Razvan Crainea  <razvan at opensips dot org>
	* [1450e4dd9] :

	mod_fix: optimize formats when only a pvar is used
	This currently breaks this modules which are mistakenly using gparam:
	exec, siptrace
	(cherry picked from commit daafbc82da7ff6bfe54b1ffe6958a49c853d1bd2)


2017-03-27  Vlad Paiu  <vladpaiu at opensips dot org>
	* [457a6e096] :

	Complete prev commit
	(cherry picked from commit 7750cc0e60a9a274d40ae656540f51ec74a28486)


2017-03-27  Vlad Paiu  <vladpaiu at opensips dot org>
	* [00cd9b904] :

	Also DUPlicate the reload time, or else all partitions will share the last reload time
	(cherry picked from commit 24fd070fb0569c9ef34b80edcf928a59e331bb38)


2017-03-24  Razvan Crainea  <razvan at opensips dot org>
	* [1e00568fb] :

	dialog: update cseq under lock
	Close #1008
	(cherry picked from commit 596fb1f3d4b227185556a992dbd9945fed206f5e)


2017-03-23  Razvan Crainea  <razvan at opensips dot org>
	* [a43641bda] :

	tls: fix typo in documentation
	(cherry picked from commit 2522b484f678b7e8dc62aff1ae3fb54d4fdc02b8)


2017-03-23  Liviu Chircu  <liviu at opensips dot org>
	* [4ef488536] :

	rest_client: Fix header list management with async requests
	The list of additional headers must not be freed too early, as libcurl
	may still make use of it during each async resume callback.

	Credits for reporting and helping with troubleshooting and testing
	go to Agalya Ramachandran.

	Fixes #1072
	(cherry picked from commit 29363ca88cf58f0a5690c9f42ba992ff52a06c81)

	Conflicts:
		modules/rest_client/rest_methods.c


2017-03-23  Razvan Crainea  <razvan at opensips dot org>
	* [c9ec3ae20] :

	sipcapture: remove unnecessary check for unsigned < 0
	Fixes coverity CID 150487
	(cherry picked from commit fc6111cd6c3ffc48c0c4d96b7534903b271a6973)


2017-03-22  Ovidiu Sas  <osas at voipembedded dot com>
	* [bd88c155d] :

	db_mysql: fix warning: passing argument 3 of ‘mysql_options’ from incompatible pointer type
	(cherry picked from commit 394980129c79d465a71d0c50e0544e28dd004552)


2017-03-22  Razvan Crainea  <razvan at opensips dot org>
	* [6f0310be9] :

	mathops: fill in entire structure
	(cherry picked from commit dc9e068d12ef9be9c0a7384be3f419a0ba25c4e9)


2017-03-22  Ovidiu Sas  <osas at voipembedded dot com>
	* [5a6203de6] :

	sql_cacher: fix compiler warning may be used uninitialized in this function
	(cherry picked from commit dd70215a3224025a8926f462d12f735e873bb557)


2017-03-22  Ovidiu Sas  <osas at voipembedded dot com>
	* [c632f95c7] :

	registrar: fix compiler warning may be used uninitialized in this function


2017-03-22  Ovidiu Sas  <osas at voipembedded dot com>
	* [24f30d2e4] :

	drouting: fix compiler warning may be used uninitialized in this function
	(cherry picked from commit 37a3510966c9c640eff855d40b0c77dee78cd906)


2017-03-22  Ovidiu Sas  <osas at voipembedded dot com>
	* [d3b74aefc] :

	dialog: fix compiler warning may be used uninitialized in this function
	(cherry picked from commit 0ccbe7765b4544d9d1e5402dd9ce94e35bac1a29)


2017-03-22  Răzvan Crainea  <razvan at opensips dot org>
	* [7759d5557] :

	consider global advertised address when choosing a listener
	When searching for 2nd RR (the inbound one) also look into the globally
	declared advertised address
	(cherry picked from commit 9491782ab150be5d61b592e16d64121ecaab2420)


2017-03-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7922417f9] :

	Fix computing clabel on DB reload.
	This bug may lead into duplicated CID for contact records


2017-03-22  Razvan Crainea  <razvan at opensips dot org>
	* [0c0d94f5a] :

	topo_hiding: remove TOPOH_DID_IN_USER for 2.2 branch


2017-03-22  Razvan Crainea  <razvan at opensips dot org>
	* [2ec94de46] :

	topology_hiding: document callid not changed without dialog
	(cherry picked from commit 4c25fc7cb4fd3fbb62f5005678bf9edd2eafe547)


2017-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [71e547dba] :

	removed dead code
	Reported by Liviu Chircu
	(cherry picked from commit aec22a3f12f93e12ff2dadf49e3d0acf7fac6779)


2017-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [528ffd6c1] :

	Fix str comparison in IP matching
	Closes #1077
	(cherry picked from commit ec8842e673bcd1c64be586a4d6f2323f4b778aa1)


2017-03-20  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9725db15b] :

	[siptrace] fix canceled transactions not traced
	(cherry picked from commit a514837)


2017-03-17  Razvan Crainea  <razvan at opensips dot org>
	* [186f3d230] :

	nathelper: fix transport for WSS
	(cherry picked from commit 52e081e8b9a6788d12817e1698b1414a95f531ad)


2017-03-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f4fb8e49d] :

	DB schema regenerated


2017-03-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [523311382] :

	Correct NULL constraints for "presentity" table
	Columns 'body', 'extra_hdrs' and 'sender' can be NULL and by default are NULL

	Closes #1017
	Closes #1004
	(cherry picked from commit 90df4003324f02943ac1797a4f57bce83333fc7d)


2017-03-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [819974db3] :

	Fix deadlock between INT and TERM signal handling
	This is valid only for debug_mode, in combination with the memory dumping.
	(cherry picked from commit a594409440b3a533f2d3ad725ef37157e5e19e66)


2017-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [ae6ce220d] :

	drouting: fix gw whitelist pkg mem leak
	Thanks go to John Nash for reporting this
	(cherry picked from commit db49bb5bb516601ff213db7096d3abc281d07df4)


2017-03-09  Liviu Chircu  <liviu at opensips dot org>
	* [fcd918248] :

	cachedb_mongodb: Improve reconnect handling
	Avoid exiting the retry loop with a NULL cursor after several failed
	reconnects
	(cherry picked from commit f4dd4027ea71ce0dd0a3ff53af4bf7befda3d3ee)


2017-03-08  Nick Altmann  <nick.altmann at gmail dot com>
	* [865126fa5] :

	RPM spec: disable aaa_radius for fedora > 23 because radiusclient-ng-devel is not available


2017-03-08  Nick Altmann  <nick.altmann at gmail dot com>
	* [9eb77f520] :

	RPM spec: improve conditions


2017-03-07  Nick Altmann  <nick.altmann at gmail dot com>
	* [74800db8c] :

	RPM spec: exclude build cachedb_redis for el6 because hiredis_devel package was removed from epel


2017-03-03  Razvan Crainea  <razvan at opensips dot org>
	* [c9e516ccf] :

	ws: fix client key generation
	(cherry picked from commit 44d0dcec210785a5a1f214374fc239e5c5fb1bdb)


2017-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [39089c3fb] :

	rest_client: Improve some whitespace trimming logic
	(Eliminates any likelihood of a crash)
	(cherry picked from commit 19656995a54028df9a2ae0c21e77461116ea6d1c)

	Conflicts:
		modules/rest_client/rest_methods.c


2017-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [e2d4825b1] :

	rest_client: Fix a PKG memory leak
	The blocking GET / POST / PUT functions would leak PKG memory whenever the
	"Content-Type" function parameter was omitted.

	Thanks for reporting and troubleshooting to Jim DeVito
	(cherry picked from commit 854713857a7fbfc1d0ee9234cd7d85dbb98158dd)

	Conflicts:
		modules/rest_client/rest_methods.c


2017-03-01  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9c0e3a1af] :

	[db_virtual] fix or flag propagation from db_virtual to other db backends
		Nested connections under db_virtual were not receiving the
	flags existing in the mother connection ( db_virtual connection ).
	Because of this modules using OR operator for example ( like usrloc
	and dialog ) were forced to used the default operator, AND thus
	creating other queries than the ones desired.

	Thanks to Chris Maciejewski <chris@level7systems.co.uk> for reporting
	(cherry picked from commit 7b0bc8255e15b04372429bb847674a589854acd0)


2017-02-28  Liviu Chircu  <liviu at opensips dot org>
	* [4c8bebd17] :

	rest_client: Add retry behaviour for curl_multi_perform()
	This patch adds proper handling for the CURLM_CALL_MULTI_PERFORM error code,
	(cherry picked from commit df6a9a9bc3f7c65165639a9c88a4359698d0e5b8)

	Conflicts:
		modules/rest_client/rest_methods.c


2017-02-28  Razvan Crainea  <razvan at opensips dot org>
	* [878f689f6] :

	proto_ws(s): fix HTTP reply accept conditions
	(cherry picked from commit a83d1e6677255e4e0362072873978cf4d8c3166e)


2017-02-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1a65b721b] :

	Missing MI reply on setting the GW status.
	Reported by Jeff Wilkie on mailing list
	(cherry picked from commit 3b33461c4215837fbb12c38ebc89e750481c211d)


2017-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [033b4f024] :

	Merge pull request #1061 from andrey-vorobiev/supress-error-for-restclient
	Set 'CURLOPT_FAILONERROR' option to '0' in rest_client module


2017-02-24  Andrey Vorobiev  <andrey.o.vorobiev at gmail dot com>
	* [7bb059fa9] :

	Set 'CURLOPT_FAILONERROR' option to '0' in rest_client module
	This is done in order to archive following goals:
	- suppress error log messages like 'curl_easy_perform: ...' when HTTP
	  server returns response with status code larger or equal to 400.
	- make 'rest_xxx' functions to have the same behaviour with different
	  Curl distributions. Now for different Curls these functions may
	  return different exit codes for the same HTTP response.

	There is an option in Curl named 'CURLOPT_FAILONERROR'. If it's set to
	'1' then if returned HTTP code is equal to or larger than 400 the HTTP
	request is considered as failed and 'curl_easy_perform' returns non
	'CURLE_OK' code. In vanilla (upstream) Curl this option is set to '0'
	(do not fail) but some patched Curl versions set this option to '1'
	(at least this is true for Debian Wheezy). As result we have a
	different behaviour for different Curl derivatives. So it seems to be
	better to enforce setting this option to '0' in order to have the same
	behaviour for different Curls.


2017-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [815a81abb] :

	update changelog for 2.2.3


2017-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [bf93eb969] :

	bump version to 2.3

=========================== Release 2.2.3 ==============================

2017-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [bf93eb969] :

	bump version to 2.3


2017-02-22  Razvan Crainea  <razvan at opensips dot org>
	* [e6dcfacb5] :

	usrloc: do not ignore contacts that don't match a listener
	(cherry picked from commit 3b99412c9c5cff30baa9bcd0aeba71a2c5a63267)


2017-02-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b4c3e0233] :

	[usrloc] fix warning caused by uninitialised variable usage
	(cherry picked from commit 6c45ff017422573a90676f1086e3a8c98aad6b21)


2017-02-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [edc4fa1c0] :

	[usrloc] fix bad condition when checking socket read from db
	(cherry picked from commit 649dde4accb09b7600d9a85138ea62d393185a4f)


2017-02-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2c69eae65] :

	[sipcapture] return timestamp chunk in unix timestamp form
	(cherry picked from commit 271d131602de1b67bfa842b998e30d90750ec678)


2017-02-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6fe31886f] :

	[sipcapture] fix bad chunk id parsing on fixup
	(cherry picked from commit ddbff51cad22b52606ec4b1df514f63c8dbcb88c)


2017-02-20  Liviu Chircu  <liviu at opensips dot org>
	* [aaf7dd8af] :

	permissions: Fix another MI formatting issue ('\n' in string)
	(cherry picked from commit 1d2739b49e6ad1534ec2cdbb34dfe3e09cf4b281)


2017-02-20  Liviu Chircu  <liviu at opensips dot org>
	* [a371a0a1d] :

	permissions: Avoid explicit MI output formatting (TAB usage)
	Some data formats (e.g. JSON) do not allow strings containing un-escaped
	TAB characters.
	(cherry picked from commit e71991c6a8f6e6e42d03fb1ab8f78e1f23d33dcd)


2017-02-15  Liviu Chircu  <liviu at opensips dot org>
	* [0c06c557a] :

	permissions: Adapt "address_dump" output to be JSON-compatible
	Fixes issue #1018
	(cherry picked from commit a56854b9fc50a7be46372f77743158bcd054c98e)


2017-02-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c2df8a8fe] :

	Fix loosing destination status during reload.
	Preserve the status (enabled or not) during a data reload from DB.


2017-02-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6dc140e2d] :

	README re-generated


2017-02-14  Razvan Crainea  <razvan at opensips dot org>
	* [e1a144ba2] :

	load_balancer: rename internal used AVPs
	This prevents using them from script by mistake
	(cherry picked from commit 076c78cbf3acb63842a924c9535fc687cbe40f1d)


2017-02-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8c6ba9a9c] :

	Fix docs : pattern_col is not regexp but file wildcard pattern
	Reported by @arovetto
	Closes #1041
	(cherry picked from commit 38e237d0f75d023f4a31ee1c59933c0af621e96c)


2017-02-13  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [18d0721d3] :

	Merge pull request #1050 from sippy/master_clean
	Fix a crash in the python module.
	(cherry picked from commit f40707ecc4541358de2c159c700ac4b83e0ddf71)


2017-02-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [dc3df815a] :

	Avoid TH handling for locally generated BYEs.
	Fixes #1029
	(cherry picked from commit af667d52712641b3d7c94ae43a8588986dcb12e2)


2017-02-09  Razvan Crainea  <razvan at opensips dot org>
	* [895b823b6] :

	tcp: don't add conn in TCP main reactor after async write
	When getting back a TCP connection from a TCP worker after it wrote some
	async chunks, we should not add the connection in the reactor for read.
	The reason is that the connection might already be polled by a different
	process. If the poll triggers for read in the main reactor, the
	connection will be assigned to a new process - and we end up having a
	connection for read in two different processes reactor - this breaks
	connections list and results in double frees and invalid memory access.

	Many thanks to Federico Edorna for all the help given to track down this
	issue!
	(cherry picked from commit 33fe3395570c40b6733b0579f94072b68e7bd646)


2017-02-07  Razvan Crainea  <razvan at opensips dot org>
	* [1d1908405] :

	rtpproxy: add clarifications about timeout notification
	(cherry picked from commit 4e91d1c3e1421e4a9285ea7ef2d0e9528b4455c3)


2017-02-07  Razvan Crainea  <razvan at opensips dot org>
	* [15914d777] :

	cfg: do not use event_pkg_threshold if PKG_MALLOC is not used
	Reported and debugged by Ovidiu Sas
	(cherry picked from commit 32cf5ecc3ffb7fcd3adaaa053e2e032600dadf7b)


2017-02-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [de8bd1bfe] :

	[proto_hep] avoid to start module without listeners
	(cherry picked from commit 7595d76f124b3303fbd10cc6b5adc93ea405f6aa)


2017-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a27c6b111] :

	Fixed entity index in the b2b callbacks.
	After some rework of the B2B API, the entities are counted starting from 0, while before they were form 1 - this was affecting the call center logic by mixing the caller versus callee parties of the call.

	Reported by Jonathan Hunter - many thanks also for testing !!
	(cherry picked from commit 1e21f91c45debc75ee46fcfa893ce21379667589)


2017-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [dd35aaa7a] :

	Fix missing lock release - related to 36b4908.
	(cherry picked from commit 5739b15c442d86f305571b963aa53c9292d33cf8)


2017-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f08f97bb6] :

	Fix handling extra B2B events in callbacks.
	We need to filter out some new B2B events which are not relevant for the CC scenario.
	Fix for #984.
	Reported by John Steel ( @J0hnSteel ).
	(cherry picked from commit 36b490858f9ae84a01ae4389915e3ae47b5b9119)


2017-02-04  Le Roy Christophe  <c.leroy at alphalink dot fr>
	* [7674e54b8] :

	drouting: Fix out-of-bound initialization
	Upon load/reload of drouting tables, if parse_destination_list() needs to
	increase destinations array size, it asks for a new array twice the size of
	the previous one.
	It memset() the newly allocated capacity, skipping memory that is to be filled
	with already learnt destinations, but using the array size instead of the
	remaining capacity.
	This patch fixes the size for this memset().

	Closes OpenSIPS/opensips#1039
	(cherry picked from commit b11ce9723f1ca43cb7646b96e51dfa306a6280d7)


2017-02-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [081c166bb] :

	[acc] include milisecond duration avp
	(cherry picked from commit 24fba4fe58d49c7b360d850247934931ea183ccd)


2017-01-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6eb5d149b] :

	[siptrace] fix empty value received from mi interface
	(cherry picked from commit 5a42d0c02b944a729263b05b54b9f6c6deca626c)


2017-01-25  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [96858b4d1] :

	mem_stats: proper use the is_free field from memory fragments
	fix issue https://github.com/OpenSIPS/opensips/issues/1028
	the is_free field is now included and updated when SHM_EXTRA_STATS is defined

	fix compiling warning of initialized variable 'origin' in shm_mem.h
	(cherry picked from commit 061c74646dc15f59f0d8fad99bd7649db0662d0d)


2017-01-25  Liviu Chircu  <liviu at opensips dot org>
	* [c6d7e6068] :

	dialog docs: Fix get_profile_size() examples
	(cherry picked from commit 9f0474c93994efa47581b078ba8a017d3ae779dd)


2017-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [37a8dcb5a] :

	Removed aggressive dbg log


2017-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c44264e2a] :

	Fix finding the script functions in assigments.
	Do an aggressive search by digging through all possible ACTIONS or EXPRessions to see if a function is used in the script.
	Fix for #1022
	(cherry picked from commit 87a3a412aa720e858b126a5c2dc0ffe7c6c28530)


2017-01-20  ionutrazvanionita  <ionutionita at opensips dot org>
	* [267118612] :

	remove unnecessary constraint from location table
	* location table had a constraint on username, domain, contact and
	callid but since the contact id was added, this constraint is not
	necessary anymore;
	(cherry picked from commit 42758e11818719f419975b81ad0b8451afff8137)


2017-01-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b0fbe60f5] :

	[usrloc] allow regenerating broken contact_id; fix minor issues
		* there is a new module parameter which allows regenerating
	the contact_id from the database, if this is broken; this shall
	help in migrating from older versions;
		* fixed minor issues that might have caused at some point
	having duplicate contacts in the database because of bad record
	and domain structure reconstruction based on contact_id;
	(cherry picked from commit de77d0eec4583b14af5ab129084a7fe576512ca9)


2017-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [b0a3f27a1] :

	q_mem: fix compile warning for fragemnt computation


2017-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [b2cdce283] :

	mem_stats.h: properly end define
	(cherry picked from commit b2aec994a3141bcedecf8c76423cf4d2d8124dbf)


2017-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [4a737158e] :

	guard module_info.* with SHM_EXTRA_STATS
	These files are only used when extra statistics are used
	(cherry picked from commit 6a9bf79f76d3638cb5f839565234f3417bc7c144)


2017-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [7f18be90e] :

	Makefile.rules: fix generate-mem-stats escaping
	(cherry picked from commit 506c15d417bdfb941348dce9aaa7d3fe1a3acd31)
	(cherry picked from commit 03f57ed3fea65f7158452ec15b182d25f067af7f)


2017-01-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [b8a3fd705] :

	shm_module_stats: add maximum group usage
	a new statistic was added for every module group declared which shows the
	maximum real memory used by that module

	fix a bug that generated underflows in the statistics, when the 'core' group
	is declared all the fragments from the memory are marked with its new index,
	before the fragments allocated before the declaration were mismanaged when freed
	or rellocated
	(cherry picked from commit e2a6df0c16c42807483879bddef674946a891bfe)


2017-01-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [d3d03d065] :

	statistics: bug fix
	proper handle freeing of the modules shared memory statistics,
	change the STAT_ONLY_REGISTER flag to STAT_NO_ALLOC, as it now also blocks
	the stats collector from freeing the generated statistics individually,
	the freeing is done when the shared memory is destroyed at opensips
	shutdown
	(cherry picked from commit 7794755731fb648e547e0b20a7baa3e7eb1f312a)


2017-01-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [e2a2cd59e] :

	module_shm_stats: change initialization values
	when the first group is created if the 'core' or the default
	group is defined the values are initialized with the ones stored
	int the shm_block structures

	fix compile warning in *_malloc.c (pointers inot casted)
	(cherry picked from commit 9766d69ea013efbbfebebc31ff78ce8d26b58806)


2017-01-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [122cb62e9] :

	shm-extra-stats: bug fix
	-when memory was allocated from a module and freed from another module (or the core)
	the module shared memory statistics didnt properly reflect that and a underflow was
	generated
	-added a index in every memory fragment that indicates the module where it was allocated
	so the free will decrease the statistic of the same module
	(cherry picked from commit cb8d111ddb6a7e5c0c73b84bf03b942941092f22)


2017-01-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [f15d2f0b5] :

	module_info.c: change group reallocating policy
	(cherry picked from commit e9c3b44bfb326441b60c4bc003228c75ce7bf27f)


2017-01-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [b5131232d] :

	module_info.c: change obsolete flag
	(cherry picked from commit db310d8b8c3efd62ccd0b7f7de4d142a366dd55b)


2017-01-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [2fd6fadd3] :

	mem/module_info: adapt code to shared memory initialisation change
	the statistics vector is exteded as more memory groups are declared
	if SHM_SHOW_DEFAULT_GROUP is defined allocations done util grups are
	defined are added to the default group
	(cherry picked from commit 20ebdb0597e958cfa1b998d3d5a98f6f26e13a98)


2017-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [b113d4eaa] :

	tm: add usage scope in documentation
	Informs users about the scope where the transaction functions should
	be used. Should prevent misuse cases, such as #1019 and so.

	Thanks go to Ryan Bullock for reporting and documenting this.
	(cherry picked from commit 202193bf8b1bf132e39ecf7dc4b7258839ac5ff4)


2017-01-17  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4fe1ae333] :

	[aaa_radius] don't start if dictionary attr/value not found
	(cherry picked from commit 75573b41c5453b495a3fa9ad1bdf2df3ee0f4c2f)


2017-01-17  ionutrazvanionita  <ionutionita at opensips dot org>
	* [efc4706ba] :

	[acc] clarify need for extra radius dictionary
	(cherry picked from commit 16590b880b69c258a54fa4a31ab3d5686fc42b86)


2017-01-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [73711e325] :

	[siptrace] fix parser; remove need for special character and the end of last token
	(cherry picked from commit 25d81e8ce76c61e99e69cb86d26d4d28d7c494b5)

	Conflicts:
		modules/siptrace/siptrace.c


2017-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ac03a5a06] :

	README regenerated


2017-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c8c4fb6aa] :

	Fix typo in docs, thanks to digitaldude on IRC.
	(cherry picked from commit ccc2cd757c0440ce3798f2b197df709e712d7eb2)


2017-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d45edede0] :

	Relax the dialog state machine - allow PRACK after dialog is established
	There are some weird UDP scenarios where the PRACK may land on the server after the ACK. Rejecting the PRACK at dialog level leads to infinit looping (if used with TH). Better be more flexible and ignore PRACKs after ACK.
	(cherry picked from commit 8442dd115e729891710e75d5f0ec1dc5f6fbf322)


2017-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [25abf29fb] :

	Fix missing FROM body on URI restore.
	As transaction may be created before the call of the uac_repalce_xxx(), the FROM header may not have a body when cloned in TM.
	The restore_uris_reply() should be ready to deal with a transactional request without FROM body parsed.

	(cherry-pick from 83170767d4b49a7309c9ab8b37c6af7e38d74426)


2017-01-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a10ec43f1] :

	[aaa_radius] fix issue in docs


2017-01-09  Razvan Crainea  <razvan at opensips dot org>
	* [681efdd36] :

	fix bogus date changes when version is upgraded
	Thanks go to Louis St-Amour and Nathan Ward for spotting this


2017-01-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c935e4a9b] :

	[ldap] fix failover mechanism
	(cherry picked from commit 26c27544f5622c0dcd1961cc4a567d5e403218c5)

	Conflicts:
		modules/ldap/ldap_api_fn.c


2017-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [54438e474] :

	Fix fallback after another fallback.
	Avoid decrementing the prefix len if already 0.


2017-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [59d10efe4] :

	Additional Fix for fallback on default rules.


2017-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6e7495a01] :

	Fix crash on fallback from a prefix-less rule.
	If a prefix-less (empty prefix) rule matched, do not attempt to do fallback by reducing the len of the prefix.


2017-01-04  rvlad-patrascu  <vladp at opensips dot org>
	* [136e61ca5] :

	sql_cacher: downgrade some logs from WARNING to DEBUG
	(cherry picked from commit df12a17f38f09e79d9f4e839fa98e1a0976c0237)


2016-12-20  Liviu Chircu  <liviu at opensips dot org>
	* [2bdbbe4ae] :

	rest_client: Remove leftover debugging code
	(cherry picked from commit 2b0366abd2942a7d7e3f3fd1ea825ecaa3117a82)


2016-12-20  Liviu Chircu  <liviu at opensips dot org>
	* [c35ae5234] :

	rest_client: Update docs
	(cherry picked from commit 5706d5f31756bd76652e5443db31403d97346944)

	Conflicts:
		modules/rest_client/README


2016-12-20  Liviu Chircu  <liviu at opensips dot org>
	* [0d0eea920] :

	rest_client: Fix issues with libcurl parallel transfers
	We cannot use the "parallel transfers" feature of libcurl's multi interface
	because that would consume read events from some of its file descriptors that
	had previously been added to the OpenSIPS reactor. This would sometimes lead
	to dangling descriptors in the reactor, as well as some OpenSIPS async routes
	which are not triggered.

	To work around this, we can still achieve the desired effect with a pool of
	multi handles each doing a single transfer, rather than using 1 multi handle
	doing multiple transfers.

	Thanks for reporting and troubleshooting to @arovetto and Agalya Ramachandran

	Fixes issue #997
	(cherry picked from commit ed8984c54320a6712eb6469de2b42ebef4420b47)

	Conflicts:
		modules/rest_client/rest_client.c


2016-12-19  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1913ad06e] :

	[proto_hep] fix bad chunk identifier macro
	(cherry picked from commit 7e8518058b24d39e37b952b1912b58d14e97921b)


2016-12-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [64fd7f6f2] :

	Shut GCC up on some false warning on unset var


2016-12-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [dafef2586] :

	Fix the fixup function for is_contact_registered()
	The fixup function is translating the "contact" and "callid" parameters to pvar type, but the is_contact_registered() function was handling them as gp_param type. The fix is to handle the parameters as pvar type in is_contact_registered().

	Reported by Nick Altmann
	(cherry picked from commit 3187c516e5ddd23fb6e5030b2c9b869e870da3c0)


2016-12-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [29a048ac2] :

	Fix handling of NULL proto in sip_resolvehost()
	"proto" is not not mandatory (it may be NULL) as parameter, but there were cases where the code was assuming a not NULL proto variable.

	Reported by Nick Altmann


2016-12-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c9d7a48a6] :

	[siptrace] fix bad doc example
	(cherry picked from commit 3aaa955b74a997772ab1df230c92327a5119709e)


2016-12-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [17ca72ca1] :

	Add some extra tests to prevent any overflows
	Related to #c5c1f4
	(cherry picked from commit 56c596851319b721287adb9931cd69f257c3c667)


2016-12-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a6f368fd6] :

	Fix recalculating Active nodes and weight sums after reload
	When inheriting the state from in-mem old data set, the state of a node may change, so we need to recalculate the number of active nodes and the running sums (for weights) in the set.

	Fixes #972, but we need @hydrosine confirmation on this.
	(cherry picked from commit c5c1f40ea54f0908421ece09bdc5e4b70ceba6cb)


2016-12-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1a01dc80d] :

	Fix bug in removing dialogs from profiles.
	If we fail to remove a dialog from a profile, do not return, but continue with removing the dialog from the remaining profiles.
	(cherry picked from commit 2eb576d8f1d578405cec9aa0ad673319edd2399d)


2016-12-09  Liviu Chircu  <liviu at opensips dot org>
	* [6193cdd16] :

	rest_client: Disable CURLOPT_FAILONERROR
	Immediately closing HTTP connections on negative replies is not
	desirable, as system logic may be built around such replies.

	Reported on IRC by holysip
	(cherry picked from commit bf59a6082bbe52e8e9a5efc001daf68627ecc09f)

	Conflicts:
		modules/rest_client/rest_methods.c


2016-12-09  rvlad-patrascu  <vladp at opensips dot org>
	* [a84b61069] :

	event_flatstore: fix copyright
	(cherry picked from commit bda0243c2cc527bcea776dcf45da58c19616ee9e)


2016-12-09  rvlad-patrascu  <vladp at opensips dot org>
	* [490298f38] :

	event_virtual: fix copyright
	(cherry picked from commit 79ebb90726b8184b2908804046ad2bc5f9092e0d)


2016-12-09  Razvan Crainea  <razvan at opensips dot org>
	* [f1e86f459] :

	clusterer: fix copyright
	(cherry picked from commit cf271d0ec3b969512c8fd8e7b3e9a76fac6acd57)


2016-12-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2d55067cd] :

	[sqlite] set data type even if data is null
	Thanks to Aqs Younas <aqsyounas@gmail.com> for reporting
	(cherry picked from commit 642e8879c10aa38a8745c6db173c447c54c3cddf)


2016-12-07  Razvan Crainea  <razvan at opensips dot org>
	* [04b0644e7] :

	uac: properly store replaced URI if not used in branch route
	Restores the proper URI for UPSTREAM sequential requests

	Reported by Antonis Psaras
	Close #1001
	(cherry picked from commit ed2746a1faa768b70aa67a2d68d5a0451d0c727f)


2016-12-06  Liviu Chircu  <liviu at opensips dot org>
	* [1d3dcaf99] :

	tls_mgm: Improve startup error reporting
	(cherry picked from commit e5d23c7acdf43ff5c83bbd78d0e33c475f8be009)


2016-12-06  Razvan Crainea  <razvan at opensips dot org>
	* [33664b0d5] :

	tm: replace ERROR to DBG when bavp list is not found
	(cherry picked from commit 92fde1be1fcfcf8df0c89181f3baba7df520ff27)


2016-12-06  Liviu Chircu  <liviu at opensips dot org>
	* [a0517e200] :

	rest_client: Fix memory allocation race condition
	libcurl actually creates a thread to do each blocking request, so the
	memory allocation functions we provide it with must be thread safe.

	Thanks to Agalya Ramachandran for helping troubleshoot this bug
	(cherry picked from commit 900f6c996c697bf913efb7843d915411b5da930c)


2016-12-06  Razvan Crainea  <razvan at opensips dot org>
	* [01435b4e2] :

	dns_cache: remove bogus library path
	The module does not use any library, so it does not have to tune the
	library path and libraries used.
	(cherry picked from commit 7e5142a22d683c297b4bdc2a10aecac5873bea7a)


2016-12-05  Razvan Crainea  <razvan at opensips dot org>
	* [a63bcd92d] :

	Makefile.defs: Detect all arm architectures
	(cherry picked from commit 34f5e1cf1261e738ad66a0692025aee04f396fc2)


2016-12-05  Razvan Crainea  <razvan at opensips dot org>
	* [e171dc8ee] :

	avpops: remove avp_printf() from docs
	(cherry picked from commit 6151c7af54be64dd8b5af906c234b946c10f9ac9)


2016-12-05  Razvan Crainea  <razvan at opensips dot org>
	* [fd8f6ec44] :

	timer: pass flags when registering a new job
	(cherry picked from commit 68d4240698e639490ab7dfa187b1458f00146fb3)


2016-11-24  Razvan Crainea  <razvan at opensips dot org>
	* [8b7a81b98] :

	statistics: only raise warning when setting stat with smth != 0
	(cherry picked from commit c1b0c80595ac9ee1f30583ad794cab420ee1925f)


2016-11-16  Ovidiu Sas  <osas at voipembedded dot com>
	* [356dc1fb2] :

	opensipsdbctl: fix typo
	(cherry picked from commit fb85c5a323cb6246efade7f9cd5a78861686a3bb)


2016-11-16  Razvan Crainea  <razvan at opensips dot org>
	* [f9db6d282] :

	parser: fix INVITE & INFO methods parsing


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [9316f3def] :

	sipmsgops: fix null dereference
	Fixes Coverity CID 40620, 40621
	(cherry picked from commit 49552fa95207c7e87036af376e0d2fe75854a463)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [5fb2980e8] :

	mi_fifo: close reply fifo in case of error
	Fixes Coverity CID 40805
	(cherry picked from commit 3b1aa4a5f45a92d93b410e3ccb31ff69ba6239ef)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [4f10f474d] :

	seas: release FILE after printing
	Fixes Coverity CID 40820
	(cherry picked from commit 7e7babff315bb0724dceb092bd0eb49504f1ab8f)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [611f668a6] :

	path: jump to proper label in case of error
	detected by Coverity
	(cherry picked from commit 65ba1fc82275ff1d4559e5d5d619b5538411b4e0)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [818a84c5f] :

	snmpstats: free space in case of error
	Fixes Coverity CID 40799, 40800, 40801, 40804, 40811, 40814, 40817, 40818
	(cherry picked from commit 9b64078ada10287848d6f5853cc5c4cc3dc1b0fb)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [e1b2e070d] :

	snmpstats: close fd in case of error
	Fixes Coverity CID 40813
	(cherry picked from commit 42c96119875e852b12759c4f7389df6904a46e91)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [70a1f5de9] :

	statistics: remove uninitilized value test
	Fixes Coverity CID 40909
	(cherry picked from commit 3377bc11a580ec79b3b4449c06ac544189092e3f)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [08c547869] :

	xode_from.c: close handler in case of error
	Fixes Coverity CID 40812
	(cherry picked from commit 616e1bd032ebcd6d676795bb28915d1d8730525a)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [3c80bbe54] :

	changelog: properly update changelog to 2.2.2
	Reported by Chen-Che Huang


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [0bc63239d] :

	tm: allow deleting branch avps
	Also fixes coverity CID 40585
	(cherry picked from commit 343a532258fc7b2fe91c6ac4f457823b9f938741)


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [9d4f4d973] :

	enum: fix country prefix len detection
	Fixes Coverity CID 40580
	(cherry picked from commit 275f320cd89a3f89dc37eff7e90280c24ff3e805)


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [c912ec04d] :

	dialog: fix message re-generate condition after local route
	Fixes Coverity CID 40553 and 40605
	(cherry picked from commit 85d7d3a1fb550aad4b9d18ba3861e554b331eb91)


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [764137fe9] :

	json: properly check pv_parse_spec() return
	Fixes Coverity 40485
	(cherry picked from commit 7bc6bd67f8230ea12d79fb5226521a257776583a)


2016-11-11  Peter Baines  <peter at pbaines dot com>
	* [4e008fe83] :

	Fix typo in startup error message
	(cherry picked from commit 6df1d52e8fe68ad5198325adb6d6b5823ba918d2)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [133ddaa61] :

	carrierroute: prevent ch truncate from fgetc()
	Fixes Coverity CID 40507
	(cherry picked from commit a5dccbbed4d95bd18e265f7dd0472375f344d78f)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [a4288f1bf] :

	msilo: replace strncpy with memcpy
	This prevents a coverity warning about null terminated strings
	Fixes Coverity CID 40507
	(cherry picked from commit 1d698a9037346f7f03a77147a5008689998c8069)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [283054212] :

	b2b_entities: properly check parse_methods() return
	Fixes Coverity CID 40493
	(cherry picked from commit 7b20690e133c0e90110b549d65ee6769b4ca64fa)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [08d76750e] :

	rls: properly check parse_from_uri() return code
	Fixes Coverity CID 40490
	(cherry picked from commit b310986c6f0a2d76f2092433f06d8cb94e1f08fc)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [7df1128a8] :

	b2b: properly check return codes
	Fixes Coverity CID 40486, 40487 and 40488
	(cherry picked from commit d9967ca2abe54faf6426bb76c369ae6be10bb218)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [4dc500958] :

	json.c: properly check the pv_parse_spec() return
	Fixes Coverity CID 40485
	(cherry picked from commit b5c02f16645ab48a8910c148ce596d46d2f1b285)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [4c4ed7f24] :

	b2b_logic: properly check functions' return code
	Fixes Coverity CID 40483 40484
	(cherry picked from commit d12d3795e884c87c1225be3c96f959dd79763806)


2016-11-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7fe83638f] :

	[nathelper] fix via branch building depending on flags
	(cherry picked from commit b8ac6dca5b9627e2d3ac1552a8af8fa427d4c82d)


2016-11-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e3c739d4e] :

	Fixed bogus test on pointers.
	This may lead to invalid len to be returned.
	(cherry picked from commit f81e9bf5f0e4a75d6279b8c9e2f1397538e6e953)


2016-11-08  Razvan Crainea  <razvan at opensips dot org>
	* [b9b556081] :

	net: do not warn about listener not used and not found
	(cherry picked from commit c221eb3db06c7dae3375defa79ce77e1983ebc87)


2016-11-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [67c79e845] :

	[proto_hep] check if hep context was allocated before freeing
	This closes #986
	(cherry picked from commit fce7db8b22ef5564180bb254102545bc4c349d0e)


2016-11-08  Razvan Crainea  <razvan at opensips dot org>
	* [29971c809] :

	Merge branch 'shimaore-misleading-indentation' into 2.2


2016-11-08  Razvan Crainea  <razvan at opensips dot org>
	* [89eb75b53] :

	dialog: fix possible crash when there were undeleted routes


2016-11-08  Razvan Crainea  <razvan at opensips dot org>
	* [eb2f8a43d] :

	b2b_entities: fix bad logic caused by identation


2016-11-08  Stephane Alnet  <stephane at shimaore dot net>
	* [d7624b260] :

	Correct `misleading-indentation` warnings
	Code is unchanged from the compiler's point of view, this only clarifies intent.


2016-11-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eafe60897] :

	Fixed bogus passing of socket pointer as printed value in a a buffer.
	(cherry picked from commit 85c3bc5ed74481b1ad736ae6b860082c99fbba9a)


2016-11-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [91de722ec] :

	Fix bogus printing of socket pointer.
	Do not print the '\0', as it will break the logs formating.
	(cherry picked from commit 5acb935e06152b167469e7a31e917e7974f1c7e5)


2016-11-04  Liviu Chircu  <liviu at opensips dot org>
	* [d410795e8] :

	fraud_detection: Fix possible startup crash
	Race condition between drouting startup and check_fraud()

	Credits to Jim DeVito for helping with troubleshooting
	(cherry picked from commit 2efc77d0d8eb905f3ed92cfb5136fa5bc8f0c33a)


2016-11-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ef3b53857] :

	fixed bogus entity in DB docs


2016-11-03  Liviu Chircu  <liviu at opensips dot org>
	* [a13bfe3af] :

	dialog: Fix incorrect replicated dialog ids
	Also improve code readability with regards to dialog id handling

	Issue reported by Dawid Mielnik
	(cherry picked from commit 00be97f151d254af281c4f05611c1905f51fbcde)


2016-11-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9eb177df3] :

	[compression] fix bad header section length calculation for mc_compact
	(cherry picked from commit 81498e4ce0e7e2928d229b69da0c440660c97544)


2016-11-01  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d595bc80e] :

	[dr] remove unnecessary print
	(cherry picked from commit 098ddfb129a035749241e73e4a2b608963ce46a9)


2016-11-01  Razvan Crainea  <razvan at opensips dot org>
	* [af9bfc090] :

	drouting: remove unnecessary debugging
	(cherry picked from commit 47c048603750928d49b6ea1e4438206a27632373)


2016-10-27  Razvan Crainea  <razvan at opensips dot org>
	* [41d356ae3] :

	rtpproxy: doc warn about asym processing in bridging mode
	(cherry picked from commit cba64bc055163f4e883a6e5aebdca845fd000deb)


2016-10-27  Razvan Crainea  <razvan at opensips dot org>
	* [db8c64bcd] :

	dialog: add \n to log
	Reported by Hamid on the lists
	(cherry picked from commit efedc90cea45beb42951c5fb933c06757f813976)


2016-10-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c8a605b7f] :

	[sipcapture] fix bad struct field used for storing domain
	(cherry picked from commit 8a25380b05fad83a710b76f0a4697f27b224f6c1)


2016-10-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5eed328e8] :

	Fixed missing \n in log message.
	Reported by @hamid-elaosta

	Closes #974
	(cherry picked from commit ae34313cd86379e4322d37dd901b710746974303)


2016-10-20  Razvan Crainea  <razvan at opensips dot org>
	* [980512d09] :

	delete unused file
	(cherry picked from commit 7de293358d42fab2ad30c6cc05694dcb57075d69)


=========================== Release 2.2.2 ==============================

2016-10-19  Razvan Crainea  <razvan at opensips dot org>
	* [9e406b2] :

	Increase version to 2.2.2


2016-10-19  Razvan Crainea  <razvan at opensips dot org>
	* [f79d3b4] :

	userblacklist: sync between reload and read
	This commit fixes possible crash due to concurrency between the data
	read while checking the blacklist and reload.

	Reported by Michele Pinassi

	Close #884
	(cherry picked from commit edad7265c71d2259003e7500872e51c1a461ad9f)


2016-10-19  Liviu Chircu  <liviu at opensips dot org>
	* [ab2a67b] :

	fraud_detection: Fix docs for "show_fraud_stats"
	(cherry picked from commit d25633505ceaf053bf96d78583f520e4f446d817)


2016-10-19  Liviu Chircu  <liviu at opensips dot org>
	* [243aacb] :

	fraud_detection: Fix "concurrent_calls" statistic
	Ensure the "concurrent_calls" stat is properly decremented for
	un-established dialogs as well (due to negative INVITE replies).

	Thanks to @Freenex for the bug report
	Closes #949
	(cherry picked from commit 703ce9098f0f91ee3ffa6ae0254d77903037b32a)


2016-10-19  Liviu Chircu  <liviu at opensips dot org>
	* [bb9fd7c] :

	fraud_detection: Fix shm memory leak
	(cherry picked from commit 4a0d22d95b34eed82c87b6b2f836b6d4789e4100)


2016-10-19  Razvan Crainea  <razvan at opensips dot org>
	* [14f72c6] :

	dns_cache: fix examples
	Credits go to Pete Kelly for reporting it.
	(cherry picked from commit 7cdd3ee99d6c46dcde238c8571f21c46e85e82b3)


2016-10-19  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1c7e19d] :

	Fix broken ldap async engine
	   Previous ldap async engine implementation was broken. Now the
	module stores a pool of connections for each session which will
	be used for executing async queries and one separate connection
	that will be used for synchronous queries, in case the maximum number
	of open connections allowed(max_async_connections module parameter)
	is reached. The sync connection will also be used for synchronous
	queries from other functions.
	   The connection pool is stored per process, so each worker
	process will have its own pool and synchronous connection. For large
	numbers of asynchronous ldap calls per second, having a higher value
	for max_async_connections will result in better performance.
	(cherry picked from commit 7d7dd9effd82275b0727d99d2d11ea00e016cad2)


2016-10-19  Razvan Crainea  <razvan at opensips dot org>
	* [1c5911e] :

	Do not load a protocol module if there is no listener
	(cherry picked from commit 3593690d5a7da57a00280743a6effbb443be0c33)


2016-10-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [757389d] :

	[sst] fix using unallocated memory bus
	* sst was freeing shm memory after freeing it in dialog callbacs;
	* sst was using memory without checking if it was allocated;
	(cherry picked from commit 33dc084dd553a20cc691b3ec38e17993ac5ae5b6)


2016-10-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9ed154b] :

	Fix CANCELLing of transactions not forwarded.
	Due async operations, a transaction may be created and it may exist for a long time before any branch is created for it (via a t_relay). The current fix takes care and does proper handling on incoming CANCELs matching the transaction while it has no branch (no t_relay() on it).
	Old behavior - the INVITE transaction was never getting a final reply
	New brhavior - the INVITE transaction gets an internally generated 487.
	(cherry picked from commit fb0d90ec75601304eed98168bb988ebdbf10c260)


2016-10-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [944fdc1] :

	Fix consistency and use dialog_id.
	Dialog_id is printed by dlg_list (along the h_label and h_id) as a simpler alternative to identify the dialog.
	Also, the dlg_end_dlg accepts both h_label and h_id or a dialog_id.
	This is needed as the DB exposes only the dialog_id, and the dialogs from DB cannot be correlated anymore with the MI commands. See #963

	Closes #963.


2016-10-12  Liviu Chircu  <liviu at opensips dot org>
	* [bea4f4a] :

	Fix a possible segmentation fault on startup
	Do not generate a corefile on "listen = udp:eth0:bad_port" errors
	(cherry picked from commit 2352d57e35c15dab34c046566e5a89cbc5d068aa)


2016-10-12  Liviu Chircu  <liviu at opensips dot org>
	* [de6dba0] :

	Fix "use_children" to work with interface names
	(cherry picked from commit c7da1af1642697269eb74865018d017f1a6ee664)


2016-10-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b7ff6b3] :

	Fix documentation errors


2016-10-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [34bbe68] :

	Fix regression on is_registered() returning the contact ATTRibutes.
	The function, upon success, must also return the attributes of the first found contact for the searched AOR.

	Reported by Rik Broers ( @hydrosine ).
	Closes #960


2016-10-11  Liviu Chircu  <liviu at opensips dot org>
	* [e31aee8] :

	Improve parsing for "hep_udp" and "hep_tcp" literals
	(cherry picked from commit add97f8726a83aa0c408cd7701ce28f9d1f7ff62)


2016-10-11  Liviu Chircu  <liviu at opensips dot org>
	* [f94b24d] :

	proto_sctp: Fix startup bug caused by a typo
	(cherry picked from commit e8d9a71a44fc4d9a83ee2f8690904993330f05ef)


2016-10-07  Liviu Chircu  <liviu at opensips dot org>
	* [3fde889] :

	rest_client: Update documentation
	(cherry picked from commit efe5dd76e15b9ef06b7cf113c2e3fb7ec1e19d75)


2016-10-07  Liviu Chircu  <liviu at opensips dot org>
	* [7cdab71] :

	rest_client: Add "connect_poll_interval" module parameter
	Allows complete control over how quickly we want to detect libcurl's completed
	TCP handshakes, so the transfers can be started. A lower "connect_poll_interval"
	will speed up the HTTP transfer, but will also increase CPU usage.
	(cherry picked from commit f5abfb3dee649a14ae39ad74d7f04454f815748f)

	Conflicts:
		modules/rest_client/rest_methods.c

	Includes fix-commit 3ba7be6692c6987f.


2016-10-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [db433bc] :

	Downgrade logs from NOTICE to DBG - part 2
	(cherry picked from commit dd518ccdcdc02503ccdbead26f5fc44f2c405093)


2016-10-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7b6d0d7] :

	Downgrade logs from NOTICE to DBG


2016-10-06  Daniel Fussia  <daniell at inatel dot br>
	* [8570c34] :

	Changed from VAL_STR to VAL_STRING in case DB_STRING


2016-10-05  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [dfdb2d8] :

	Merge pull request #962 from tavyc/exec-flush
	exec: Flush the pipe after writing the message
	(cherry picked from commit bcf3118ec6b280d90f65a45747abd81c2fcfe44b)


2016-10-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9a7aac3] :

	[sipcapture] memset contact uri structure to 0
	(cherry picked from commit ac66dc14bb736bb5afd70d923db7e7fa065462ff)


2016-10-04  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [70e1d6b] :

	Use signed type for computing timer drift
	(cherry picked from commit f8c11e17532db852901b7cc4a040b613d91ed5e3)


2016-10-03  Liviu Chircu  <liviu at opensips dot org>
	* [a9bdf7b] :

	usrloc User-Agent filtering: Fix memory corruption
	The "ua_re_check" macro added by commit e5cb9805bc is broken in several ways:
	    * unsafe read operation on shared memory
	    * unsafe write operation on shared memory
	    * incorrectly handled error case, without restoring the backup byte

	This patch corrects the above issues by extending the user_agent buffer.
	(cherry picked from commit 58a944cddbfbe7aab47a3e296d8aba5d36454a1e)

	Includes fix commits:
	    - 03398fbf
	    - e16abb4b


2016-09-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c8ee7d5] :

	Fix computing the pinging partition in timer job.
	Avoid using static variables in timer jobs as they may be run in different processes, leading to unexpected results.
	Many thanks to Andrew ( @kertor on GITHUB) for spotting and reporting this.
	Fixes #959
	(cherry picked from commit 82fd3ae683b7fc108d47760f73cbdd80f2dd70af)


2016-09-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f10e57f] :

	Fix documentation for calculate_ha1 parameter
	Reported by Aqs Younas on the mailing list.


2016-09-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f22b884] :

	[proto_hep] fix bug introduced in 7190a2d
		Commit 7190a2d was freeing the extra chunks twice when
	the message was processed as SIP. Now the original hep context
	free function is not registered as a context free function, but
	called manually each time all the hep processing is done. This
	way we avoid the memory leaks that appeared when the message was
	not a SIP message, and the chunks were not freed.
	(cherry picked from commit 63b2a52c2c2d453ccf889cc5e74991a2c81aaccd)


2016-09-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4198511] :

	[proto_hep] fix extra chunks memory leak
		Extra chunks (the ones that are not defined in the internal
	hep structure) were not freed, causing a memory leak for each hep
	packet that had such chunks.
	(cherry picked from commit 7190a2d89f54998a88a2b0b208bba50c9bb4027d)


2016-09-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4e1ef8b] :

	[proto_hep] don't drop packets with port 0
	    This packets might be different than sip, internally generated
	that might not necessarily be related to a connection.
	(cherry picked from commit 7d2ab2bce0c5955b45cdbc88867e81c5e0d93908)


2016-09-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3f26dc2] :

	[proto_hep] convert to host byte order before allocating custom chunk
	(cherry picked from commit 89f5ec299f2d9bcaa1a0f5933ab6f59638ee1aa6)


2016-09-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9432241] :

	Extra logging to troubleshooting presence event handling
	(cherry picked from commit d536c3d41b3738842e531448c53a82791dd5e9b7)


2016-09-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9a38079] :

	[acc] fixed missed calls callback registration
	If the missed calls callback was not registered the first time
	do_accounting was called then it wouldn't have been registered
	thereafter. A new internal flag was defined to know wheteher or
	not the callback has been registered before the current
	do_accounting call.
	(cherry picked from commit 0592ab6db2f00b586d5f74fadd9f7f65cc00a7cf)

	Conflicts:
		modules/acc/acc_logic.c
		modules/acc/acc_logic.h


2016-09-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c26401a] :

	Fix socket selection for outbound UDP.
	Do not use the bind_address of the process when comes to send an UDP package (bind_address may be different from process to process, so the selection may give different results, depending on the processes sending the UDP).
	If you have a sip_msg, try using received interface of the msg (if matches), otherwise use the first UDP interface.
	(cherry picked from commit 7596eb99fceb68bd95653b76a388f8bc42fee5c6)


2016-09-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e921f57] :

	Remove testing warning message


2016-09-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8aebdcb] :

	Merge previous cherry-pick from trunk


2016-09-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [73710a7] :

	Fix async resume in the timer dedicated timer.
	The timer dedicated timer may end up running script routes (like failure route), so it may trigger some async operations. So, the dedicated timer process must be async enabled.
	(cherry picked from commit 91e87f18d48b9e66cd052e825ae1f2f3c061955f)


2016-09-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e77626e] :

	Fix starting TCP processes.
	Do not start TCP main if tcp is disabled - this was introduced with the previous commit, when we split the starting of TCP workers and TCP main (see c2e2a0f141d11a972705f1555d0e2a23ec3f01ed).
	(cherry picked from commit 542a9c98844bffec96d7cc790c37ef842b43ee66)


2016-09-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3767f33] :

	Fix the TCP forking sequence.
	Keep the TCP-main the last forked process, to be sure it inherits all the communication sockets from all other OpenSIPS processes.
	Credits go to Razvan for reporting.
	Alternative fix for 9fd451fd684ed3c9133bcc0e896de8d28ad45208
	(cherry picked from commit c2e2a0f141d11a972705f1555d0e2a23ec3f01ed)


2016-09-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7080dda] :

	Fix building the FROM header in XMPP2SIP.
	Reported by Igor Pavlov.
	(cherry picked from commit bf9acc3a15f376f17a8d415a5d48789e19ce3dee)


2016-09-19  Razvan Crainea  <razvan at opensips dot org>
	* [8d4ae49] :

	usrloc: fix race between update for different registers
	In case there are two REGISTER messages with incremental CSEQ are
	replicated in a different order, skip the processing, since this has
	already been resolved by the master instance.

	Thanks to Deniz Beskök for reporing this

	Closes #956
	(cherry picked from commit 26f6c1bacb33ddf0bcbd54ccffc65bee8754e01d)


2016-09-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a60f28d] :

	Fix potential starvation for the timer tasks.
	Even if the timer tasks have priority in the asyns reactor (for being handled), if all the worker processes are already busy in handling some SIP tasks which takes too long, may lead into a starvation of the timer tasks.
	For the moment we address this by creating a extra worker processes (similar to the SIP workers) which is dedicated to executing the timer tasks. Still, based on their availability and load, the SIP workers are able to consume timer tasks.

	In the next steps, this issue will be better addressed by implementing the concepts of "preferred jobs" and "capacity reservation" for the processes in the pool.

	Credits for helping with the investigation and testing go to Ramachandran, Agalya
	(cherry picked from commit c40f2b057209b8078520abc95e5d1bf5e5a28db6)


2016-09-13  Di-Shi Sun  <di-shi at transnexus dot com>
	* [68ace2e] :

	Updated to support SUBSCRIBE/NOTIFY CNAM and OSP Toolkit 4.12.0.
	1. Added SUBSCRIBE/NOTIFY CNAM support.
	2. Formatted sample configuration file.
	3. Updated for OSP Toolkit 4.12.0


2016-09-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a55ac46] :

	[db_virtual] check if backend exports async function
	(cherry picked from commit 4537a21ed3a4cbb1a3925e8d5a420d4400366a8d)


2016-08-30  Razvan Crainea  <razvan at opensips dot org>
	* [7261cf0] :

	packaging/debian: move all current files in a common directory
	(cherry picked from commit 03b4a7eae52f21b0676d0ac1a337e6a996c2de42)


2016-08-30  Razvan Crainea  <razvan at opensips dot org>
	* [57e94a2] :

	packaging/debian: use newer version for libmicrohttpd
	(cherry picked from commit 84d38d617e605cf56e89e098e4b911de2ee2c874)


2016-08-30  Razvan Crainea  <razvan at opensips dot org>
	* [dc732f2] :

	fix expresion - expression typo
	(cherry picked from commit c2d0b38d53dac8c8975f2d40a3268b14829e53b2)


2016-08-30  Razvan Crainea  <razvan at opensips dot org>
	* [098e448] :

	debian packaging: remove non-existent dependency
	replace dependency of db4.6-util to db-util (>= 4.6.19) for new Debian
	versions
	reported by Julián Moreno Patiño
	(cherry picked from commit 6d7cf35658c22c8c65ddc3b6c54e9320c2198d5a)


2016-08-29  Răzvan Crainea  <razvan at opensips dot org>
	* [1ecb911] :

	Merge pull request #944 from Deni90/master
	Added support to fast_lock for mips and mips64el
	(cherry picked from commit 65d86fd0c362f3081cc0341760c6ebd1b900abaa)


2016-08-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [fb761ed] :

	[acc] Remove accidentally added file


2016-08-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [12c5864] :

	fix bag pkg pointer used for storing accounting flags
	This closes #906 (Many thanks to @gcuppers for support)


2016-08-26  Razvan Crainea  <razvan at opensips dot org>
	* [313b171] :

	ws(s): make sure we cleanup the request in the con
	Reported by Tito Cumpen
	(cherry picked from commit 39e40f93fe5bc76c58c5b64f8b32b327b975f62e)


2016-08-25  Liviu Chircu  <liviu at opensips dot org>
	* [456fc2c] :

	fraud_detection: Fix bad script retcode for check_fraud()
	Thanks to Freenex on IRC for fixing and testing
	(cherry picked from commit daf63bb229b810c21fee013c5ed01a00652fb850)


2016-08-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d30f39a] :

	Fix is_contact_registered() to accept less params.
	The last 3 params are optional, so we can invoke the function without them.


2016-08-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [65d981b] :

	Fix using is_registered() function with first param only.
	Reported by neo_land1 on the #opensips IRC channel.


2016-08-17  ionutrazvanionita  <ionutionita at opensips dot org>
	* [373394b] :

	[acc] fix missed call flag check macro
	(cherry picked from commit 5b9006874ab0afd02d70a5317446220002c47449)

	Conflicts:
		modules/acc/acc_logic.c


2016-08-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2f4d016] :

	Do not delete any internal AVP if "C" flag is used.
	When calling do_routing() with "C" flag (only check the prefix, without actually doing any routing), do not remove any AVP (in the beginning) as we do not add any (after prefix matching) -> no adding, so no deleting.
	This allows you to safely call do_routing("C") while looping throuhg the GWs of another do_routing().
	(cherry picked from commit 8fcc77cb87ba76e831466fb0a3da90eb556671d8)


2016-08-09  Liviu Chircu  <liviu at opensips dot org>
	* [0a60671] :

	drouting: Fix docs
	Thanks to Richard Robson for reporting
	(cherry picked from commit 058991d7806c047e42d78ece45577f5dc2929634)


2016-08-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e7319c1] :

	Fix bug in evaluating the port spec in lb_count_call


2016-08-02  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [2b79d96] :

	Merge pull request #937 from was4444/1.11
	fix: pthread_mutex should be process-shared
	(cherry picked from commit 97cd5c481bfd9dca4fff941cc86a497d35474704)


2016-08-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2e60179] :

	Removes docs for old MI function
	"profile_bin_status" was removed when dialog module was migrated to clusterer
	Credits to Sebastien Couture (@sysreq0) for reporting
	Closes #939.


2016-07-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3fab95a] :

	Remove unnecessary test.
	"res" cannot be null at that point
	(cherry picked from commit 0b60681f0cc08ffd13fbac3dc5cbde17904ad177)


2016-07-22  Ozzyboshi  <gun101 at email dot it>
	* [9568db8] :

	Fixed memory leak on modules/drouting/drouting.c
	This leak occures in function get_group_id() when do_routing is called without parameters in opensips.cfg.
	In this case the dr_default_grp variable is not equal -1 and 'return dr_default_grp' is executed without freeing the res variable previously allocated for query execution.
	(cherry picked from commit 65739943151f08aee18a7bc2125c7ac90ee84d00)


2016-07-20  Razvan Crainea  <razvan at opensips dot org>
	* [f090238] :

	Update ChangeLog for 2.2.1

=========================== Release 2.2.1 ==============================

2016-07-20  Razvan Crainea  <razvan at opensips dot org>
	* [e626dd1] :

	update version to 2.2.1


2016-07-18  Razvan Crainea  <razvan at opensips dot org>
	* [e99b2cc] :

	permissions: allow any supported protocol
	Before this commit, the protocol check was hardcoded in the module. This
	commit allows to add in the permissions table any transport protocol
	supported.

	Thanks go to Kirill Galinurov for reporting this!
	(cherry picked from commit 0eecff942dc3700e008a9941ac406a565325ef89)


2016-07-15  Liviu Chircu  <liviu at opensips dot org>
	* [97438ac] :

	rest_client: Fix incorrect trim operation
	(cherry picked from commit d8bf10da34152612e7835a64cedbb7593b8fc57b)


2016-07-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9f79778] :

	Fix building Via Branch in stateless mode
	Instead of copying the branch value from a previous statefull Via header (which may lead to overflow as OpenSIPS has a maximum value for the built branch), we generate a new branch value based on the previous Via branch - in this way, we have full controll over the length of the resulting Branch and we also inherit the uniqueness of the branch value (from the prev Via hdr).

	Reported by Gupta, Rahul and Elliott, Ray
	(cherry picked from commit 482e643469b351d12418ff54c96beee7b27dca94)


2016-07-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [09ddd52] :

	Fix advertised port and address per branch.
	Before the advertised_port/address are preserved only in the UAS part of the transaction - that means it is only one value and it is from the setting done in Request Route; whatever later setting done in Failure Route or Branch Route are not preserved at transaction level (even if they are used on the spot, for sending out the INVITE).
	So, when we have to build a local request (ACK or CANCEL), we do not remember which specific address/port were advertised for that particular UAC (branch).

	Fixes #917.
	(cherry picked from commit eb850a22f0af83bf75e75dfadbe1320e8b92784b)


2016-07-12  Razvan Crainea  <razvan at opensips dot org>
	* [b40035e] :

	add debian packaging for proto_wss, proto_tls and tls_mgm
	Reported by Rik Broers
	Close #931


2016-07-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [59011d5] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 7fa9cee5037af26fd1c63b70710f2bc03e6a31f4)


2016-07-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [67f4e25] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 97f309c34c7333270a3f0f997868bdb9b94107f1)


2016-07-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [10c2016] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 0495faa7d96f92da13102480ca43cd1befd37ba0)


2016-07-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [04f54fc] :

	[acc][bugfix] check if database loaded before using its handler
	(cherry picked from commit 8dd10d85b408947576223e75a67228ed7c7abd91)


2016-07-08  Razvan Crainea  <razvan at opensips dot org>
	* [24274b5] :

	dialog: advance to next cell in case of error
	(cherry picked from commit 70db2cfcdb0c74e6437db2aa9663fd0a5000ecdd)


2016-07-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eb02211] :

	Fix error message when a route is not defined.
	Print the name of the route too - the ID is irrelevant for the script writter.
	(cherry picked from commit 409481818148d7951e1520c9dd4eb715c2bec7c6)


2016-07-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a85f454] :

	Fixed compiling on arm6 with fastlocks
	Partial revert of 058e16 as we need some extra asm code for fast locking on arm6.
	See #923
	Closes #912
	(cherry picked from commit a69c32877b99fbd6eef736eff58c9b6ed8228166)


2016-07-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7c3afa2] :

	Fix script varibles for providing port and proto (as part of SIP URI).
	If the SIP URI does not have an explicit port or proto, determine the default port/proto in a SIP wise manner (rather than returning 5060 / UDP) (Ex: sip:example.com;transport=tls has default port 5061 and not 5060 ; or sips:example.com has default proto TLS and not UDP).

	Affected variables are $dp, $rp, $op and $dP, $rP, $oP
	(cherry picked from commit 6cc850e34dcd022f1ed354bd50d9a1809518fa1f)


2016-07-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2ea5754] :

	[db_sqlite] remove unnecessary file introduced in commit ccda718
	(cherry picked from commit 450265ff4032e4d316d21fa6890946bed2866f87)


2016-07-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ccda718] :

	[db_sqlite] fix memory management bugs
	* core free function was used to free starting with commit 980f15ec
	which was not freeing the memory correctly(result rows were
	allocated all at once, but in the current version they were freed
	once at a time);
	* check if memory is allocated to prevent core dumps;
	(cherry picked from commit bb506d2563c2670094537e70cc35b85d4ce4cd80)


2016-07-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5cbe3fa] :

	fix core database engine bug introduced with commit 980f15ec
	(cherry picked from commit db37c5c411b529acd0cfeee4dfbc7925db6c2901)


2016-07-04  Liviu Chircu  <liviu at opensips dot org>
	* [4da1a06] :

	acc: Fix incorrect Request-URI handling
	If the config script does not include any Request-URI altering logic
	(e.g. no lookup() or $ru manipulation), the acc module would incorrectly fill
	in a "msg->new_uri" field which should NOT be freed into the SIP request
	structure, leading to the memory pool being corrupted upon transaction release.

	Credits to Guillaume Lacroix for reporting
	(cherry picked from commit 02cb9f048d0a5e1f988aa9ccae1691216ed16ee5)


2016-07-04  Razvan Crainea  <razvan at opensips dot org>
	* [57586d7] :

	permissions: fix get_source_group() return
	In case a group is not found, return -1 instead of true


2016-06-30  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4482329] :

	[sqlite] fix warning
	(cherry picked from commit 0b4cbaa41c7f9beb9f2f2c72807781b148b9877a)


2016-06-30  ionutrazvanionita  <ionutionita at opensips dot org>
	* [db06d61] :

	[db_sqlite] add explanation about implementation
	(cherry picked from commit 3ab8237c481f1977d59613b356d03980e6dc2271)


2016-06-30  Jarrod Baumann  <j at rrod dot org>
	* [db80f6a] :

	[db_sqlite] use DB_STRING type when the column value type is DB_STRING
	(cherry picked from commit a2c799451f3466ccd5239ca3cba408153d8ff35a)

	Conflicts:
		modules/db_sqlite/row.c


2016-06-30  Ionut Ionita  <ionutionita at opensips dot org>
	* [308ff0d] :

	Merge pull request #919 from Danfx/2.2
	Fix memory leak: after sqlite prepare was deleted stmt compiled, free…


2016-06-29  Daniel Fussia  <daniell at inatel dot br>
	* [eea7194] :

	Fix memory leak: after sqlite prepare was deleted stmt compiled, freed error message after sqlite exec, allocated rows was set to free and it also db_free_row was repaired.


2016-06-29  Liviu Chircu  <liviu at opensips dot org>
	* [d8c4b2a] :

	module statistics: Properly update the "real_used" memory stat
	(cherry picked from commit bc3404302d72f484206bfd3a620690f5c2bf6133)


2016-06-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d835721] :

	[siptrace][bugfix] fix bad macro in siptrace(trace local ip logic)
	This commit closes #916
	Thanks to @Tinet-AaronAn for reporting the issue
	(cherry picked from commit 2a4f686d4997b814eeaa425dc23fe822cb8ef91a)


2016-06-25  Liviu Chircu  <liviu at opensips dot org>
	* [0c709f9] :

	Fix compiler warning
	Using gcc 4.8.4, we would get:

	net/trans.c:43:2: warning: missing initializer for field ‘name’ of
	‘struct proto_info’ [-Wmissing-field-initializers]
	  { }, /* PROTO_NONE */
	    ^
	(cherry picked from commit 376579fa53abb6fc16de76a3070d082c9d958165)


2016-06-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8f54897] :

	Fix dialplan module when using db_text backend.
	The db_text makes no difference between NULL or "empty string" values in DB -> both are internally translated as NULL . The dialplan module, in a very abusive way, forces "not null" (in DB schema and in the code for data validation) even for columns that are optional (like subst_exp, repl_exp, timerec and attrs). Besides being bogus (if a column is not to be used, you have to set it to empty string rather than let it NULL), it makes impossible the usage of db_text with dialplan.
	This fix allows (DB and code) the mentioned DB columns to be also NULL.
	The change is backward compatible, it should not break any existing usage of the dialplan module.


2016-06-24  Razvan Crainea  <razvan at opensips dot org>
	* [d0183af] :

	Allow proto modules to populate its name
	(cherry picked from commit 00d052c18bd663e24769b7198a24aefbcd1963dc)


2016-06-24  Razvan Crainea  <razvan at opensips dot org>
	* [cb8f5d7] :

	proto: always populate default values for protocols name and port
	This allows you to print the protocol you received, and its associated port
	(cherry picked from commit 0ae5ba280618e076a7ba658d15db32b877b55442)


2016-06-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [055172e] :

	Merge branch '2.2' of github.com:OpenSIPS/opensips into 2.2


2016-06-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2fac489] :

	Fix wrong number of columns when preloading via a DB backend without Fetch support.


2016-06-23  Razvan Crainea  <razvan at opensips dot org>
	* [bb8bd33] :

	init: use the specified CFGFILE in debian init
	In case the CFGFILE changes in the init script, opensips will still start with
	the compiled file instead of the one configured
	(cherry picked from commit 030efef84d240646ed8e99616b8a6eb64f7d17d2)


2016-06-17  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c1aa55e] :

	[sqlite][bugfix] free column names when freeing the result
	(cherry picked from commit cf380773cec9f91ad08e343c03261154dabc36a5)


2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [37c46b8] :

	Update packaging to 2.2.0


2016-06-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [968a8a8] :

	Fix proper testing of context content
	If a STR is register to the context, a valid STR * will be always returned , so we need to test the content, not the pointer.


2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [c6dddd0] :

	rtpproxy: no need to update the len for IPv6
	(cherry picked from commit 5cfd916ca41ed60c9997f95d05694c9083b743b1)


2016-06-17  davesidwell  <davesidwell at users.noreply.github dot com>
	* [fd3841d] :

	Update rtpproxy.c
	When moving stored parameters from Branch AVP to Dialog variable, make sure that the integer value "setid" is handled correctly so that it remains valid for the remainder of the dialog.
	(cherry picked from commit e267e9eb83e2345ca716b897975c2fbfbb4e75ce)


2016-06-17  davesidwell  <davesidwell at users.noreply.github dot com>
	* [503f127] :

	Update rtpproxy.c
	When building I/O vector for command to rtpproxy in "force_rtp_proxy_body", after an IPv6 address is detected and the "6" option is added, increase the length component in the I/O vector so it is passed correctly.
	(cherry picked from commit 4e73871adba3f48b67a9ebbf20a2d9c60b823be8)


2016-06-16  Andrey Vorobiev  <andrey.vorobiev at mind dot com>
	* [20aea65] :

	Add support for SIP URIs without user part in 'avpops' module.
	This module provides a set of avp_db_xxx functions which take pseudo
	var and flag as first argument. Flag can be one of username, domain,
	uri or uuid. Previosly avp_db_xxx functions used to return an error if
	flag has been set to username, domain or uri and specifed pseudo var
	did not contain username and host after parsing as SIP URI. This
	behaviour seems to be strange because if flag is being set to
	domain/username and sip URI contains domain/username we can still
	load/store/delete this variable.
	(cherry picked from commit 459f2e90ed277a0371a3325b27038213c5083e8c)


2016-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [04945d2] :

	Fixed failure to enable NAT pinging.
	Commit 8f0c677 introduces a bug in testing is usrloc domains are available, and if not, to disable the NAT pinging in nathelper. The test is wrong as it is done in mod_init, while registrar module registerd the usrloc domain via fixup function, after the mod_init section.

	Reported by Nick Altmann
	(cherry picked from commit f150fb75611a6e61eabc134f266064bd23f1c850)


2016-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e690461] :

	Fix memory corruption on $stat() vars
	The $stat() var specs are kept in pkg, while the name (if stat not found) is kept in memeory. This means all the copies (form all procs) of the specs will point to a single shm block. It is not safet to free this block as you have no idea how many copies of the spec (from other processes) still refer the name.
	Closes #902
	(cherry picked from commit 4baead765179f6bfbc098b3e59791d7bbc4a8d42)


2016-06-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a0cf37a] :

	[acc][bugfix] enable acc flags refcount only after dlg callbacks called
	(cherry picked from commit a9a8fba51da95d3244ab46e22b3ed6cd8d0bea9e)


2016-06-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4357fe8] :

	Fix docs on missing module dependency.
	If replicate_contacts_to parameter is turned on, usrloc depends on the clusterer module.
	Credits go to Sammy on mailing list.
	(cherry picked from commit 735958d87fe73a823a83847bf0d3e822c60aa515)


2016-06-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9512363] :

	Fixed forcing FAST LOCKS for arm6.
	Use FAST locking support for arm6 too.
	For Linux, use POSIX as default locking support.
	(cherry picked from commit 058e16f2a76df9be4e48fa6866b096502981d530)


2016-06-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d090114] :

	Fixed migration of Call Center tables
	Reported by John Quick.


2016-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [28c1946] :

	Fix evaluating the SIP port from a SIP URI.
	Use the new function get_uri_port() to evaluate the port and proto, in a SIP wise manner, form a SIP URI. If port/proto are not explicitly set in the URI, consider the default port for the used transpor proto. If protocol misses, we assume the default protos according to the URI schema.

	NOTE: it is completly bogus (and dangerous) to assue 5061 if SIPS schema is used as:
	1) SIPS can use used with WSS, which actually has 443 port
	2) TLS can pe required via transport param in a SIP schema URI too
	(cherry picked from commit 4c54bcd8bf0426f899b82505e493c97ef5378c79)


2016-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [96cd9c5] :

	Consider WSS also a SIPS protocol
	Reported by Varghese Paul ( @varghesepaul )
	Closing #899.
	(cherry picked from commit 39e0debef3174fab9fd2445e57a265ff5394eb1c)


2016-06-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b9171c5] :

	[mi_xmlrpc_ng] fix fault incompatibilities with xmlrpc standard
	(cherry picked from commit d57c2fd7b20cf85a897d36d23e47df440fb3321c)


2016-06-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [8ef8d79] :

	Removed compilation warning
	implicit declaration of function â"sched_yield" [-Wimplicit-function-declaration]


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0e1cea7] :

	Removed wrong "NOT NULL" constraint over the contact DB fields
	The code actually handles the case of NULL callee / caller contacts, so DB must allow NULL values.


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [001c2a8] :

	Removed unused "error" jump label
	(cherry picked from commit 5819b0fa7033bf2a6daef824bc21dd4ba497ae1b)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eb11687] :

	Fix error handling in DB writes.
	If inserting/updating a dlg record in DB fails, do not exit with error, but continue with the rest of the dialogs.
	Credits for finding and reporting this go to Rik Broers @ Motto
	(cherry picked from commit 0ca6cf035471fc010366e4d29ced5d6fd63199ab)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8f0c677] :

	Proper handle the case of no usrloc domain registered.
	Prevent get_next_udomain() crashing if there are no usrloc domains registered (reported by Qasim Akhan on users mailing list.
	Do not enable the pinging support in nathelper if usrloc has no registered domains.


2016-06-01  Liviu Chircu  <liviu at opensips dot org>
	* [29995e4] :

	load_balancer: Fix a possible crash
	Could have led to a segfault when OpenSIPS would run oom

	Reported by Qasim Khan
	(cherry picked from commit 4081fa349eeb1d3836186bfb0a56c41e7081c330)


2016-06-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0269b44] :

	Fix documentation on former b2bl_key_avp module param
	(cherry picked from commit ca21c6d2871e01d093c69371ddcc204c5af0355a)


2016-05-30  Razvan Crainea  <razvan at opensips dot org>
	* [086cd47] :

	sync changelog for latest 2.2.0

=========================== Release 2.2.0 ==============================

2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f595cf4] :

	Fixed interface matching in loose_route()
	If port is missing in Route URI, do not assume default 5060, but consider the schema and protocol (they may require a different default port).
	Ex: sip:10.0.0.5;transport=tls was previously handled as sip:10.0.0.5:5060;transport=tls, which is wrong as the default TLS port is 5061
	Reported on mailing list by Ravitez Dondeti.
	(cherry picked from commit 3593a5f5b2e012154b1c9a00e1645c67c5ece91c)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ff237c8] :

	If POSIX sems are used, be sure to link against pthread lib
	(cherry picked from commit f7de6406056cbae95ba9f7521d822d280afbe6a2)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [77701c4] :

	Fixed proper cleanup on failure of tcpconn_new()
	The chances for going for error cases are very low, still let's do it in the proper way
	(cherry picked from commit 57c163b1b7680d3cc01227dbca7676e532aa7539)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5cc7999] :

	Disable QM and DBG for memory manager.


2016-05-27  Razvan Crainea  <razvan at opensips dot org>
	* [a26b0a3] :

	Update ChangeLog with latest changes


2016-05-27  Razvan Crainea  <razvan at opensips dot org>
	* [5e87139] :

	promote 2.2.0-rc2 to stable


2016-05-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e432851] :

	[acc] fix double free issue for multiple dlg callbacks
		The last byte in acc flag mask now holds a ref counter in
	the last byte. The counter is increased each time a dialog callback
	is invoked, and decreased for each free function corresponding to
	a callback. When the ref counter reaches 0, flags can be freed.
	The atomicity of the ref counter is based on the fact that
	dialog callbacks and their free functions are called sequentially,
	one after the other.
	ACC_DIALOG_CONTEXT and ACC_CDR_REGISTERED flags where moved in the
	7th byte of the flags.
	(cherry picked from commit 7834aa5d86187c5fda416fb2763510a015da351a)


2016-05-27  Vlad Paiu  <vladpaiu at opensips dot org>
	* [7a846e9] :

	Link the dialog cell into internally generated requests from the dialog module
	Fixes #839
	(cherry picked from commit 66937a2834d5680031f81c881719b43018fa06ad)


2016-05-27  Razvan Crainea  <razvan at opensips dot org>
	* [e8beb7b] :

	add license to rw_locking.h header
	(cherry picked from commit e3a57ac953259a0254a07198aabc88eaac9da9c2)


2016-05-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cad565d] :

	Fixed missing MI reply on pua_publish.
	Properly send an MI reply for the async pua_publish with Expires 0.
	Many thanks to Damien Sandrs for invetigating and reporting.

	Closing #657
	(cherry picked from commit 60d01efe811ac7eeaa063032a309b1895c59e92f)


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [e98d96a] :

	Improve error reporting for unknown script vars
	Fixes #574
	(cherry picked from commit 97ace293dd4c7eb2fe8cd8fbee693455a5737861)


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [f210f84] :

	clusterer: proper translation to bigint for dbtext
	This creates the proper type for bigint in the clusterer table for dbtext

	Thanks go to Trevor Francis from 46Labs for reporting this
	Close #699
	(cherry picked from commit 5bae37316277f8fa31659c5e334e47f0ca3b78ab)


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [1bfd454] :

	dbtext: convert DBG to ERR for better debugging
	(cherry picked from commit 0f08b26e40b31bb8af325ba62cfa32676c62ae86)


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [270b757] :

	dialplan: Improve documentation
	Added paragraphs regarding rule types along with explanations on
	they way priorities and rule tie-breaking work.
	(cherry picked from commit 46894f819d1d7d6092129b334e33956e89e5d4ea)


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [6d74ed1] :

	Update makefile to support gcc 6.1


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [4dd88e8] :

	dialplan: Fix a rule tie-breaking bug
	When an input string would match both a "string" rule and a "regex"
	rule, the priority based tie-breaking was incorrect (now favouring
	the bigger priority instead - opposite to default module behavior).

	Thanks to @paolodepa for suggesting this fix
	Fixes issue #696
	(cherry picked from commit cbdd79ab3f6d772c6ef1fb7afc44990e9cad294e)


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [fe5a869] :

	acc: properly detect parsing errors
	(cherry picked from commit d6a44c0e77216f2b22aefdcffebd808374a9be85)


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [eda5580] :

	acc: Remove deprecated modparam dependency
	(cherry picked from commit d983d2875ef5dbbbffcdc62855f49b0cf3994459)


2016-05-25  Razvan Crainea  <razvan at opensips dot org>
	* [109a89f] :

	call_center: obey lock_set interface


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ffad254] :

	Fix warning in SYSTEM V locking functions
	(cherry picked from commit 53b3f402a4d9fb0ff1ba30288d810d41d6b55b1b)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [08fe6f5] :

	Fix bogus set locking functions.
	It is used for SYSTEM V locking only, looks like a copy'n'paste error.
	(cherry picked from commit 4bcdf4e6aee07ef965f6ae573b289f3fd082fdde)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [952f652] :

	Proper support for USE_POSIX_SEM option in Makefile
	(cherry picked from commit 5e40aaf9c3ed8ab4381d847f6a1f6a01a8113bf7)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9bb5e71] :

	Fix bogus destroy of a RW lock.
	(cherry picked from commit 83f394579a88a6a9185342cf5f92401ef5c18e5a)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a3887b5] :

	Obey USE_SYSV_SEM and USE_PTHREAD_MUTEX.
	If USE_SYSV_SEM or USE_PTHREAD_MUTEX are defined via Makefile.conf, do you force autodetection (based on arch type) of the locking support.
	(cherry picked from commit 39592dc9f25ecee982156e365d160642bdde48e8)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e06048f] :

	Fixed typo
	(cherry picked from commit 1503ca6f2311cd635f4732d180d670eae04ac466)


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [8239ff1] :

	mi_xmlrpc_ng: Remove an incorrect free operation
	Completes commit d047e109
	(cherry picked from commit 99f039e37cd79621b2dcc2b5ec2decc9e7c39670)


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [bde14cd] :

	mi_xmlrpc_ng: Fix NULL pointer dereference
	Any MI tree with a topmost Array structure would have caused a crash
	(cherry picked from commit 555fb8a3cc91ffc48ae6629a47936391cfe6b2bc)


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [638e5d5] :

	mi_xmlrpc_ng: Fix a shared memory leak
	(cherry picked from commit d047e1096e2f6624f776d9a031f92be3cc9a0a0d)


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [bc5f651] :

	TCP alias lookup: Add matching by transport
	Further improving commit 13970bb.
	(cherry picked from commit ea699f0116a28cd03a0d1ff50da3fc6045ac3da5)


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [1a93613] :

	TCP connection lookup: Add matching by transport
	The fact that all currently supported TCP-oriented protocols have different
	standard ports is not an excuse for not including the transport into the
	match condition (i.e. dest IP address + dest port + dest transport).

	This may very well prevent issues with messages being sent out over the
	wrong TCP connection in a number of scenarios where we employ TCP connection
	reusage over both plain TCP and TLS with a Proxy that specifies the same port
	in the topmost Via header when it establishes each of the two connections.
	(cherry picked from commit 13970bb65253f1b35156466c6f514a4c520d8893)


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [bc996b4] :

	Revert "Accept TCP aliases by default"
	This reverts commit d62bc967b0d6784d2baced88b895da57f3f4ab9a.

	Firstly, TCP connection reusage (RFC 5923) should only be employed between
	TLS endpoints - only TLS allows the endpoints to authenticate each other
	during connection setup, preventing unauthorized connection hijacking.

	Secondly, aside from any security considerations, RFC 5923 must
	not be employed fanatically (Proxy-Proxy, Edge-UA, UA-Proxy) on any TCP
	connection (especially disregarding the ";alias" Via parameter!), but
	rather only between adjacent SIP entities who can both initiate a
	connection towards each other, and also support the RFC. In the real
	world, we're basically only talking about the Proxy-Proxy usage case, as
	any SIP UA scenario will most likely involve some form of NAT and a
	Proxy that cannot open connections backwards, towards the UA. In these
	cases, TCP connection reusage is _completely_ out of the question, as a
	single UA might end up receiving all calls of all users behind their
	public IP.

	Thanks to Jonas Borjesson for reporting the problem in the first place.
	(cherry picked from commit 715339fdd25bc74797e6f978d164eb0c4d5669ce)


2016-05-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4beba6d] :

	[mmgeoip] allow chosing memory caching type
		Before GEOIP_MMAP_CACHE was used causing a segmentation
	fault when database file was changed. Now users can choose between
	reading the database directly from file, cahing it into memory with
	the possibility to change the database file at runtime.
	(cherry picked from commit ecf5032aaafbe5a93bbfc3562c4b3358548839e7)


2016-05-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [71b5274] :

	Fix potential 100 Trying duplicates.
	Added the "auto_100trying" module parameter to allow the script writter to take control (from script level) over when the 100 Trying reply is to be sent back.
	By default, the reply is automatically generated when the INVITE transaction is created.
	Fixes #833
	(cherry picked from commit b023c93a8c476e70b1550da4f46c91d6e2679442)


2016-05-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c5bb0d0] :

	Added extra log message on openssl 1.0.1e-fips bug.
	If CRYPTO_set_mem_functions() fails, make a note on the openssl 1.0.1e-fips bug, so users may have a hint on the actual issue.
	See more  #834.
	Closes  #834.



2016-05-20  Razvan Crainea  <razvan at opensips dot org>
	* [0668ec7] :

	Upgrade to release candidate 2


2016-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [dc77cfd] :

	Fix invalid memory access with async MySQL queries
	Due to the way the libmysqlclient query result strings were managed,
	they would be freed by the library before OpenSIPS would copy them
	into the output AVPs.

	This patch fixes the issue by adding a new DB API function which handles
	the cleanup of async query results.

	Reported by Ovidiu Sas
	Addresses issue #873
	(cherry picked from commit 177c60a0e13471a87d80f21504894b883038ffa4)


2016-05-20  Razvan Crainea  <razvan at opensips dot org>
	* [a080811] :

	th: fix dlg flag check
	(cherry picked from commit 1b5802d2e4876e0d63eeeec5a6edcb7a2321e9d0)


2016-05-20  Razvan Crainea  <razvan at opensips dot org>
	* [1dd0afb] :

	re-register topo hiding callbacks after restart
	Thanks to Pete Kelly for reporting this
	(cherry picked from commit 4c84bd84ad67e71f174b3297ff3432ca21bafab4)


2016-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [0e22144] :

	clusterer: Fix bad doc example
	Reported by "alias_neo" on IRC
	(cherry picked from commit fd0ddaa8587c38dda74a5f0e853a283724281252)


2016-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [3d91ab1] :

	Fix a string concatenation operator bug
	This patch fixes an issue with string concatenation where any NULL
	operand would cause all operands to its left to be ignored when
	computing the result of the expression.

	Reported by Ovidiu Sas
	Closes #870
	(cherry picked from commit a420752f436a1f952c255df8d5dbe9ea59b0d653)


2016-05-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [0fa379c] :

	Process sequential messages received in CONFIRMED_NA state
	Due to UDP race conditions, sequential messages may be received
	before the ACK confirming the initial INVITE ( eg. Re-INVITE sent
	immediately as the call is established in order to force
	a specific codec ) - also push these requests through the whole
	dialog processing in order to avoid any future issues ( eg. CSEQ
	updating which, if left unprocessed, will lead to generating out
	of order sequentials by OpenSIPS )
	(cherry picked from commit bfaf02242a98c464dfbdcd3c3ebf3fbb555bcc47)


2016-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [21ad02f] :

	Fix bogus timer ref counter during expire update.
	Many thanks to Trevor Francis for reporting and helping with troubleshooting and testing.
	(cherry picked from commit 047b1b3e32a9af30dd44f2487460975ed7b3a815)


2016-05-19  ionutrazvanionita  <ionutionita at opensips dot org>
	* [dea3a12] :

	[dispatcher] multiple fixes
	* use pkg memory instead of shm for fixup variables
	* fix int list building - avoid building a circular list


2016-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a41b6c4] :

	Fixed preserving 3xx Contacts in TH without dialog
	Reported by Pete Kelly.
	Closes #656.
	(cherry picked from commit 6184b96c94d0fcc298dbe5bce1cd0ca9fb0445d3)


2016-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8ae32d8] :

	[mi_xmlrpc] return code rework for errors
	Mi_xmlrpc_ng now returns only 200 OK as HTTP code. We have two
	labels for inspecting mi level faults, "code" for the error code
	and "message" for the error message. Check
	http://www.tutorialspoint.com/xml-rpc/xml_rpc_fault.htm for
	more details.
	(cherry picked from commit 2bb871d0e77a739aac310235a1d042f3241d02e0)


2016-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [24d63b6] :

	[mi_json] minor fixes in mi_json
	(cherry picked from commit c091d068768d76fe34ea67ebb010b30082d55ca5)


2016-05-18  Liviu Chircu  <liviu at opensips dot org>
	* [cf7b16f] :

	usrloc: Fix some uninitialized memory issues
	Reported by Minh Phan
	Closes #878
	(cherry picked from commit 38f525d14ab03df94cf5194cd60543636d1d73b3)


2016-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4a086b6] :

	[mi_json] return jsonrpc compliat error message
	(cherry picked from commit 26a66f6aa2fb957a16ed000cc10360bf5f648e18)


2016-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [841343b] :

	[mi_json] remove double inverted commas for internal error messages
	(cherry picked from commit b5a51a964ee1658f41ad435190b14f82edfedffd)


2016-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [07dbc08] :

	[mi_json] return code rework for errors
		Mi_json now returns only 200 OK as HTTP code. We have two
	records for inspecting mi level errors, "code" for the error code
	and "reason" for the error message.
	(cherry picked from commit 644ea2938f4a8b3f3a25aff1529374f9dfc68ae0)


2016-05-18  Razvan Crainea  <razvan at opensips dot org>
	* [6a22f40] :

	nathelper: ping WSS clients when using natping_tcp
	See ticket #875
	(cherry picked from commit 54a306ae68c6ccb30caff0eb470a40517a687827)


2016-05-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [515484f] :

	Fixed bogus memory operations.
	Fixed bogus free (of uninit pointer) if parse_contact() fails
	Fixed shm leak on errors after print_rr_body
	Fixed shm leak on success if record_route is present.
	Reported by John Nash.
	(cherry picked from commit 4b0fca533cd7be4a45c1381c78f2b37aaba6152b)


2016-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f8a3a1d] :

	[sipcapture] fix possible data type loss
	(cherry picked from commit 1c811ceb987b678e81af6b7669b219adf15250a1)


2016-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [aeed4cb] :

	[sipcapture] fix bad time calculation
	(cherry picked from commit d54dc2d0234825a92497fea1c3df08eec4afac83)


2016-05-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eff04e0] :

	[dispatcher] fix double allocation issue
	(cherry picked from commit d6891363e3b3b4047a1948eb03fb6b6bab285885)


2016-05-09  Razvan Crainea  <razvan at opensips dot org>
	* [3ca4bfb] :

	Update ChangeLog for 2.2.0-rc1


2016-05-09  Razvan Crainea  <razvan at opensips dot org>
	* [7e7a2df] :

	Update name to opensips-2.2.0-rc1


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3c75721] :

	[nathelper] fix bad logic regarding the timer list
	(cherry picked from commit a86d2c4edcf9c62778a2a9d2438d57fac869bc10)


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2330afa] :

	[sipcapture] fix sip_capture table schema
	(cherry picked from commit 8fd97163058c798f45d381b124cc465261e9e1e5)


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [22bdc37] :

	[siptrace][bugfix] bad structre used when printing HEP trace_id via mi
	(cherry picked from commit 8c6d9bacb580960f1a0a642a5be5a5ffeb5f958a)


2016-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [cd4101a] :

	event_virtual doc: Fix grammar/typos
	(cherry picked from commit 3fd96863cb611d1eefad3b175535944545253f19)


2016-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [664ec6b] :

	event_flatstore doc: Fix some typos
	(cherry picked from commit 3cedcc4af994aa8ce132547c325c13cbc8d2cd07)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f5753f9] :

	[siptrace] fix hash calculus for extended hep trace_id
	(cherry picked from commit 5e261d7e9f1ea632806370c16cb0f733cee4edfc)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [91c3247] :

	[sipcapture] allow any hep version for hep_net variable
	(cherry picked from commit bcbded5653d5703b53ed4bc961a8a66d724d3e32)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d09775b] :

	[sipcapture] fix new hep proto names string
	(cherry picked from commit 3c15d2d89ec1ab8ad01a2e29a844eb3084128abf)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c939605] :

	[sipcapture][bugfix] fix bad string hex value parsing
	(cherry picked from commit 5d6b927d41988e3170ab37889fb26c8026dce29d)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [454a557] :

	[siptrace][bugfix] fix trace_id parsing
	(cherry picked from commit 2878741afc71620c5910f689c07db38b5003a48c)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ed3f224] :

	[sipcapture][bugfix] invalid static vector size calculation
	(cherry picked from commit b8a82b159d220389513808c8fb8f651fc1498cda)


2016-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [5589ffe] :

	dialog: Remove a chunk of dead code
	(cherry picked from commit fd330577d66de599430694334e8605ae8b46b9d9)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [55f45c4] :

	[sipcapture][bugfix] invalid memory access
	(cherry picked from commit 8056a984ce914d6585aef6054d727d82f72da3c6)


2016-05-04  renicok  <renico.koen at gmail dot com>
	* [f12cf9b] :

	Updated opensipsctl.base to also search /sbin
	The md5 utility is located at /sbin/md5 on FreeBSD 8.3. An additional common location was added to allow the script to accommodate this.
	(cherry picked from commit ca87f55ad071257aa3b891347aadb55a7729d25b)


2016-05-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ef5f3b5] :

	[sipcapture] fix bad conditions
	(cherry picked from commit 4caa2ac37177f2ad59c8f2de23fcc3b12c11fe69)


2016-05-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c24abca] :

	[sipcapture] be able to set proto_type in report capture function
	(cherry picked from commit e3466c4adecf11fa6d7da206359847c3a1c4b0f9)


2016-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [2d4d2ff] :

	ratelimit: initialize the length of the algorithm
	(cherry picked from commit 0eebf1058574c622ba3532fb520908da1c1d94a5)


2016-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [ebaad38] :

	Makefile.conf: add deps for tls_mgm and proto_wss
	This prevents 'make menuconf' from deleting these modules from the generated
	configuration file
	(cherry picked from commit 616b2ba189771a499c76d645627869270555511d)


2016-05-03  Răzvan Crainea  <razvan at opensips dot org>
	* [83a23be] :

	debian: add missing dependency
	Ovewrite lintian warning


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [1e99bb0] :

	dialog and usrloc: broadcast replication data all time
	This prevents clusterer module from marking a node as not reachable when there
	is no traffic at all.

	Fixes #849
	(cherry picked from commit 7f7f8711ccfd0aabb71b124fbb7f4c3e8afd6e37)


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [d02ae4f] :

	regex: fix spell-check in package
	(cherry picked from commit 647ea214f1892f8901f562bc45e0e1e33b699aba)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [30d8048] :

	[acc][bugfix] fix memory leak
	* fix leak caused by missed calls - receiving a negative reply
	caused flags not being freed


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [a1af71c] :

	proto_bin: remove debug INFO message
	(cherry picked from commit d388e804a320aa0f267e47cbcbaf473d519fab31)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4389c26] :

	[siptrace] fix bad cherry-pick conflict solving


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [090525c] :

	[sipcapture] updated docs for HEPVERSION


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e547ec6] :

	[fix functional bug][sipcapture] new HEPVERSION script variable
	(cherry picked from commit 136fcb65edd4ca00cb15f088de3e58f960385518)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a9a9d7f] :

	[proto_hep] correctly name function
	(cherry picked from commit 853b0bbb759d3c58f00b0749e90e4016dd500891)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [608881b] :

	[hep] updated docs for previous commit
	(cherry picked from commit f9c6cdd2acf93062c252f9fc64faa6327e696718)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b2ff3cc] :

	[fix functional bug][hep] multiple versions/protocols can be used in the same time
	Since commit 0873c14d1b81887823242a955217dcc854eb97c9 multiple
	network protocols can be used from one module. Proto_hep was changed
	to be able to use both tcp and udp in the same time. Moreover, there
	is no hep_version needed since we can receive HEPv1,v2 and v3 on any
	UDP interface. Since HEPv1 and v2 are not compatible with TCP, only
	HEPv3 will be support. For HEPv3, Sipcapture module can now relay
	packets from TCP to UDP or the reverse way.
	Siptrace module was also improved. Trace id's can now be defined with
	hep version and transport protocol, in order to be able to do multiple
	types of tracing with different HEP protocols and/or network transports.
	(cherry picked from commit 45a3aef8e151a03966a7739c2f880a3fdb0d6811)

	Conflicts:
		modules/siptrace/siptrace.c


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [5e8f0ac] :

	[fix functional bug]allow a module to register multiple protocols
	(cherry picked from commit 0873c14d1b81887823242a955217dcc854eb97c9)


2016-04-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e82a5b3] :

	[drouting] bug fix and memory leak fix
	* free gateways list for each carrier at reload
	* use map_find instead of map_get to search an element in the tree
	(cherry picked from commit f9f3b83ef621850c2c128b12b9bf6ab2e78e5ee1)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [19421eb] :

	[siptrace][bugfix] use the correct sockaddr structure for storing
	(cherry picked from commit 556f394212bb07c6f7641f3b1df954d52ff730a5)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ba0fcc2] :

	[proto_hep][bugfix] use the correct port when unpacking
	(cherry picked from commit 3dda4131b458bc6f3145196f7661671571dc948e)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c2e8c17] :

	Revert "[hep][bugfix] correctly store ports/addresses"
	This reverts commit 7b1359adfcd55f12fd3739c04e30e1c12b91a71b.
	(cherry picked from commit ab2292945b19f00faa063c457a0efce384b8f245)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4cce28a] :

	[hep][bugfix] correctly store ports/addresses
	(cherry picked from commit 51e6f102daac7d0de9a7ca4efea74d5c559746fe)


2016-04-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [70a3018] :

	Enable debug_mode settings only if debug_mode gets set to enable.
	(cherry picked from commit e7c14bc0c85c888040aec7f0949b085c5cee38e7)


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5c8869b] :

	Avoid space in MI node name


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [555c0e7] :

	Fixed wrong MI tree in clusterer_list (related to previous commit)
	(cherry picked from commit fa4e7f0fa10c6e987b1b69bc5302f0d12a3f8714)


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aa856a7] :

	Fixed arrays in clusterer_list MI command
	(cherry picked from commit 31943a4e2c4ae84babc181f4e5a31e33f2d6b63a)


2016-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0e81a70] :

	[tls_mgm] properly handle SSL_ERROR_SYSCALL on SSL_shutdown
	(cherry picked from commit bdcee39ebf04f8a74b926dc6e6c311487d3ef601)


2016-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [dbdc46c] :

	[siptrace][bugfix] avoid double free on cancelled transaction
	(cherry picked from commit 3c6b6930d615adb978dd2779b6cd4054c3bc49df)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a9b0011] :

	[sipcapture] fix incompatibilities with HOMERv5 db schema
	(cherry picked from commit f75687847a142f18b44c49a0b274457d7039f165)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [85b126a] :

	[sipcapture] remove time-consuming unnecessary chunk of code
	(cherry picked from commit cc7a2ea114444b82645e484a1cf728c4464c17dd)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d49afa6] :

	[proto_hep][bugfix] fix bad sip payload size calculation
	(cherry picked from commit eec5045d44ec1fc29aba9a6d5d024e38ace10ae1)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e6258da] :

	[acc][bugfix] correctly store do_accounting() flags
		Flags are now moved from processing context into
	transaction context when the transaction is created, this way
	having visibility for the whole transaction.
	(cherry picked from commit 41bcd2559b29a23e96636c6c2dfc5628f69ae5b7)


2016-04-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [507db77] :

	Fixed MI nodes in 'sip_trace' command.
	Formatting chars must not be included in the MI tree
	(cherry picked from commit 7811e2d6b6013fe21c744531299f490671462a05)


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0a1fc05] :

	Fixed default FIFO file name
	(cherry picked from commit ffdbb970bfa60dcd1ed7d88fc94c4a07f9356ad9)


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b7ac4fc] :

	exclude proto_wss, use QM_MALLOC


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7aef53c] :

	tls_list() may be called even without DB support
	Avoid locking if DB support was not enabled.
	(cherry picked from commit e6944bb064750611585d0fa516551b944aa44cdc)


2016-04-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eee4fae] :

	[proto_hep][bugfix] check memory allocation
	(cherry picked from commit f5ad753d56a95d68bc937e0721895d6ee4aefd43)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [21ca280] :

	[siptrace][bugfix] sequential requests - set context for sl callbacks
	(cherry picked from commit 943d9015f8f1e3467acafee67693f157beab9755)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6ce202a] :

	[context][bugfix] each context has its own destroy functions vector
	Credits to Razvan Crainea
	(cherry picked from commit 53263b2a65dc771cb660078f4b20171a48f04248)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [576a730] :

	[tm]fix context functions header
	(cherry picked from commit 59e5a4165f88c2a4a4dbb5e159786c441f6fa502)


2016-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [4cd99ec] :

	MI library: Add comments regarding a known issue
	Currently, MI arrays cannot contain objects with non-identical
	"name" attributes.

	This patch also quickfixes this issue in mi_list_all_profiles() by dropping
	the array idea altogether, in favour of a top-most object.
	(cherry picked from commit 6c105015c3a0a02c6f65822f5ce52e12bd0ae108)


2016-04-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [134ad0d] :

	Fixed bogus pkg_free on pointer in data segment
	Reported by @dzhou121
	Closes #854
	(cherry picked from commit b9aa87360eecf1e77baea661b855eec4f5798f2f)


2016-04-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [afc4c40] :

	Fix typo in do_accounting() naming is cfg templates
	(cherry picked from commit 7f8656e026435bf4ac6eff19b964b81d7a37d28e)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b65c6c2] :

	[sipcapture][HOMERv5 incompatibility fix] updated docs for report_capture and new table name format
	(cherry picked from commit 5d725a42d0262807dd9a2c555640a980e50381ce)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [acd0a9c] :

	[sipcapture][HOMERv5 incompatibility fix]generic capturing function
	      Added new function called report_capture which allows
	capturing hep packets in a generic format. It will be very
	effective for the third version of the hep protocol for capturing
	packets other than SIP. Also added a new table called rtcp_capture
	for storing everything capture with report capture.
	(cherry picked from commit c5700cce4a37e484869941502e495733b8138b98)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3053c7e] :

	 [sipcapture][HOMERv5 incompatibility fix] HOMERv5 table rotation aware logic
	    * HOMVERv5 allows rotating tables by having a prefix which is
	    the fixed table name and a suffix which is a string containig
	    timestamps
	    * sip_capture now accepts table name as a parameter to sip_capture()
	    function
	    * both global table name and sip_capture table_name can have
	    a prefix(string) and a suffix(strftime format string);
	    * fixed bugs in async query building
	(cherry picked from commit 074463f17f2e57fb15c120f306ce895438ad1865)


2016-04-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e894f7a] :

	[acc][bugfix] register tm free function only once
	(cherry picked from commit 92d20416568c23f58f378fd14b272d2b16d7518e)


2016-04-14  Liviu Chircu  <liviu at opensips dot org>
	* [19dca29] :

	Fix a PKG leak in the SIP message processing stack
	Commit 7464a86ec introduced a processing context leak during the
	handling of basically any SIP request in all protocol stacks
	except for HEP.

	Reported by Trevor Francis <trevor@46labs.com>
	(cherry picked from commit 731719a2b10283439e2f6a0ba15bb8c6c6ef189c)


2016-04-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c5c4df0] :

	[acc] fix double free issue
	Since callbacks were registered only at first, and aftewards only
	flags were changed there was no way to know if tm is to free the
	shmed flags from acc or dialog. For this a new flag was introduced
	to indicate whether the flags shall be removed either by dialog or
	tm.
	(cherry picked from commit 6852bd427376cea0cc53cbc5f87476f3377cbd04)


2016-04-12  Liviu Chircu  <liviu at opensips dot org>
	* [9888984] :

	Suppress "no free TCP receiver" logging noise
	This was added long before async TCP support, and it is now
	only useful to developers.
	(cherry picked from commit 142e7e0121040aceb2f9c31c4d4a0e8d8b573cc6)


2016-04-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [7d371ab] :

	pi_http: return "200 OK" instead of "0 Unknown"
	(cherry picked from commit 73f8117f2f5f01560b6698ad845cce0b485df203)


2016-04-07  Kristian Høgh  <kfh at uni-tel dot dk>
	* [423f277] :

	cachedb_redis: Prevent crash when re-connect keeps failing
	(cherry picked from commit b501df74a231a987babe6eeadb3c676d8823619c)


2016-04-05  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [032bb69] :

	Fix missing GPL headers for mem files
	(cherry picked from commit 8ffd592e316a4436e2144dfc08f1b20571e6622e)


2016-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [be22446] :

	Fix typo in README example
	(cherry picked from commit 983ad955e21f57878fcefd61f8a734e89de5eab9)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [836d3b5] :

	[drouting] docs updated for partition id variable
	(cherry picked from commit 2013276a1b1e4a29766f22b5f483eb4ace6a7235)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5689d43] :

	[drouting] check if partition pvar is writable
	(cherry picked from commit cf0945c16eff03efd5ec2b120d283ebc7f4b8616)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7745b11] :

	[drouting] pvar for matched partition if wildcard operator used
	fix missing functionality - return to script the matching partition
	(cherry picked from commit 7551c668972e63970c9a65f7dc5bbd1959100d79)


2016-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4be2662] :

	Fixed checking return code for pre raw callbacks
	If the TH pre raw callbacks fails, it may return a NULL buffer, leading to a later crash when we want to parse the SIP message.


2016-04-04  Jarrod Baumann  <j at rrod dot org>
	* [cf1e11d] :

	[dialog] repl_prof_add never increments the return buffer size for threshold comparison
	(cherry picked from commit 52028bdd2c729904c7e337d7aa0b99cce4195f0c)


2016-04-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bcf7d40] :

	Fix missing logs if debug_mode after log_stderror
	(cherry picked from commit 29182c9baa98a8e156a1c0dd4ceb4992005c7950)


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [2c84108] :

	Various doc improvements
	(cherry picked from commit d9326522ae9c3dc39b8163d07495dc013217ab80)

	Conflicts:
		scripts/opensipsdbctl
		scripts/opensipsdbctl.base


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [7ac6bfc] :

	Update opensipsdbctl for 2.2


2016-03-31  Razvan Crainea  <razvan at opensips dot org>
	* [11877a6] :

	Update ChangeLog


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [c4b48fb] :

	Improve the AUTHORS file
	(cherry picked from commit 32d0e1a4fa500e7693828b3f98392d0502b8b0da)

2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3c75721] :

	[nathelper] fix bad logic regarding the timer list
	(cherry picked from commit a86d2c4edcf9c62778a2a9d2438d57fac869bc10)


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2330afa] :

	[sipcapture] fix sip_capture table schema
	(cherry picked from commit 8fd97163058c798f45d381b124cc465261e9e1e5)


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [22bdc37] :

	[siptrace][bugfix] bad structre used when printing HEP trace_id via mi
	(cherry picked from commit 8c6d9bacb580960f1a0a642a5be5a5ffeb5f958a)


2016-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [cd4101a] :

	event_virtual doc: Fix grammar/typos
	(cherry picked from commit 3fd96863cb611d1eefad3b175535944545253f19)


2016-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [664ec6b] :

	event_flatstore doc: Fix some typos
	(cherry picked from commit 3cedcc4af994aa8ce132547c325c13cbc8d2cd07)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f5753f9] :

	[siptrace] fix hash calculus for extended hep trace_id
	(cherry picked from commit 5e261d7e9f1ea632806370c16cb0f733cee4edfc)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [91c3247] :

	[sipcapture] allow any hep version for hep_net variable
	(cherry picked from commit bcbded5653d5703b53ed4bc961a8a66d724d3e32)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d09775b] :

	[sipcapture] fix new hep proto names string
	(cherry picked from commit 3c15d2d89ec1ab8ad01a2e29a844eb3084128abf)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c939605] :

	[sipcapture][bugfix] fix bad string hex value parsing
	(cherry picked from commit 5d6b927d41988e3170ab37889fb26c8026dce29d)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [454a557] :

	[siptrace][bugfix] fix trace_id parsing
	(cherry picked from commit 2878741afc71620c5910f689c07db38b5003a48c)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ed3f224] :

	[sipcapture][bugfix] invalid static vector size calculation
	(cherry picked from commit b8a82b159d220389513808c8fb8f651fc1498cda)


2016-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [5589ffe] :

	dialog: Remove a chunk of dead code
	(cherry picked from commit fd330577d66de599430694334e8605ae8b46b9d9)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [55f45c4] :

	[sipcapture][bugfix] invalid memory access
	(cherry picked from commit 8056a984ce914d6585aef6054d727d82f72da3c6)


2016-05-04  renicok  <renico.koen at gmail dot com>
	* [f12cf9b] :

	Updated opensipsctl.base to also search /sbin
	The md5 utility is located at /sbin/md5 on FreeBSD 8.3. An additional common location was added to allow the script to accommodate this.
	(cherry picked from commit ca87f55ad071257aa3b891347aadb55a7729d25b)


2016-05-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ef5f3b5] :

	[sipcapture] fix bad conditions
	(cherry picked from commit 4caa2ac37177f2ad59c8f2de23fcc3b12c11fe69)


2016-05-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c24abca] :

	[sipcapture] be able to set proto_type in report capture function
	(cherry picked from commit e3466c4adecf11fa6d7da206359847c3a1c4b0f9)


2016-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [2d4d2ff] :

	ratelimit: initialize the length of the algorithm
	(cherry picked from commit 0eebf1058574c622ba3532fb520908da1c1d94a5)


2016-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [ebaad38] :

	Makefile.conf: add deps for tls_mgm and proto_wss
	This prevents 'make menuconf' from deleting these modules from the generated
	configuration file
	(cherry picked from commit 616b2ba189771a499c76d645627869270555511d)


2016-05-03  Răzvan Crainea  <razvan at opensips dot org>
	* [83a23be] :

	debian: add missing dependency
	Ovewrite lintian warning


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [1e99bb0] :

	dialog and usrloc: broadcast replication data all time
	This prevents clusterer module from marking a node as not reachable when there
	is no traffic at all.

	Fixes #849
	(cherry picked from commit 7f7f8711ccfd0aabb71b124fbb7f4c3e8afd6e37)


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [d02ae4f] :

	regex: fix spell-check in package
	(cherry picked from commit 647ea214f1892f8901f562bc45e0e1e33b699aba)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [30d8048] :

	[acc][bugfix] fix memory leak
	* fix leak caused by missed calls - receiving a negative reply
	caused flags not being freed


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [a1af71c] :

	proto_bin: remove debug INFO message
	(cherry picked from commit d388e804a320aa0f267e47cbcbaf473d519fab31)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4389c26] :

	[siptrace] fix bad cherry-pick conflict solving


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [090525c] :

	[sipcapture] updated docs for HEPVERSION


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e547ec6] :

	[fix functional bug][sipcapture] new HEPVERSION script variable
	(cherry picked from commit 136fcb65edd4ca00cb15f088de3e58f960385518)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a9a9d7f] :

	[proto_hep] correctly name function
	(cherry picked from commit 853b0bbb759d3c58f00b0749e90e4016dd500891)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [608881b] :

	[hep] updated docs for previous commit
	(cherry picked from commit f9c6cdd2acf93062c252f9fc64faa6327e696718)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b2ff3cc] :

	[fix functional bug][hep] multiple versions/protocols can be used in the same time
	Since commit 0873c14d1b81887823242a955217dcc854eb97c9 multiple
	network protocols can be used from one module. Proto_hep was changed
	to be able to use both tcp and udp in the same time. Moreover, there
	is no hep_version needed since we can receive HEPv1,v2 and v3 on any
	UDP interface. Since HEPv1 and v2 are not compatible with TCP, only
	HEPv3 will be support. For HEPv3, Sipcapture module can now relay
	packets from TCP to UDP or the reverse way.
	Siptrace module was also improved. Trace id's can now be defined with
	hep version and transport protocol, in order to be able to do multiple
	types of tracing with different HEP protocols and/or network transports.
	(cherry picked from commit 45a3aef8e151a03966a7739c2f880a3fdb0d6811)

	Conflicts:
		modules/siptrace/siptrace.c


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [5e8f0ac] :

	[fix functional bug]allow a module to register multiple protocols
	(cherry picked from commit 0873c14d1b81887823242a955217dcc854eb97c9)


2016-04-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e82a5b3] :

	[drouting] bug fix and memory leak fix
	* free gateways list for each carrier at reload
	* use map_find instead of map_get to search an element in the tree
	(cherry picked from commit f9f3b83ef621850c2c128b12b9bf6ab2e78e5ee1)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [19421eb] :

	[siptrace][bugfix] use the correct sockaddr structure for storing
	(cherry picked from commit 556f394212bb07c6f7641f3b1df954d52ff730a5)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ba0fcc2] :

	[proto_hep][bugfix] use the correct port when unpacking
	(cherry picked from commit 3dda4131b458bc6f3145196f7661671571dc948e)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c2e8c17] :

	Revert "[hep][bugfix] correctly store ports/addresses"
	This reverts commit 7b1359adfcd55f12fd3739c04e30e1c12b91a71b.
	(cherry picked from commit ab2292945b19f00faa063c457a0efce384b8f245)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4cce28a] :

	[hep][bugfix] correctly store ports/addresses
	(cherry picked from commit 51e6f102daac7d0de9a7ca4efea74d5c559746fe)


2016-04-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [70a3018] :

	Enable debug_mode settings only if debug_mode gets set to enable.
	(cherry picked from commit e7c14bc0c85c888040aec7f0949b085c5cee38e7)


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5c8869b] :

	Avoid space in MI node name


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [555c0e7] :

	Fixed wrong MI tree in clusterer_list (related to previous commit)
	(cherry picked from commit fa4e7f0fa10c6e987b1b69bc5302f0d12a3f8714)


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aa856a7] :

	Fixed arrays in clusterer_list MI command
	(cherry picked from commit 31943a4e2c4ae84babc181f4e5a31e33f2d6b63a)


2016-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0e81a70] :

	[tls_mgm] properly handle SSL_ERROR_SYSCALL on SSL_shutdown
	(cherry picked from commit bdcee39ebf04f8a74b926dc6e6c311487d3ef601)


2016-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [dbdc46c] :

	[siptrace][bugfix] avoid double free on cancelled transaction
	(cherry picked from commit 3c6b6930d615adb978dd2779b6cd4054c3bc49df)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a9b0011] :

	[sipcapture] fix incompatibilities with HOMERv5 db schema
	(cherry picked from commit f75687847a142f18b44c49a0b274457d7039f165)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [85b126a] :

	[sipcapture] remove time-consuming unnecessary chunk of code
	(cherry picked from commit cc7a2ea114444b82645e484a1cf728c4464c17dd)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d49afa6] :

	[proto_hep][bugfix] fix bad sip payload size calculation
	(cherry picked from commit eec5045d44ec1fc29aba9a6d5d024e38ace10ae1)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e6258da] :

	[acc][bugfix] correctly store do_accounting() flags
		Flags are now moved from processing context into
	transaction context when the transaction is created, this way
	having visibility for the whole transaction.
	(cherry picked from commit 41bcd2559b29a23e96636c6c2dfc5628f69ae5b7)


2016-04-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [507db77] :

	Fixed MI nodes in 'sip_trace' command.
	Formatting chars must not be included in the MI tree
	(cherry picked from commit 7811e2d6b6013fe21c744531299f490671462a05)


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0a1fc05] :

	Fixed default FIFO file name
	(cherry picked from commit ffdbb970bfa60dcd1ed7d88fc94c4a07f9356ad9)


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b7ac4fc] :

	exclude proto_wss, use QM_MALLOC


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7aef53c] :

	tls_list() may be called even without DB support
	Avoid locking if DB support was not enabled.
	(cherry picked from commit e6944bb064750611585d0fa516551b944aa44cdc)


2016-04-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eee4fae] :

	[proto_hep][bugfix] check memory allocation
	(cherry picked from commit f5ad753d56a95d68bc937e0721895d6ee4aefd43)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [21ca280] :

	[siptrace][bugfix] sequential requests - set context for sl callbacks
	(cherry picked from commit 943d9015f8f1e3467acafee67693f157beab9755)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6ce202a] :

	[context][bugfix] each context has its own destroy functions vector
	Credits to Razvan Crainea
	(cherry picked from commit 53263b2a65dc771cb660078f4b20171a48f04248)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [576a730] :

	[tm]fix context functions header
	(cherry picked from commit 59e5a4165f88c2a4a4dbb5e159786c441f6fa502)


2016-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [4cd99ec] :

	MI library: Add comments regarding a known issue
	Currently, MI arrays cannot contain objects with non-identical
	"name" attributes.

	This patch also quickfixes this issue in mi_list_all_profiles() by dropping
	the array idea altogether, in favour of a top-most object.
	(cherry picked from commit 6c105015c3a0a02c6f65822f5ce52e12bd0ae108)


2016-04-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [134ad0d] :

	Fixed bogus pkg_free on pointer in data segment
	Reported by @dzhou121
	Closes #854
	(cherry picked from commit b9aa87360eecf1e77baea661b855eec4f5798f2f)


2016-04-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [afc4c40] :

	Fix typo in do_accounting() naming is cfg templates
	(cherry picked from commit 7f8656e026435bf4ac6eff19b964b81d7a37d28e)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b65c6c2] :

	[sipcapture][HOMERv5 incompatibility fix] updated docs for report_capture and new table name format
	(cherry picked from commit 5d725a42d0262807dd9a2c555640a980e50381ce)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [acd0a9c] :

	[sipcapture][HOMERv5 incompatibility fix]generic capturing function
	      Added new function called report_capture which allows
	capturing hep packets in a generic format. It will be very
	effective for the third version of the hep protocol for capturing
	packets other than SIP. Also added a new table called rtcp_capture
	for storing everything capture with report capture.
	(cherry picked from commit c5700cce4a37e484869941502e495733b8138b98)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3053c7e] :

	 [sipcapture][HOMERv5 incompatibility fix] HOMERv5 table rotation aware logic
	    * HOMVERv5 allows rotating tables by having a prefix which is
	    the fixed table name and a suffix which is a string containig
	    timestamps
	    * sip_capture now accepts table name as a parameter to sip_capture()
	    function
	    * both global table name and sip_capture table_name can have
	    a prefix(string) and a suffix(strftime format string);
	    * fixed bugs in async query building
	(cherry picked from commit 074463f17f2e57fb15c120f306ce895438ad1865)


2016-04-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e894f7a] :

	[acc][bugfix] register tm free function only once
	(cherry picked from commit 92d20416568c23f58f378fd14b272d2b16d7518e)


2016-04-14  Liviu Chircu  <liviu at opensips dot org>
	* [19dca29] :

	Fix a PKG leak in the SIP message processing stack
	Commit 7464a86ec introduced a processing context leak during the
	handling of basically any SIP request in all protocol stacks
	except for HEP.

	Reported by Trevor Francis <trevor@46labs.com>
	(cherry picked from commit 731719a2b10283439e2f6a0ba15bb8c6c6ef189c)


2016-04-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c5c4df0] :

	[acc] fix double free issue
	Since callbacks were registered only at first, and aftewards only
	flags were changed there was no way to know if tm is to free the
	shmed flags from acc or dialog. For this a new flag was introduced
	to indicate whether the flags shall be removed either by dialog or
	tm.
	(cherry picked from commit 6852bd427376cea0cc53cbc5f87476f3377cbd04)


2016-04-12  Liviu Chircu  <liviu at opensips dot org>
	* [9888984] :

	Suppress "no free TCP receiver" logging noise
	This was added long before async TCP support, and it is now
	only useful to developers.
	(cherry picked from commit 142e7e0121040aceb2f9c31c4d4a0e8d8b573cc6)


2016-04-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [7d371ab] :

	pi_http: return "200 OK" instead of "0 Unknown"
	(cherry picked from commit 73f8117f2f5f01560b6698ad845cce0b485df203)


2016-04-07  Kristian Høgh  <kfh at uni-tel dot dk>
	* [423f277] :

	cachedb_redis: Prevent crash when re-connect keeps failing
	(cherry picked from commit b501df74a231a987babe6eeadb3c676d8823619c)


2016-04-05  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [032bb69] :

	Fix missing GPL headers for mem files
	(cherry picked from commit 8ffd592e316a4436e2144dfc08f1b20571e6622e)


2016-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [be22446] :

	Fix typo in README example
	(cherry picked from commit 983ad955e21f57878fcefd61f8a734e89de5eab9)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [836d3b5] :

	[drouting] docs updated for partition id variable
	(cherry picked from commit 2013276a1b1e4a29766f22b5f483eb4ace6a7235)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5689d43] :

	[drouting] check if partition pvar is writable
	(cherry picked from commit cf0945c16eff03efd5ec2b120d283ebc7f4b8616)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7745b11] :

	[drouting] pvar for matched partition if wildcard operator used
	fix missing functionality - return to script the matching partition
	(cherry picked from commit 7551c668972e63970c9a65f7dc5bbd1959100d79)


2016-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4be2662] :

	Fixed checking return code for pre raw callbacks
	If the TH pre raw callbacks fails, it may return a NULL buffer, leading to a later crash when we want to parse the SIP message.


2016-04-04  Jarrod Baumann  <j at rrod dot org>
	* [cf1e11d] :

	[dialog] repl_prof_add never increments the return buffer size for threshold comparison
	(cherry picked from commit 52028bdd2c729904c7e337d7aa0b99cce4195f0c)


2016-04-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bcf7d40] :

	Fix missing logs if debug_mode after log_stderror
	(cherry picked from commit 29182c9baa98a8e156a1c0dd4ceb4992005c7950)


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [2c84108] :

	Various doc improvements
	(cherry picked from commit d9326522ae9c3dc39b8163d07495dc013217ab80)

	Conflicts:
		scripts/opensipsdbctl
		scripts/opensipsdbctl.base


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [7ac6bfc] :

	Update opensipsdbctl for 2.2


2016-03-31  Razvan Crainea  <razvan at opensips dot org>
	* [11877a6] :

	Update ChangeLog


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [c4b48fb] :

	Improve the AUTHORS file
	(cherry picked from commit 32d0e1a4fa500e7693828b3f98392d0502b8b0da)

2016-05-09  Razvan Crainea  <razvan at opensips dot org>
	* [7e7a2df] :

	Update name to opensips-2.2.0-rc1


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3c75721] :

	[nathelper] fix bad logic regarding the timer list
	(cherry picked from commit a86d2c4edcf9c62778a2a9d2438d57fac869bc10)


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2330afa] :

	[sipcapture] fix sip_capture table schema
	(cherry picked from commit 8fd97163058c798f45d381b124cc465261e9e1e5)


2016-05-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [22bdc37] :

	[siptrace][bugfix] bad structre used when printing HEP trace_id via mi
	(cherry picked from commit 8c6d9bacb580960f1a0a642a5be5a5ffeb5f958a)


2016-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [cd4101a] :

	event_virtual doc: Fix grammar/typos
	(cherry picked from commit 3fd96863cb611d1eefad3b175535944545253f19)


2016-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [664ec6b] :

	event_flatstore doc: Fix some typos
	(cherry picked from commit 3cedcc4af994aa8ce132547c325c13cbc8d2cd07)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f5753f9] :

	[siptrace] fix hash calculus for extended hep trace_id
	(cherry picked from commit 5e261d7e9f1ea632806370c16cb0f733cee4edfc)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [91c3247] :

	[sipcapture] allow any hep version for hep_net variable
	(cherry picked from commit bcbded5653d5703b53ed4bc961a8a66d724d3e32)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d09775b] :

	[sipcapture] fix new hep proto names string
	(cherry picked from commit 3c15d2d89ec1ab8ad01a2e29a844eb3084128abf)


2016-05-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c939605] :

	[sipcapture][bugfix] fix bad string hex value parsing
	(cherry picked from commit 5d6b927d41988e3170ab37889fb26c8026dce29d)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [454a557] :

	[siptrace][bugfix] fix trace_id parsing
	(cherry picked from commit 2878741afc71620c5910f689c07db38b5003a48c)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ed3f224] :

	[sipcapture][bugfix] invalid static vector size calculation
	(cherry picked from commit b8a82b159d220389513808c8fb8f651fc1498cda)


2016-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [5589ffe] :

	dialog: Remove a chunk of dead code
	(cherry picked from commit fd330577d66de599430694334e8605ae8b46b9d9)


2016-05-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [55f45c4] :

	[sipcapture][bugfix] invalid memory access
	(cherry picked from commit 8056a984ce914d6585aef6054d727d82f72da3c6)


2016-05-04  renicok  <renico.koen at gmail dot com>
	* [f12cf9b] :

	Updated opensipsctl.base to also search /sbin
	The md5 utility is located at /sbin/md5 on FreeBSD 8.3. An additional common location was added to allow the script to accommodate this.
	(cherry picked from commit ca87f55ad071257aa3b891347aadb55a7729d25b)


2016-05-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ef5f3b5] :

	[sipcapture] fix bad conditions
	(cherry picked from commit 4caa2ac37177f2ad59c8f2de23fcc3b12c11fe69)


2016-05-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c24abca] :

	[sipcapture] be able to set proto_type in report capture function
	(cherry picked from commit e3466c4adecf11fa6d7da206359847c3a1c4b0f9)


2016-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [2d4d2ff] :

	ratelimit: initialize the length of the algorithm
	(cherry picked from commit 0eebf1058574c622ba3532fb520908da1c1d94a5)


2016-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [ebaad38] :

	Makefile.conf: add deps for tls_mgm and proto_wss
	This prevents 'make menuconf' from deleting these modules from the generated
	configuration file
	(cherry picked from commit 616b2ba189771a499c76d645627869270555511d)


2016-05-03  Răzvan Crainea  <razvan at opensips dot org>
	* [83a23be] :

	debian: add missing dependency
	Ovewrite lintian warning


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [1e99bb0] :

	dialog and usrloc: broadcast replication data all time
	This prevents clusterer module from marking a node as not reachable when there
	is no traffic at all.

	Fixes #849
	(cherry picked from commit 7f7f8711ccfd0aabb71b124fbb7f4c3e8afd6e37)


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [d02ae4f] :

	regex: fix spell-check in package
	(cherry picked from commit 647ea214f1892f8901f562bc45e0e1e33b699aba)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [30d8048] :

	[acc][bugfix] fix memory leak
	* fix leak caused by missed calls - receiving a negative reply
	caused flags not being freed


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [a1af71c] :

	proto_bin: remove debug INFO message
	(cherry picked from commit d388e804a320aa0f267e47cbcbaf473d519fab31)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4389c26] :

	[siptrace] fix bad cherry-pick conflict solving


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [090525c] :

	[sipcapture] updated docs for HEPVERSION


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e547ec6] :

	[fix functional bug][sipcapture] new HEPVERSION script variable
	(cherry picked from commit 136fcb65edd4ca00cb15f088de3e58f960385518)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a9a9d7f] :

	[proto_hep] correctly name function
	(cherry picked from commit 853b0bbb759d3c58f00b0749e90e4016dd500891)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [608881b] :

	[hep] updated docs for previous commit
	(cherry picked from commit f9c6cdd2acf93062c252f9fc64faa6327e696718)


2016-05-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b2ff3cc] :

	[fix functional bug][hep] multiple versions/protocols can be used in the same time
	Since commit 0873c14d1b81887823242a955217dcc854eb97c9 multiple
	network protocols can be used from one module. Proto_hep was changed
	to be able to use both tcp and udp in the same time. Moreover, there
	is no hep_version needed since we can receive HEPv1,v2 and v3 on any
	UDP interface. Since HEPv1 and v2 are not compatible with TCP, only
	HEPv3 will be support. For HEPv3, Sipcapture module can now relay
	packets from TCP to UDP or the reverse way.
	Siptrace module was also improved. Trace id's can now be defined with
	hep version and transport protocol, in order to be able to do multiple
	types of tracing with different HEP protocols and/or network transports.
	(cherry picked from commit 45a3aef8e151a03966a7739c2f880a3fdb0d6811)

	Conflicts:
		modules/siptrace/siptrace.c


2016-05-03  Razvan Crainea  <razvan at opensips dot org>
	* [5e8f0ac] :

	[fix functional bug]allow a module to register multiple protocols
	(cherry picked from commit 0873c14d1b81887823242a955217dcc854eb97c9)


2016-04-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e82a5b3] :

	[drouting] bug fix and memory leak fix
	* free gateways list for each carrier at reload
	* use map_find instead of map_get to search an element in the tree
	(cherry picked from commit f9f3b83ef621850c2c128b12b9bf6ab2e78e5ee1)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [19421eb] :

	[siptrace][bugfix] use the correct sockaddr structure for storing
	(cherry picked from commit 556f394212bb07c6f7641f3b1df954d52ff730a5)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ba0fcc2] :

	[proto_hep][bugfix] use the correct port when unpacking
	(cherry picked from commit 3dda4131b458bc6f3145196f7661671571dc948e)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c2e8c17] :

	Revert "[hep][bugfix] correctly store ports/addresses"
	This reverts commit 7b1359adfcd55f12fd3739c04e30e1c12b91a71b.
	(cherry picked from commit ab2292945b19f00faa063c457a0efce384b8f245)


2016-04-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4cce28a] :

	[hep][bugfix] correctly store ports/addresses
	(cherry picked from commit 51e6f102daac7d0de9a7ca4efea74d5c559746fe)


2016-04-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [70a3018] :

	Enable debug_mode settings only if debug_mode gets set to enable.
	(cherry picked from commit e7c14bc0c85c888040aec7f0949b085c5cee38e7)


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5c8869b] :

	Avoid space in MI node name


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [555c0e7] :

	Fixed wrong MI tree in clusterer_list (related to previous commit)
	(cherry picked from commit fa4e7f0fa10c6e987b1b69bc5302f0d12a3f8714)


2016-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aa856a7] :

	Fixed arrays in clusterer_list MI command
	(cherry picked from commit 31943a4e2c4ae84babc181f4e5a31e33f2d6b63a)


2016-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0e81a70] :

	[tls_mgm] properly handle SSL_ERROR_SYSCALL on SSL_shutdown
	(cherry picked from commit bdcee39ebf04f8a74b926dc6e6c311487d3ef601)


2016-04-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [dbdc46c] :

	[siptrace][bugfix] avoid double free on cancelled transaction
	(cherry picked from commit 3c6b6930d615adb978dd2779b6cd4054c3bc49df)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a9b0011] :

	[sipcapture] fix incompatibilities with HOMERv5 db schema
	(cherry picked from commit f75687847a142f18b44c49a0b274457d7039f165)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [85b126a] :

	[sipcapture] remove time-consuming unnecessary chunk of code
	(cherry picked from commit cc7a2ea114444b82645e484a1cf728c4464c17dd)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d49afa6] :

	[proto_hep][bugfix] fix bad sip payload size calculation
	(cherry picked from commit eec5045d44ec1fc29aba9a6d5d024e38ace10ae1)


2016-04-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e6258da] :

	[acc][bugfix] correctly store do_accounting() flags
		Flags are now moved from processing context into
	transaction context when the transaction is created, this way
	having visibility for the whole transaction.
	(cherry picked from commit 41bcd2559b29a23e96636c6c2dfc5628f69ae5b7)


2016-04-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [507db77] :

	Fixed MI nodes in 'sip_trace' command.
	Formatting chars must not be included in the MI tree
	(cherry picked from commit 7811e2d6b6013fe21c744531299f490671462a05)


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0a1fc05] :

	Fixed default FIFO file name
	(cherry picked from commit ffdbb970bfa60dcd1ed7d88fc94c4a07f9356ad9)


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b7ac4fc] :

	exclude proto_wss, use QM_MALLOC


2016-04-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7aef53c] :

	tls_list() may be called even without DB support
	Avoid locking if DB support was not enabled.
	(cherry picked from commit e6944bb064750611585d0fa516551b944aa44cdc)


2016-04-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eee4fae] :

	[proto_hep][bugfix] check memory allocation
	(cherry picked from commit f5ad753d56a95d68bc937e0721895d6ee4aefd43)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [21ca280] :

	[siptrace][bugfix] sequential requests - set context for sl callbacks
	(cherry picked from commit 943d9015f8f1e3467acafee67693f157beab9755)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6ce202a] :

	[context][bugfix] each context has its own destroy functions vector
	Credits to Razvan Crainea
	(cherry picked from commit 53263b2a65dc771cb660078f4b20171a48f04248)


2016-04-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [576a730] :

	[tm]fix context functions header
	(cherry picked from commit 59e5a4165f88c2a4a4dbb5e159786c441f6fa502)


2016-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [4cd99ec] :

	MI library: Add comments regarding a known issue
	Currently, MI arrays cannot contain objects with non-identical
	"name" attributes.

	This patch also quickfixes this issue in mi_list_all_profiles() by dropping
	the array idea altogether, in favour of a top-most object.
	(cherry picked from commit 6c105015c3a0a02c6f65822f5ce52e12bd0ae108)


2016-04-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [134ad0d] :

	Fixed bogus pkg_free on pointer in data segment
	Reported by @dzhou121
	Closes #854
	(cherry picked from commit b9aa87360eecf1e77baea661b855eec4f5798f2f)


2016-04-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [afc4c40] :

	Fix typo in do_accounting() naming is cfg templates
	(cherry picked from commit 7f8656e026435bf4ac6eff19b964b81d7a37d28e)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b65c6c2] :

	[sipcapture][HOMERv5 incompatibility fix] updated docs for report_capture and new table name format
	(cherry picked from commit 5d725a42d0262807dd9a2c555640a980e50381ce)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [acd0a9c] :

	[sipcapture][HOMERv5 incompatibility fix]generic capturing function
	      Added new function called report_capture which allows
	capturing hep packets in a generic format. It will be very
	effective for the third version of the hep protocol for capturing
	packets other than SIP. Also added a new table called rtcp_capture
	for storing everything capture with report capture.
	(cherry picked from commit c5700cce4a37e484869941502e495733b8138b98)


2016-04-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3053c7e] :

	 [sipcapture][HOMERv5 incompatibility fix] HOMERv5 table rotation aware logic
	    * HOMVERv5 allows rotating tables by having a prefix which is
	    the fixed table name and a suffix which is a string containig
	    timestamps
	    * sip_capture now accepts table name as a parameter to sip_capture()
	    function
	    * both global table name and sip_capture table_name can have
	    a prefix(string) and a suffix(strftime format string);
	    * fixed bugs in async query building
	(cherry picked from commit 074463f17f2e57fb15c120f306ce895438ad1865)


2016-04-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e894f7a] :

	[acc][bugfix] register tm free function only once
	(cherry picked from commit 92d20416568c23f58f378fd14b272d2b16d7518e)


2016-04-14  Liviu Chircu  <liviu at opensips dot org>
	* [19dca29] :

	Fix a PKG leak in the SIP message processing stack
	Commit 7464a86ec introduced a processing context leak during the
	handling of basically any SIP request in all protocol stacks
	except for HEP.

	Reported by Trevor Francis <trevor@46labs.com>
	(cherry picked from commit 731719a2b10283439e2f6a0ba15bb8c6c6ef189c)


2016-04-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c5c4df0] :

	[acc] fix double free issue
	Since callbacks were registered only at first, and aftewards only
	flags were changed there was no way to know if tm is to free the
	shmed flags from acc or dialog. For this a new flag was introduced
	to indicate whether the flags shall be removed either by dialog or
	tm.
	(cherry picked from commit 6852bd427376cea0cc53cbc5f87476f3377cbd04)


2016-04-12  Liviu Chircu  <liviu at opensips dot org>
	* [9888984] :

	Suppress "no free TCP receiver" logging noise
	This was added long before async TCP support, and it is now
	only useful to developers.
	(cherry picked from commit 142e7e0121040aceb2f9c31c4d4a0e8d8b573cc6)


2016-04-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [7d371ab] :

	pi_http: return "200 OK" instead of "0 Unknown"
	(cherry picked from commit 73f8117f2f5f01560b6698ad845cce0b485df203)


2016-04-07  Kristian Høgh  <kfh at uni-tel dot dk>
	* [423f277] :

	cachedb_redis: Prevent crash when re-connect keeps failing
	(cherry picked from commit b501df74a231a987babe6eeadb3c676d8823619c)


2016-04-05  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [032bb69] :

	Fix missing GPL headers for mem files
	(cherry picked from commit 8ffd592e316a4436e2144dfc08f1b20571e6622e)


2016-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [be22446] :

	Fix typo in README example
	(cherry picked from commit 983ad955e21f57878fcefd61f8a734e89de5eab9)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [836d3b5] :

	[drouting] docs updated for partition id variable
	(cherry picked from commit 2013276a1b1e4a29766f22b5f483eb4ace6a7235)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5689d43] :

	[drouting] check if partition pvar is writable
	(cherry picked from commit cf0945c16eff03efd5ec2b120d283ebc7f4b8616)


2016-04-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7745b11] :

	[drouting] pvar for matched partition if wildcard operator used
	fix missing functionality - return to script the matching partition
	(cherry picked from commit 7551c668972e63970c9a65f7dc5bbd1959100d79)


2016-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4be2662] :

	Fixed checking return code for pre raw callbacks
	If the TH pre raw callbacks fails, it may return a NULL buffer, leading to a later crash when we want to parse the SIP message.


2016-04-04  Jarrod Baumann  <j at rrod dot org>
	* [cf1e11d] :

	[dialog] repl_prof_add never increments the return buffer size for threshold comparison
	(cherry picked from commit 52028bdd2c729904c7e337d7aa0b99cce4195f0c)


2016-04-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bcf7d40] :

	Fix missing logs if debug_mode after log_stderror
	(cherry picked from commit 29182c9baa98a8e156a1c0dd4ceb4992005c7950)


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [2c84108] :

	Various doc improvements
	(cherry picked from commit d9326522ae9c3dc39b8163d07495dc013217ab80)

	Conflicts:
		scripts/opensipsdbctl
		scripts/opensipsdbctl.base


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [7ac6bfc] :

	Update opensipsdbctl for 2.2


2016-03-31  Razvan Crainea  <razvan at opensips dot org>
	* [11877a6] :

	Update ChangeLog


2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [c4b48fb] :

	Improve the AUTHORS file
	(cherry picked from commit 32d0e1a4fa500e7693828b3f98392d0502b8b0da)

2016-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [c4b48fb] :

	Improve the AUTHORS file
	(cherry picked from commit 32d0e1a4fa500e7693828b3f98392d0502b8b0da)


2016-03-31  Razvan Crainea  <razvan at opensips dot org>
	* [133c17b] :

	Update version to beta


2016-03-31  Razvan Crainea  <razvan at opensips dot org>
	* [a91fce6] :

	For beta release, enable malloc debugging


2016-03-31  Razvan Crainea  <razvan at opensips dot org>
	* [092fb36] :

	Makefile: always put the minor in name
	Even if it is redundant


2016-03-31  Razvan Crainea  <razvan at opensips dot org>
	* [cf676f2] :

	Update CREDITS and AUTHORS


2016-03-31  Răzvan Crainea  <razvan at opensips dot org>
	* [5a8dc76] :

	Merge pull request #831 from james-criscuolo/master
	presence module: move strlen check to avoid pkg_malloc(0)


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6018192] :

	Fix extended Call-ID in B2B
	The old CallID format did not ensure unicity across time, so we include now time info into the callid.
	Closes  #783 .


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6459085] :

	README files regenerated


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0500b6e] :

	Fix bogus log
	(cherry picked from commit 87c93b8c91815107eacb7069653689d6e0f38d19)


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d1e9743] :

	Revert commit d6cbbff
	Do not automatically set db_url to the db_default_url as we have no idea if the default partition is gone be used. By forcing it we create some extra unwanted dependencies (like setting the version for the defaul table, even if not used).
	Even if we break the backward compatibility, makes more sens to explicitly set the db_url if you use the default partition


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [086305e] :

	Revert commit 1e1ea14
	Do not automatically set db_url to the db_default_url as we have no idea if the default partition is gone be used. By forcing it we create some extra unwanted dependencies (like setting the version for the defaul table, even if not used).
	Even if we break the backward compatibility, makes more sens to explicitly set the db_url if you use the default partition


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [107a04c] :

	Fixed ilegal chars in XML


2016-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eca4434] :

	Migrate cfg scripts to new acc interface.


2016-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d5e2e28] :

	MYSQL DB migration updated.
	SIP TRACE table changed, CALL CENTER tables added.


2016-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [39cc2df] :

	Update ws & tls modules documentation


2016-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [3ca7813] :

	python: fix documentation links


2016-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [05930d1] :

	Fixed bogus free of soring algorithms in DR.


2016-03-30  Liviu Chircu  <liviu at opensips dot org>
	* [8d04721] :

	TLS: Fix misleading error logs on accept() failures
	OpenSIPS would always log SSL_accept() failures as being "rejected by
	client". This is entirely not the case, as the errors may as very well be
	server-side, due to cipher mismatches, failed peer verifications, etc.

	Reported by Nabeel Shikder on the "users" mailing list


2016-03-29  Razvan Crainea  <razvan at opensips dot org>
	* [12df046] :

	clusterer: update html README layout


2016-03-29  Razvan Crainea  <razvan at opensips dot org>
	* [984ddb2] :

	clusterer: update README with a usage example


2016-03-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [cf62502] :

	[sipcapture] update docs for new function


2016-03-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7d30be0] :

	[sipcapture hep] function to continue with the script after the hep route


2016-03-29  Liviu Chircu  <liviu at opensips dot org>
	* [2380bbd] :

	drouting api: Fix a double free bug
	Crashes / memory corruptions could ensue after running "fraud_reload" MI
	commands or during OpenSIPS shutdown, if fraud_detection had some data
	to work with.


2016-03-28  Liviu Chircu  <liviu at opensips dot org>
	* [2e061b9] :

	Merge pull request #842 from rrb3942/relaxed_s_int2
	Make the s.int transformation more permissive


2016-03-28  Ryan Bullock  <rrb3942 at gmail dot com>
	* [6e71969] :

	Preserve sign on partially converted strings


2016-03-28  Ryan Bullock  <rrb3942 at gmail dot com>
	* [9b37e74] :

	Make the s.int transformation more permissive


2016-03-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [cbf3a85] :

	[acc] fix bugs in acc
	* init all accounting methods data in mod_init as it was before;
	cdr accounting initial data is loaded even if users don't use
	CDRs but this shouldn't affect anything
	* fix aaa bug - api was not loaded because it was badly included
	in diameter define section
	* fix event interface extra parameters - parsing extra parameters
	for event interface was wrongly removed


2016-03-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ef6ba0e] :

	Fixed function name in export.


2016-03-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4db733a] :

	Fix function name in docs


2016-03-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eed88e2] :

	[acc]fix event registration issue


2016-03-25  Liviu Chircu  <liviu at opensips dot org>
	* [d148ca2] :

	sql_cacher: Add module dependencies
	It should be loaded somewhere after all SQL and NoSQL drivers


2016-03-25  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [b65bbe2] :

	Merge pull request #837 from ionutrazvanionita/hep-route
	[sipcapture] special route for hep messages


2016-03-25  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ad361f5] :

	Merge pull request #841 from ionutrazvanionita/acc-do-acc
	drop_accounting function for acc


2016-03-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [fe5e818] :

	[acc]fix docs for drop_accounting()


2016-03-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4802253] :

	[acc]change cancel_accounting() name to drop_accounting()


2016-03-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b452f8a] :

	[acc]updated docs for cancel_accounting()


2016-03-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0548384] :

	[acc]cancel_accounting function for acc
	This function allows unsetting parameters set by do accounting
	function. It has the same parameters excepting the table name.


2016-03-25  Liviu Chircu  <liviu at opensips dot org>
	* [29aa72f] :

	clusterer: Various coding style improvements
	    * clean loops
	    * shorter boolean test operators
	    * avoid redundant global initializations
	    * improve variable naming
	    * fix bad log messages


2016-03-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aaaeea8] :

	Updated the ACC documentation


2016-03-25  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [6992f2d] :

	Merge pull request #840 from ionutrazvanionita/acc-do-acc
	[acc]flags used for accounting now replaced by do_accounting()


2016-03-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [31ef12b] :

	[sipcapture]fix dummy request building


2016-03-24  Liviu Chircu  <liviu at opensips dot org>
	* [c2a0767] :

	F_MALLOC: Allow free(NULL) when debugging memory


2016-03-24  Liviu Chircu  <liviu at opensips dot org>
	* [2787308] :

	Improve robustness of core URI copying functions
	Namely set_ruri(), set_dst_uri(), set_path_vector().

	This patch corrects the behaviour of the above functions when they are
	fed strange/corrupt strings, such as {NULL, 5} or {0x7fb..., 0}.

	There are still plenty of pieces of OpenSIPS code which assume such
	strings should be correctly processed, e.g. next_branches(), which may
	lead to a whole world of problems ranging from segfaults, double free
	operations and dangling pointers all the way up to intermixed shm/pkg
	memory pointers.

	The best way of addressing this issue is to simply accept such input and
	zeroize (and free) the concerned sip_msg attributes.

	Many thanks to Ovidiu Sas <osas@voipembedded.com> for in-depth error
	reporting and assistance in fixing this issue


2016-03-24  Liviu Chircu  <liviu at opensips dot org>
	* [ad27b4b] :

	Improve logging when using "memlog"
	    * blocks are more readable now (pkg vs. shm)
	    * malloc vs. free vs. realloc operations are more distiguishable


2016-03-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5700163] :

	[sipcapture] Allow module starting without db url if db not used


2016-03-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [43f6d74] :

	[sipcapture] updated docs for hep_route parameter


2016-03-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [02e2634] :

	[sipcapture] special route for hep messages
	hep_store_no_script parameter now changed into hep_route. Using
	this parameter one can either do sip_capture() without going
	through the script or define a route where messages can be
	forwarded using hep_relay() function and modified if hep version
	3 is used, withot parsing the sip message, or go through the
	main request route as usual where the message will be parsed.
	For the second version, the hep route, sip_capture() won't be
	available since the message it's not parsed. This functionality
	stands only for routing/modifying the message.


2016-03-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9a9f092] :

	[acc] updated docs for do_accounting()


2016-03-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [da17513] :

	[acc]flags used for accounting now replaced by do_accounting()
	Introducing new do_accounting() function. It has 3 arguments,
	first one is used to specify the type of accounting separated
	by '|'(db, log, aaa, evi, diam), second one to specify the flags
	used for accounting also separated by '|' (cdr, missed, failed -
	failed_transaction_flag) and the third parameter represents the
	name of the table used for accounting.


2016-03-24  Ovidiu Sas  <osas at voipembedded dot com>
	* [195a7e6] :

	Makefile.defs: disable optimizations while debugging (DBG_MALLOC is set)


2016-03-24  Ovidiu Sas  <osas at voipembedded dot com>
	* [5722f36] :

	Makefile.defs: new CC_OPTIMIZE_FLAG to define the compiler optimization level


2016-03-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2503bc4] :

	Proper handling of isolated EPOLLHUP events.
	capture and handle EPOLLHUP or EPOLLERR events even if they are not in conjunction with EPOLLIN or EPOLLOUT.
	Many thanks to @santhosh-kumar for reporting and helping with troubleshooting.

	Fix for #829


2016-03-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ea1eb62] :

	Preserve 3xx contacts via TH
	Do not change the contacts in 3xx replies to initial INVITE, as this breaks SIP redirect.
	Reported by @petekelly
	Issue #656


2016-03-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b7bd2d7] :

	[siptrace]docfix - default trace_on param value


2016-03-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [06cec36] :

	[nathelper] fix bad condintion for branch checking


2016-03-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [43ff3fe] :

	Fixed some overlapping defines


2016-03-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ec7b4e5] :

	Fixed 491 Pending scenario in B2B.
	Generate 491 Pending reply to the correct transaction (the new incoming one) and drop the requests (do not forward it).
	Credits for debugging, reporting and fixing go to @DMOsipov .
	Closes #679


2016-03-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d8a302b] :

	Extend DR api to allow external sorting functions.
	Another module may register functions for sorting the GW list based on custom algorithms.
	This commit contains just the API, nothing more.


2016-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3a136fe] :

	Prevent async in local route.
	The way local route is implemented (triggered and terminated in TM module) does not allow async resumes, so, for the moment, we simply force all the async triggers to be executed in a sync way in local route.
	(cherry picked from commit 940996fbbd9e7a131b4de4c1983df2788528250e)


2016-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d20b3d0] :

	Accept XMLRPC requests without params node.
	If there are no parameters, the params XML node is not required.
	Repored by Nick Altmann
	Closes #826


2016-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [66d5cff] :

	Fixed port param for lb_is_destination().
	It must accept integer values also, not only variables.
	Reported by @telephone-man on GITHUB
	Closes #808.
	(cherry picked from commit 143328f718e8c1e753e16d187415eb0ba80b7ef7)


2016-03-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d837ed8] :

	Fixed usage of Prep Statement on failed CDRs.
	The number of inserted columns is variable (n+m or n+m+2), so we need different statements for each.
	Reported by @apsaras (on GITHUB)
	Closes #821
	(cherry picked from commit e49e2e848bbd7243a31d7ca99d4bdc9360466cf9)


2016-03-18  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [d2b5c52] :

	Merge pull request #832 from ionutrazvanionita/dr-wildcard
	Wildcard operator for partitions in some drouting functions


2016-03-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [992b49b] :

	Fix extracting TO hdr.
	Do not add '@' if username is not present.
	Reported by @DMOsipov on GITHUB.
	Closes #818
	(cherry picked from commit e74f6655ee735feb7e5f22298405172fb74e86c1)


2016-03-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [66399b7] :

	[drouting]updated docs


2016-03-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [af25ef8] :

	[drouting]wildcard operator for is_from_gw partitions


2016-03-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [57d7bfb] :

	[drouting]wildcard operator for do_routing


2016-03-18  James Criscuolo  <james at onsip dot com>
	* [ae7a8ee] :

	presence module: move strlen check to avoid pkg_malloc(0)


2016-03-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6c12ba9] :

	Reset to 0 the whole branch if failed.
	If we do not reset, on trying to add the next branch (on the same position), we will end up with dangling pointers.
	(cherry picked from commit d5c3bd1eed5f40f7425562f8bb65fe2f5c9fc678)


2016-03-17  Ovidiu Sas  <osas at voipembedded dot com>
	* [04d8a84] :

	scripts/opensipsctl: complete support for optional database port


2016-03-16  Razvan Crainea  <razvan at opensips dot org>
	* [2600e00] :

	topology_hiding: prefent crash at shutdown


2016-03-16  Vlad Paiu  <vladpaiu at opensips dot org>
	* [2a61e97] :

	Fixed $TH_callee_callid to reflect '=' being an invalid character in callids Closes #800
	(cherry picked from commit dc229a1ac6312cba9db75e49bc09b931a549375f)


2016-03-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2d0cebc] :

	Fix crash when using $si in non SIP routes.
	If using $si in event, timer or startup routes, return a NULL value.
	Use a dummy AF_INET from src and dst IPs.
	Prevent crashing while evaluating $si by checking return code of ip_addr2a()
	Closes #817
	Outdates #828


2016-03-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7511e84] :

	Fixed async jump for end2end ACKs.
	As end2end ACKs do not create a sip transaction, force sync for all async operations (as we cannot suspend and resume).
	Closes #819
	(cherry picked from commit b2bc43e76494e07d6cb1ce1bec2fc27e72fa0a47)


2016-03-14  Răzvan Crainea  <razvan at opensips dot org>
	* [4a692e7] :

	Merge pull request #827 from jarrodb/rabbitmq
	event_rabbitmq order of _rmq_send attributes


2016-03-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [63d8542] :

	[drouting] improve loading/reloading speed
	Drouting gateways and carriers are now being held internally as
	an avl map(implemented in core) instead of a linked list. This
	brings dramatic improvement to the time in which the module is
	loaded.


2016-03-14  Jarrod Baumann  <jarrod at unixc dot org>
	* [b8779e5] :

	event_rabbitmq order of _rmq_send attributes


2016-03-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4601e56] :

	Fixed memory leak on checking disposition hdr.
	Free the parsed disposition body all the time (on success and failure) as it is not attached to any structure, so it will leak if not explicitly be freed.
	Credits for reporting this go to Jarrod Baumann.
	Based on an original fix from Jarrod Baumann
	Closes PR #825


2016-03-09  Ovidiu Sas  <osas at voipembedded dot com>
	* [764968f] :

	modules/usrloc: since domain field can be null, make null to be default


2016-03-09  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [e6bb7ac] :

	Merge pull request #823 from jarrodb/db_postgres
	Add JSONOID to pg_type.h for supporting JSON return types as DB_STRING


2016-03-08  Jarrod Baumann  <j at rrod dot org>
	* [8ef3f38] :

	Add JSONOID to pg_type.h for supporting JSON return types


2016-03-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b68c9b9] :

	[nathelper]updated fix_nated_contact() documentation
	Document that changes related to the contact made by
	fix_nated_contact() are lost in the resume route called after an
	async function is used.


2016-03-08  Liviu Chircu  <liviu at opensips dot org>
	* [e403a2b] :

	dialog: Lower log level of state change errors
	Out-of-order SIP requests are a frequent occurence in high-traffic
	environments. The dialog module should not consider these events as
	being critical, but rather as warnings, so they can be easily
	filtered out from the logs.


2016-03-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [fceff26] :

	[sipcapture]updated docs for hep_relay()


2016-03-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4ec54e8] :

	[sipcapture]new hep_relay() function
	This function allows turning OpenSIPS into a full HEP
	compatible proxy. Now you can add/change/remove hep headers and
	after all this you can forward your message anywhere you want.
	The routing is done same as in the tm module such that one can
	use multiple HEP destinations and balance between them.


2016-03-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e8679a0] :

	[proto_hep]fix buffer bug in hepv1/2


2016-03-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [370270c] :

	removed files uploaded by mistake


2016-03-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d2307e5] :

	Update all script with log_level and debug_mode


2016-03-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3b37b82] :

	Fixed leak due wrong return code handling.
	Based on a patch provided by Jarrod Baumann (@jarrodb)
	Closes #822


2016-03-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [f906d93] :

	Merge pull request #814 from sippy/master_rtpp_ip6_fix
	Fix an issue with IPv6 in the rtpproxy module


2016-03-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [3f4dc80] :

	Merge pull request #770 from ionutrazvanionita/sipcapture
	[sipcapture] full support for hep in sipcapture/proto_hep


2016-03-07  Liviu Chircu  <liviu at opensips dot org>
	* [c234282] :

	Completely remove script flags
	Namely, setsflag(), resetsflag(), issflagset()

	With the advent of async operations, the delimitation between current
	SIP message context and script context is even more blurry.

	Fixing the script flags to work with async would involve storing them
	into message context. But that would also make them persistent through
	failure route. In turn, this breaks the concept of scripts flags, since
	they should only live through a single script execution (entry->exit).

	To sum up, we dropped script flags because async silently broke them,
	and fixing them would actually break them even more!


2016-03-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [f4b803f] :

	modules/b2b_logic: fix b2b_logic lable for dbtext  - allow scenario, e1_sid and e2_sid fields to be NULL


2016-03-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [11a805b] :

	modules/b2b_entities: fix crash when restoring b2b entities from dbtext


2016-03-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [7e0175b] :

	modules/usrloc: fix location table for dbtext  - allow domain field to be NULL


2016-03-04  Liviu Chircu  <liviu at opensips dot org>
	* [60d4d4b] :

	tm: Refactor some hardcoded static string lengths
	This also fixes a couple of chopped MI error strings in "t_uac_dlg"


2016-03-04  Razvan Crainea  <razvan at opensips dot org>
	* [a607aa8] :

	tcp: prevent invalid mem access
	Reported by Saúl Ibarra Corretgé


2016-03-03  Liviu Chircu  <liviu at opensips dot org>
	* [6d1704c] :

	Allow setting branch flags when no branches are yet appended
	Commit 5e3f06800e was too restrictive, since flags for "branch 0"
	(a special branch, stored in current struct sip_msg) may be set regardless of
	the number of append_branch() operations done previously!

	Reported by Dragomir Haralambiev


2016-03-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3ae1811] :

	[proto_hep]set predefined context memory to 0 before using it


2016-03-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [419c9dc] :

	[sipcapture]updated docs


2016-03-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [67c7473] :

	[sipcapture] hep_chunks setter/getter/delete funcs; hep_net variable
	* hep version 3 chunks have now three functions with which they can
	be manipulated: hep_set(add/modify a chunk), hep_get(get vendor id
	and value of a chunk) and hep_del(remove a chunk);
	* hep_net is a pseudovariable which gives layer 3 and 4 information
	about hep communication(where does the packet comes from and on
	which interfaces it was received);
	* sip capture now holds an extra parameter - protocol type which
	gives information about the protocol of the encapsulated packet;


2016-03-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1714db5] :

	[proto_hep]custom chunks, predefined context, bug fixes
	* proto_hep can now read custom chunks;
	* use 0x0000 vendor id for generic chunks instead of OpenSIPS
	vendor id;
	* what was being done in sipcapture(modify receive_info structure
	with data from the hep message) is now being done in proto_hep;
	* proto_hep populates a predefined context in which he holds its
	own data, passing this data to receive_msg() function;
	* don't use hardcoded generic chunk values;
	* fixed bug in hep udp(v1/2)


2016-03-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7464a86] :

	have a predefined context before calling receive_msg


2016-03-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [09d6d47] :

	[proto_hep]avoid double byte order conversion for payload chunk


2016-03-03  Ionut Ionita  <ionutionita at opensips dot org>
	* [202b0e1] :

	Merge pull request #809 from ionutrazvanionita/postgres_bigint
	[dbschema]8 byte autoincrement is now fixed to BIGSERIAL PRIMARY KEY


2016-03-02  Răzvan Crainea  <razvan at opensips dot org>
	* [252a758] :

	Merge pull request #815 from sippy/master_freebsd_fix
	Fix build error on FreeBSD


2016-03-01  Maksym Sobolyev  <sobomax at sippysoft dot com>
	* [60342f5] :

	Fix build error on FreeBSD by including proper headers for the struct in_addr.


2016-03-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [9e8654f] :

	modules/presence: print error log only for errors


2016-02-29  Maksym Sobolyev  <sobomax at sippysoft dot com>
	* [ef01e85] :

	Fix an issue with IPv6 which may result in SDP containing mismatching protocols, e.g.
	"c=IN IP4 0:0:0:0:0:0:0:1"


2016-02-29  Razvan Crainea  <razvan at opensips dot org>
	* [6c99004] :

	rename s_addr to avoid overlapping with Solaris structs
	Discovered by Nathaniel L. Keeling


2016-02-29  Julián Moreno Patiño  <julian at debian dot org>
	* [e5f0b55] :

	Deprecate 'use UNIVERSAL'


2016-02-29  Liviu Chircu  <liviu at opensips dot org>
	* [84be3ac] :

	mathops doc: fix typos


2016-02-29  Liviu Chircu  <liviu at opensips dot org>
	* [f3a1d2d] :

	Merge pull request #812 from rrb3942/master
	Switch math_eval to use tinyexpr and remove conversion to RPN


2016-02-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [103e2b7] :

	db/schema: emergency_service_provider - fix copy/paste error generating duplicate fiels name


2016-02-27  Ryan Bullock  <rrb3942 at gmail dot com>
	* [ba5da58] :

	Switch math_eval to use tinyexpr and remove conversion to RPN


2016-02-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [103f5f5] :

	modules/presence: fix active_watchers table for dbtext  - allow reason field to be NULL


2016-02-26  Liviu Chircu  <liviu at opensips dot org>
	* [0962af1] :

	rest_client: Improve logging of TCP connect


2016-02-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6e591a6] :

	[epoll]LM_DBG on EPOLLHUP event


2016-02-26  Razvan Crainea  <razvan at opensips dot org>
	* [fe785bf] :

	loop: declare fd_map for devpoll
	Reported by Nathaniel L. Keeling III


2016-02-26  Di-Shi Sun  <di-shi at transnexus dot com>
	* [0e3c707] :

	Merge branch 'master' of https://github.com/OpenSIPS/opensips.git


2016-02-26  Di-Shi Sun  <di-shi at transnexus dot com>
	* [b0145d4] :

	Fixed typos.


2016-02-26  Di-Shi Sun  <di-shi at transnexus dot com>
	* [96b8c70] :

	Updated to support STIR.


2016-02-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ef5ae01] :

	[dbschema]8 byte autoincrement is now fixed to BIGSERIAL PRIMARY KEY


2016-02-25  Ionut Ionita  <ionutionita at opensips dot org>
	* [2b8fd2d] :

	Merge pull request #781 from ionutrazvanionita/dlg_profiles
	[dialog] flag for replicating profiles


2016-02-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6a4f732] :

	[dialog][dlg profiles patch]fix coding style issues


2016-02-25  Razvan Crainea  <razvan at opensips dot org>
	* [a547af5] :

	other spellchecks


2016-02-25  Julián Moreno Patiño  <julian at debian dot org>
	* [a71f129] :

	update spelling checks
	(cherry picked from commit e6b73956c817629b66eef801a8ffe06d5e2d457f)


2016-02-25  Julián Moreno Patiño  <julian at debian dot org>
	* [a3de5fc] :

	support reproducible builds
	(cherry picked from commit d04e3b7fa96142b6def8430890c6c51fa5e1ef6a)


2016-02-25  Julián Moreno Patiño  <julian at debian dot org>
	* [25a53ef] :

	update changelog and add berkeley deb
	(cherry picked from commit 04b2eba31b6f7806a1f10a492aa393920a1b4d1f)


2016-02-25  Julián Moreno Patiño  <julian at debian dot org>
	* [a336e99] :

	fix parallel building


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [5718e24] :

	destination sets: Add yet another NULL check
	Reported by Ovidiu Sas
	Fixes #806


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [4b1ed7d] :

	Merge pull request #786 from rvlad-patrascu/time_keeper_bug
	Fix the lagging behind of time_keeper process


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [fb8b1f2] :

	SIP forking logic: Add extra NULL checks
	This prevents a crash when no branches are pushed yet, but a branch
	management function is called (e.g. t_replicate() or a write to
	$(branch(uri)[0]) is done)

	Issue reported by Trevor Francis


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [5e3f068] :

	SIP forking logic: Add extra NULL checks
	This prevents a crash when no branches are pushed yet, but a branch
	management function is called (e.g. t_replicate() or a write to
	$(branch(uri)[0]) is done)

	Issue reported by Trevor Francis


2016-02-24  Julián Moreno Patiño  <julian at debian dot org>
	* [2a999c7] :

	Order target dependencies to avoid FTBFS in parallel builds.
	(cherry picked from commit 9fc407d01a1743fa8332d9436004994d3e4dbfb3)


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [f09cd45] :

	blacklists code: Improve coding style
	* add space between:
	  * statement and paranthesis
	  * operands and operators
	* proper use of "NULL" vs. "0"
	* proper way to perform NULL-checking:
	  * for function results
	  * for all pointers


2016-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [2e7588b] :

	Blacklisting logic: Fix async-related issues
	Similar issue to the one behind commit a7b287f5f. Static memory
	holders are no longer compatible with async operations and need
	to be moved into dynamic mem (pkg in our case) so that data can
	be properly restored before resuming the script.


2016-02-23  Răzvan Crainea  <razvan at opensips dot org>
	* [85618dc] :

	Merge pull request #631 from staskobzar/master
	Fixing bug in debian init script.


2016-02-23  Răzvan Crainea  <razvan at opensips dot org>
	* [2253071] :

	Merge pull request #728 from ionutrazvanionita/rlimit
	Slot Based Taildrop algorithm for ratelimit


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [cec0c72] :

	build: change variables for other OSes


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [b6324b3] :

	debian: remove date-time


2016-02-23  Liviu Chircu  <liviu at opensips dot org>
	* [a7b287f] :

	SIP forking engine: Fix async-related issues
	Previously (on OpenSIPS...), doing _any_ async operation at script level
	after a destination set had been built (by lookup(), append_branch(), etc)
	would have lead to unpredictable results.

	This patch addresses the problem by moving the destination set storage
	into the current processing context (from static mem to pkg mem).

	Impact on memory usage at worst (12 branches for each request) is
	an extra 30 MB of PKG memory per every 1000 cps.


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [ff0a71a] :

	fix warnings on i386


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [91ff393] :

	debian: update prefix names


2016-02-23  Liviu Chircu  <liviu at opensips dot org>
	* [d0418af] :

	Improve logging for out of memory errors
	OpenSIPS now kindly displays _what kind_ of memory it actually ran out of!


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [4d5d2ce] :

	Makefile: dash cannot use variables that contain -


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [ea4b145] :

	debian: add glibc for xmlrpc


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [f7aeca8] :

	debian: lua no longer depends on libmemcache


2016-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [e8368f4] :

	lua: update memcached readme


2016-02-22  Razvan Crainea  <razvan at opensips dot org>
	* [1ba0327] :

	lua: port obsolete memcache to memcached


2016-02-22  Razvan Crainea  <razvan at opensips dot org>
	* [6ec4106] :

	complete rename set_proc_log_level


2016-02-22  Razvan Crainea  <razvan at opensips dot org>
	* [439e5ee] :

	allow libjson0-dev in travis
	they are using older packages


2016-02-22  Razvan Crainea  <razvan at opensips dot org>
	* [2abd579] :

	obsolete libjson0-dev


2016-02-22  rvlad-patrascu  <vlad.patrascu at onem dot com>
	* [29dd83b] :

	Fix the lagging behind of time_keeper process
	Solution involves occasionally synchronizing with the system time in the time_keeper and also time drift compensation in the timer process.
	Fixes #745


2016-02-19  Liviu Chircu  <liviu at opensips dot org>
	* [9cf7bec] :

	Merge pull request #715 from ionutrazvanionita/db_virtual_async
	ASYNC_CHANGE_FD status + db engine async state parameter + db_virtual async


2016-02-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bd94e6b] :

	Docs updated on t_newtran()


2016-02-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0db7789] :

	t_newtran() automatically sends a 100 Tryting for INVITE.
	TO have a consistent behavior between:
		t_newtran();
		t_relay();
	and
		t_relay();

	(where in the first case a 100 Trying will not be auto generated), we do not sent the 100 Trying on r_relay (when transaction is built) but on t_newtan().
	Reported by MAxim Sobolev.


2016-02-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [737ced7] :

	async support for db_virtual


2016-02-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9abcf92] :

	hold db state between async call and resume function
	Databases can now keep their state between the async call and the
	resume parameter using a newly added (void*) parameter. It is the
	job of the upper layer(the module calling the async function) to
	store this database state inside the (void*) parameter they are using
	to hold their state (see avpops and sipcapture async handling).

	Also this patch handles the new ASYNC_CHANGE_FD state in avpops
	and sipcapture.


2016-02-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ff09d49] :

	add ASYNC_CHANGE_FD status in reactor
	Allows changing the file descriptor in the resume function. Such
	functionality is useful for failover purposes, like having
	multiple destinations, you find that one is not working only in
	the resume function and you want to try another one. Now you
	can change the file descriptor, remove the old one and add the
	new descriptor and then wait for it to be triggered.


2016-02-17  Ovidiu Sas  <osas at voipembedded dot com>
	* [8d6bba5] :

	modules/pua: fix crash at startup when no tuple_id


2016-02-16  Ovidiu Sas  <osas at voipembedded dot com>
	* [386eba0] :

	modules/b2b_sca: set default table to b2b_sca


2016-02-16  Ovidiu Sas  <osas at voipembedded dot com>
	* [5dab066] :

	modules/b2b_logic: fix crash when using "top hiding" scenario


2016-02-16  Ionut Ionita  <ionutionita at opensips dot org>
	* [fbdf076] :

	Merge pull request #790 from liviuchircu/master
	Improve qvalue parsing


2016-02-16  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [1ed467b] :

	Merge pull request #793 from jarrodb/dispatcher
	add ds_probing_list parameter to specify which sets to probe


2016-02-16  Jarrod Baumann  <jarrod at unixc dot org>
	* [2140eee] :

	documentation for additional ds_probing_list parameter


2016-02-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2b7d89b] :

	Fixed bogus init of missed cols types.
	Closes #795 .
	Reported by @ankogan on GITHUB


2016-02-15  Razvan Crainea  <razvan at opensips dot org>
	* [c24b587] :

	arm: unforce thumb mode


2016-02-15  Jarrod Baumann  <jarrod at unixc dot org>
	* [a49551c] :

	add ds_probing_list parameter to specify which sets to probe


2016-02-12  Liviu Chircu  <liviu at opensips dot org>
	* [ed60363] :

	Improve qvalue parsing
	* accept qvalues with no decimal digits (e.g. "1." and "0.")
	  (this removes E_Q_DEC_MISSING from error.h)
	* improve bad qvalue error reporting


2016-02-12  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0a2cc3e] :

	[freeradius-client async patch][bugfix]on resume fetch index from async context


2016-02-12  Liviu Chircu  <liviu at opensips dot org>
	* [037e259] :

	Update ViM syntax file


2016-02-11  Vlad Paiu  <vladpaiu at opensips dot org>
	* [82218fa] :

	Don't push throug RTPProxy streams with port 0 in SDP
	(cherry picked from commit 5dec43a750c7af714dfec9ac9ef43cc0c33e2280)


2016-02-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6a40cd6] :

	[acc][bugfix]update module's log_level not global in modparam section


2016-02-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7367cee] :

	Fix proper callig in local cancels with TH.
	Extend the coverage of the preocessing context and TM context over the cancel_branch() function (in the timeout handler) so the TH callbacks can reach back the dialog and do the TH related changes.
	Reported by Julian Santer on mailing list.
	(cherry picked from commit 8133656de9503a122a72c0f80d11eff975bc43f1)


2016-02-11  Razvan Crainea  <razvan at opensips dot org>
	* [421e3e3] :

	proper compile on gcc 4.8


2016-02-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [583ab03] :

	Fix compile error.
	As now log_level is a global variable, avoid using it as function param or local var.
	Reported by Nick Altmann


2016-02-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f174629] :

	set_debug() function replaced with $log_level
	The new script variables allows read and write operations. On write, it does exactly as the old set_debug() function (on writting the NULL value -> reset the log level)


2016-02-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [46a26bf] :

	Updated to new the prototypes for logging functions


2016-02-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [61f1b42] :

	"debug" global parameter renamed to "log_level"


2016-02-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8803a87] :

	Renamed local log_level variables/parameters.


2016-02-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b9b0083] :

	Added "debug_mode" option as replacement for "fork"
	While enabling "debug_mode", opensips will automataically force:
		- staying in foreground (do not detach from console)
		- set logging level to 4 (debug)
		- set logging to standard error
		- enable core dumping
		- set UDP worker processes to 2
		- set TCP worker processes to 2


2016-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7eced16] :

	Removed the "dont_fork" feature


2016-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ce89e29] :

	Fix IPv6 insertion in fix_nated_contact()
	Add the [ ]  around IPv6 in the newly built contact URI.
	Reported by Jonathan Hunter on the mailing list


2016-02-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [81cf203] :

	[dialog] updated the docs for the new flag feature


2016-02-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4468b4a] :

	[dialog] fix bug - don't set repl to null after allocating it


2016-02-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [23c02f3] :

	[dialog] flag for replicating profiles
	added a new flag which allows replicating over the bin interface
	only the profiles which have it set


2016-02-02  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [8e10339] :

	Merge pull request #752 from ionutrazvanionita/siptrace
	[siptrace] all types of tracing are done using sip_trace function


2016-02-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [76ba3b5] :

	[siptrace] all types of tracing are done using sip_trace function
	* added trace_id parameter with which one is able to define
	database urls and trace uris (HEP and SIP); the trace id is given
	as an argument to sip_trace() function;
	* multiple trace_id s can be defined under the same name which
	will alow users to do multiple types of tracing using only one
	function call;
	* sip_trace() now accepts flags to specify what to trace: message,
	transaction or dialog; in stateless mode only message trace does
	a valid type of trace;
	* traced_user_avp now is as an argument to sip_trace() function;
	it's name now changed to trace_attrs and also the column in the
	database and table version were modified;setting it won't duplicate
	entries in the database; it will do only one insert setting the
	trace_attrs column accordingly;
	* most of the parameters in the modparam section(db_url, table,
	duplicate_uri, duplicate_with_hep) are now part of a trace_id
	called 'default'; removed the old ones completely; all that remains
	now is the trace_on parameter which can be set/unset with mi
	(read the docs for more info), trace_local_ip and trace id;
	* the module can catch internally generated stateless replies using
	the sl module;
	* if transaction module not loaded but transaction mode selected
	for sip_trace() function, the module will work in transaction
	aware mode, meaning that will catch incoming and outgoing
	requests and also will catch internally generated replies using
	the sl module;


2016-02-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [031304a] :

	Fix freeing processing context after a second async jump.
	If thw processing ctx was stored back into transaction (due a new async call), do not free the current ctx (as it became NULL).
	Reported by Minh PHAN (@qmphan).
	Closes #780 .


2016-02-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6dd88ab] :

	Fixed autodetection of the reactor size (open files)
	If we auto-detect the size of the reactor(via rulimit), be sure we have enough pkg memory (and do the necessary correction).
	If the open files limit is given, warn if the reactor will use too much memory.
	Thanks to MAxim Sobolev for reporting it via mailing list and to @cepehutu
	Closes #778


2016-02-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0921088] :

	Fix missing update on SL callbacks.
	related to the prev commit (8c56303)


2016-02-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8c56303] :

	SL callbacks moved into core and merged with fwd callbacks.


2016-02-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [91df869] :

	Fix calculation of timer set on 32b
	A bogus bitwise operation broke the calculation of the timer set on 32bits arch.
	Reported by @mshary (Muhammad Shahzad Shafi)
	Closes #732.
	(cherry picked from commit 5b7b5f78cb675d1d4126866307dc0caa22067d09)


2016-01-28  Liviu Chircu  <liviu at opensips dot org>
	* [a4e3ff8] :

	Fix declarations/definitions for all clusterer api variables
	Variable definitions (as opposed to declarations) in C header files are
	a bad practice and must be avoided.

	Reported by Dragomir Haralambiev


2016-01-28  Liviu Chircu  <liviu at opensips dot org>
	* [4c60af8] :

	$DLG_timeout pseudo-var: Fix crash on write operations
	Unless dialog replication is enabled, issue would occur.

	Credits to Dragomir Haralambiev for reporting and helping troubleshoot this


2016-01-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2efdbf8] :

	Fix the sizing of the Async Reactors.
	Adjust the size of the reactor accroding the limit of opens files.
	Closing #765.


2016-01-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b03fce9] :

	Fixed wrong warning on memory leak.
	Set the auth_hdr buffer to NULL after moving the buffer into the lump.
	Reported by Colin Martin on mailing list
	(cherry picked from commit bbaf8213ae9856d2345aa66d8aa002ec5f1f3fa5)


2016-01-26  ionutrazvanionita  <ionutionita at opensips dot org>
	* [be43fcd] :

	[event_xmlrpc] accept paths when subscribing to event
		Before, by default, in the first line of the HTTP POST
	that was sent to the server the path was always '/RPC2'. Now
	you can specify the path after the port, just like in urls
	'xmlrpc:ip:port/path/to/rpc:method'.


2016-01-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3a6f4b9] :

	Fix codec handling functions when faulty streams are defined.
	Bogus test on the return code of stream_process() (using bitwise OR for -1, 0 and 1 values :O ), leads to a generic failure to find any codec in any stream if there is an invalid stream in the SDP.
	For example, if a video stream is defined but with no codecs, stream_process() will return -1 for it (as it is a bogus stream). While iterating through all the stream (including the valid audio stream), the -1 ret code will discard any 1 future ret code due the bogus bitwise OR.
	(cherry picked from commit ef82ca2368462c41f7115202e90f73d8ab16fd1f)

	Conflicts:
		modules/sipmsgops/codecs.c

	(cherry picked from commit 41c8902327aa42af9718980acf9260d3621f2a50)


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eaef57e] :

	README files regenerated


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0042b94] :

	Fix bugs in modules-readm target.


2016-01-25  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [a61a88d] :

	Merge pull request #632 from shripchenko/alias_db
	alias_db module changed to allow alias_db_find() to be called from startup route


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e210f45] :

	Fix STANDARD and EXTRA list of tables.
	Permissions (in postgres) were not granted for the missing tables.
	Reported by Nathaniel L. Keeling III on mailing list
	(cherry picked from commit aebf41f79274679bfc9a984a9d0c6871ac139462)

	Conflicts:
		scripts/opensipsdbctl.base


2016-01-25  Vlad Paiu  <vladpaiu at opensips dot org>
	* [e303afa] :

	Fix double free in case of errors when running MI command
	(cherry picked from commit ce6e8444afeb887f30d38cf90b0176ae9960fb72)


2016-01-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [48bc2d4] :

	[siptrace][Bugfix]Use hep proto socket_info struct when trying to send


2016-01-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [dfa7787] :

	[nathelper]before trying to remove check if remove_on_timeout flag set


2016-01-21  Razvan Crainea  <razvan at opensips dot org>
	* [9f68260] :

	daemonize: fix unnecessary close command


2016-01-21  Razvan Crainea  <razvan at opensips dot org>
	* [8a17be2] :

	fixed some missed compile warnings


2016-01-21  Razvan Crainea  <razvan at opensips dot org>
	* [a0caa91] :

	fix more bugs identified by coverity


2016-01-21  Razvan Crainea  <razvan at opensips dot org>
	* [3c37af3] :

	ws: verify headers when in client mode


2016-01-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b11baad] :

	Missing module "emergency" in extra list.
	This was braking the creation of extra tables (at least in postgres is did).
	Reported by Nathaniel L. Keeling III on mailing.
	(cherry picked from commit d9af15b70ed50b143e0ba5b27ff4a4b554ece28a)

	Conflicts:
		scripts/opensipsdbctl.base


2016-01-21  Liviu Chircu  <liviu at opensips dot org>
	* [1fedeee] :

	Coverity PR: minor refactorings
	(cherry picked from commit 975024142e724b315203dd14c58056a77f3d3959)

	Conflicts:
		modules/ldap/iniparser.c
		modules/usrloc/dlist.c


2016-01-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [02b4c25] :

	Merge pull request #769 from nikbyte/master
	Completely cpl-c rename


2016-01-20  Nick Altmann  <nick.altmann at gmail dot com>
	* [67d3e8b] :

	Completely cpl-c rename


2016-01-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ecfe3f7] :

	Merge pull request #768 from nikbyte/master
	Debian repository: fix cpl-c module building


2016-01-20  Nick Altmann  <nick.altmann at gmail dot com>
	* [00f2228] :

	Debian repository: fix cpl-c module building


2016-01-20  Nick Altmann  <nick.altmann at gmail dot com>
	* [13daa5c] :

	RPM spec: prepare for opensips 2.2


2016-01-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a76789c] :

	Renamed cpl-c to cpl_c for consistency reasons


2016-01-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cc75a4c] :

	Added structure for wss docs.
	(work in progress)


2016-01-19  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [8d23d9b] :

	Merge pull request #664 from wdoekes/wjd-allow_unset_dlg_in_req_route
	dialog: Document that unset_dlg_profile can be used from request_route.


2016-01-19  Razvan Crainea  <razvan at opensips dot org>
	* [384a4ad] :

	integrate with clang and fix warnings


2016-01-19  Razvan Crainea  <razvan at opensips dot org>
	* [3560844] :

	evi: subs can never be NULL


2016-01-19  Razvan Crainea  <razvan at opensips dot org>
	* [b33f1ac] :

	call va_end() on all paths


2016-01-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4fc06a9] :

	Fix restoring leg route set.
	Reported by Søren Andersen.
	(cherry picked from commit b602a7fb06a3658b71adedd69cf94eae814e93e5)


2016-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [70e5a65] :

	uri: fix e164_check overflow checking
	Reported by @ferrored on github
	Closes #762


2016-01-18  Liviu Chircu  <liviu at opensips dot org>
	* [ccce2e6] :

	Coverity PR: Fix bad conflict merge
	(cherry picked from commit 83f459781eb662c351f6edaaa088443a34ca2136)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [4ff4715] :

	fixing coverity found defects - memory corruption, null dereference
	(cherry picked from commit fd57609f5411e622dca593b729e1826269243c5b)
	(cherry picked from commit 56a72304b9ec154d70dd41a63f29fa33faecaef5)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [79f19c7] :

	fixing coverity found defects - null dereference & broken logic
	(cherry picked from commit 81aeba42ca04df7b3fc42ab2498717cc31227967)
	(cherry picked from commit 6b4a3271da6a62f5bead2a958672de45def57ad6)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [8c9b818] :

	fixing coverity found defects - null dereference
	(cherry picked from commit 906bb9172b4ce0ab0e7bf4eca7da58211aa8ac5b)

	Conflicts:
		cachedb/cachedb_id.c

	(cherry picked from commit 37a7466c8b7c3e8ec979444c37c9f738bd0e43d8)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [49c1d65] :

	fixing coverity found defects - null dereference
	(cherry picked from commit b578dda307f24e56f456e5b02c0c7591ed6746a4)
	(cherry picked from commit 19e518835dd0f88868613c5fe6fbf8fe19180252)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [0a8e277] :

	fixing coverity found defects - copying into fixed size buffer without check, db_http
	(cherry picked from commit d471234733de299c88f1036ba17a2406b8ae7a89)
	(cherry picked from commit 20004e4a87d4e84c216782dc06484a970183894a)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [3cf56b1] :

	fixing coverity found defects - copying into fixed size buffer
	(cherry picked from commit 92a7361eda2c6cd6e9ad637dab187cf87fefa987)
	(cherry picked from commit c9aaae3ac63970e3f394f66e048a1c82b99774c7)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [26de471] :

	fixing coverity found defects - null dereference, invalid e164 number check
	(cherry picked from commit b8e2318ba58e56484294913e21a74a7cd79adf40)
	(cherry picked from commit c48773cdb2ae9f8b6ab44b38df1d2c37127537ba)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [5e31e35] :

	fixing coverity found defects - null dereference, break missing
	(cherry picked from commit c004967f7c272e5b9043f5f3e330827f0682a009)

	Conflicts:
		db/db.c

	(cherry picked from commit ed699bfde4759434937349e198a694a4bab3f9ff)

	Conflicts:
		modules/usrloc/dlist.c


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [790495e] :

	fixing coverity found defects - logical fix in ul callback check type, null dereference
	(cherry picked from commit aeedb7d94439b774d35009899b04d2c6060437d0)

	Conflicts:
		modules/dispatcher/dispatcher.c

	(cherry picked from commit a152bdf3c0a3877827e1a02f7e05d611a0366a7f)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [347fea8] :

	fixing coverity found defects - processing initialized variables, control flow, invalid expressions
	(cherry picked from commit b22844e0a1d4d54d0f8f836837f8447154799011)

	Conflicts:
		modules/drouting/drouting.c

	(cherry picked from commit 50737ff2de91e55971512bf327042fe3f51ca619)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [853702b] :

	fixing coverity found defects - resource leakage
	(cherry picked from commit e09f09ae89aff31393b04e40b4f82632fd4f50ff)
	(cherry picked from commit 21083e84ede0551ae937bb4cea7c6ddab44d86f1)


2016-01-18  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [1f7d58e] :

	fixing coverity found defects - invalid memory access / memory corruptions
	(cherry picked from commit c537cb8151e9436d88a9410e02ef11a093008ff0)

	Conflicts:
		modules/dialog/dlg_tophiding.c

	(cherry picked from commit 57a7bf02a54f91020e5163be82b0ac3cf09e0531)


2016-01-17  Nick Altmann  <nick.altmann at gmail dot com>
	* [6a5d421] :

	RPM spec: prepare for new build system - remove obsolete triggers - change tarball name and url


2016-01-15  Ovidiu Sas  <osas at voipembedded dot com>
	* [be371da] :

	uac_registrant: update timer handling  - closes #758 - uac_registrant wrong hash sequence


2016-01-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9bd4c77] :

	[avpops]fix acmds instead of cmds


2016-01-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [939b343] :

	[avpops]check if asyn funcs used in separate loop(on acmds struct)


2016-01-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [785e4b8] :

	[proto_hep]don't htons one byte type variable


2016-01-14  Ovidiu Sas  <osas at voipembedded dot com>
	* [666cf83] :

	tm: remove unused variables


2016-01-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f14804b] :

	Import some changes from PR #661


2016-01-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [16cea6a] :

	[sipcapture]completely remove mod_init mi_cmds registration


2016-01-14  Razvan Crainea  <razvan at opensips dot org>
	* [47bbc07] :

	bin: report the dimension of the buffer
	This allows the user to control how much info to send


2016-01-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e36453e] :

	[sipcapture]mi_cmds were registered twice


2016-01-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [055f4b1] :

	[snmpstats]more hints for setting up in the docs


2016-01-13  Liviu Chircu  <liviu at opensips dot org>
	* [eef55c9] :

	opensipsdbctl: Properly create "clusterer" and "tls_mgm" tables


2016-01-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7d090c3] :

	Allow retransmissions and wait for reply/timeout on canceled branches.
	Do not do anything about branches with no received reply; better continue the retransmission hoping to get something back; if still not, we will generate the 408 Timeout based on FR timer; this helps with better coping with missed/lated provisional replies in the context of cancelling the transaction

	Many thanks to Maxim Sobolev for bringing this under discussion.
	More to be read:
	http://lists.opensips.org/pipermail/devel/2015-November/018623.html
	http://lists.opensips.org/pipermail/devel/2015-December/018810.html
	(cherry picked from commit 0dfb46df96d594c9b592d64913a44ab1cccd80e3)


2016-01-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ea6e1fa] :

	Fix race condition between retransmission and wait timer in TM.
	Overlapping of retransmission timer and wait timer may lead to inconsistent timer list -> various crashes around TM timer lists.
	Related to #749, #732, #723.
	Many thanks for Trevor Francis ( @46labs )  for helping with the troubleshooting.

	IMPORTANT NOTE: this is a temporary fix as it simply avoid the collision between the two timer routines - normally the routines themselves should be safe to run in parallel (more digging is required here).


2016-01-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aa5d483] :

	Fix pinging partitioning from nat_traversal.
	Do not use the static counter as the timer routine gets executed in various processes now - better use a shm counter.
	See all the details in #751
	Based on the PR #751
	Closing / outdating #751
	Credits for finding the fix and comming up with a solutoin go to @aerringer.
	(cherry picked from commit 4395575d7f251e14fdc7b0dd92b7f5b329515b4e)


2016-01-13  Razvan Crainea  <razvan at opensips dot org>
	* [76034ad] :

	redis: add timeout for connect and query
	This prevents OpenSIPS from blocking waiting for a connection to be
	established.

	Fixes #753 reported by Nick Altmann


2016-01-12  Razvan Crainea  <razvan at opensips dot org>
	* [29190f3] :

	ws: release TCP connection if not static
	This should fix a memory leak (reported in #743 by Eric Tamme)


2016-01-12  Razvan Crainea  <razvan at opensips dot org>
	* [ffb228d] :

	ratelimit: supress limit warning when it changes


2016-01-12  Liviu Chircu  <liviu at opensips dot org>
	* [acb9f72] :

	Merge pull request #665 from ionutrazvanionita/master
	fix calls per minute for fraud_detection module


2016-01-12  ionutrazvanionita  <ionutionita at opensips dot org>
	* [dd25c63] :

	fix calls per minute for fraud_detection module
	Now the calls per minute parameter is build as consisting of an initial
	time(t0) and a 60 seconds window(as was before). Each window slot holds the
	calls received in that second(as before). The difference is that now
	these parameters are updated based on three conditions:
	* we receive the call between [t0; t0 + WINDOW_SIZE(60s)] - we only update
	the number of calls for that slot(t0 + current time) and the calls per minute
	parameter
	* we receive the call in the interval of [t0+WINDOW_SIZE; t0+2*WINDOW_SIZE] -
	we do the following: move t0 in current call time - WINDOW_SIZE, invalidate
	all the calls we knew of from t0 to current t0 (current call time - WINDOW_SIZE)
	* we receive a call after 2 * WINDOW_SIZE(60 seconds) + t0 - this invalidates
	all the calls we knew of since the window is not does not contains calls newer
	than the last 60 seconds;


2016-01-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b32a14e] :

	[proto_hep]correctly calculate length when sending


2016-01-11  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [48023d7] :

	Merge pull request #748 from ionel-cerghit/ds_list_explicit
	dispatcher: add ds_list full mi command, update documentation


2016-01-11  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [829bd47] :

	dispatcher: reworked ds_print_mi_list flags parameter


2016-01-08  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [f471785] :

	dispatcher: add ds_list full mi command, update documentation
	optional parameter 'full' added for ds_list full, which will display
	the weight, priority and description of a destination
	role of weight and priority briefly explained in documentation, FAQ section


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [2e5160e] :

	cachedb_mongodb: Fix crash when losing DB connection
	Tested with mongo-c-driver v0.6. It turns out that the driver's
	mongo_cmd_get_last_error() does not always return an iterable bson
	structure. This patch adds a safety check, so that iteration is skipped.

	Reported by Sasmita Panda
	Closes issue #747


2016-01-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [2e59ba9] :

	Merge pull request #746 from lemenkov/remove_has_sdp
	rtpproxy: patch: has_sdp() does not exist


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [1cf1997] :

	dispatcher doc: Improve "partition" param section


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [e0c0a54] :

	Fix several print formatting bugs
	%*.s is a format specifier for string width
	%.*s is a format specifier for string length

	99% of the time, we want the latter one and _not_ the former.


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [d334a16] :

	dispatcher params: Add support for any whitespace char
	Improves script coding style. This is working now:

	modparam("dispatcher", "partition",
	            "ds_sip_inbound_gws : \
	                    db_url      = mysql://user:pass@172.16.4.5/opensips; \
	                    table_name  = dispatcher; \
	                    attrs_avp   = $avp(ds_attr_i)")


2016-01-06  Mikko Lehto  <mslehto at iki dot fi>
	* [4af7963] :

	rtpproxy: patch: has_sdp() does not exist


2016-01-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [078646e] :

	Just identation fixes


2016-01-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6205cff] :

	Improve WSS parsing.
	Avoid doing one step back (and double parsing) when deciding between WS and WSS.


2016-01-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f0aed8e] :

	Merge branch 'jarrodb-parse_wss'


2016-01-06  Jarrod Baumann  <jarrod at unixc dot org>
	* [8dd8c0b] :

	add parse_uri support for transport=wss


2016-01-05  Razvan Crainea  <razvan at opensips dot org>
	* [968a4e0] :

	proto_wss: first version


2016-01-05  Razvan Crainea  <razvan at opensips dot org>
	* [b3db77b] :

	nathelper: support wss in received


2016-01-05  Razvan Crainea  <razvan at opensips dot org>
	* [5a38f69] :

	rearange tls functions


2016-01-05  Razvan Crainea  <razvan at opensips dot org>
	* [e97fea1] :

	tls: more rework


2016-01-05  Razvan Crainea  <razvan at opensips dot org>
	* [f2687dc] :

	ws: make resource configurable


2016-01-05  Razvan Crainea  <razvan at opensips dot org>
	* [0665943] :

	fix wss socket print


2016-01-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7461c83] :

	Slot Based Taildrop algorithm for ratelimit
	    In this new algorithm a window is held per every pipe,
	which is defined by two parameters: window_size(seconds) and
	slot_period(microseconds). The number of slots is
	window_size*1000/slot_period. The window is updated with every
	call received and it's implemented as a circular vector, which
	modifies it's start based on the elements that were dropped.

	How is the window updated:
	* if no message comes in 2*window_time from when the window start
	was set , it means we can't use the values from any of the slots
	and we set the value from any of the slots to 0; the window start
	time is updated;
	* if the message comes in t=[start+window_time; start+2*window_time)
	it means that we can keep the values in slots in the interval
	[t-window_time;start+window_time) and drop the ones in
	[window_time; t-window_time); the window start time is updated;
	* it the message come in t=[start; start+window_time) we don't
	do any update do the window, only to the value of the slot corresponding
	to time t;

	The algorithm also shares this value through the bin interface, allowing
	to have the values from all the replicas. Also, before sending the
	value through the interface, the replica checks the window in order
	to send only the values in valid slots. Two different functions
	were made because of efficiency reasons. When replicating
	we only do some very short loops or maybe nothing.


2016-01-05  Liviu Chircu  <liviu at opensips dot org>
	* [1befb58] :

	Merge pull request #731 from ionel-cerghit/sql_cacher_simplified
	sql_cacher: remove pkg memory temporary list


2016-01-05  Liviu Chircu  <liviu at opensips dot org>
	* [8d697a6] :

	Makefile.conf.template: Improve mem allocator tooltips
	Also disable VQ_MALLOC for upcoming versions, since it's unmaintained
	and broken.


2016-01-05  Liviu Chircu  <liviu at opensips dot org>
	* [a6de582] :

	menuconfig: Allow entries to be commented out
	By using double comment, "##", we can prevent a DEFS line from being
	displayed in menuconfig, while keeping it in the template file.


2016-01-04  Ovidiu Sas  <osas at voipembedded dot com>
	* [6f183e7] :

	b2b_logic: remove unused variable


2016-01-04  Liviu Chircu  <liviu at opensips dot org>
	* [a51291f] :

	Merge branch 'rvlad-patrascu-allocator_rework'


2016-01-04  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [826aff0] :

	fix memory debug hash function collisions caused by integer downcasting when adding line number


2016-01-02  Ovidiu Sas  <osas@t40>
	* [ab96254] :

	dispatcher: documentation updates for ds_reload  - partition is accepted as an optional parameter


2015-12-29  Razvan Crainea  <razvan at opensips dot org>
	* [446dd58] :

	function search: properly search through switch st


2015-12-28  Razvan Crainea  <razvan at opensips dot org>
	* [b49d374] :

	httpd: properly treat select response


2015-12-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [56c8714] :

	avpops: start without db_url if no func is using DB


2015-12-23  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [dc01b2a] :

	q_malloc: don't abort on free(NULL) when debug is enabled


2015-12-23  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [ec603ae] :

	small changes to debug output for q_malloc, f_malloc and hp_malloc
	* f_malloc: print debug info to memlog instead of debug
	* display free memory amount for out of memory errors


2015-12-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1e93226] :

	strip_body(): check if content-type exists


2015-12-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [638b255] :

	Merge pull request #733 from ionutrazvanionita/cseq-fix
	fix validate_dialog cseq checking


2015-12-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [0deaad3] :

	Merge pull request #735 from OpenSIPS/revert-661-lb_fixup_fix
	Revert "load balancer: fixup functions fixes"


2015-12-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [3edf1f3] :

	Revert "load balancer: fixup functions fixes"


2015-12-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [9dbfdfa] :

	Merge pull request #661 from shripchenko/lb_fixup_fix
	load balancer: fixup functions fixes


2015-12-22  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [d4fd23a] :

	use the compile flag DBG_MALLOC to debug any memory allocator
	As a result, q_malloc is selected with the QM_MALLOC flag instead of DBG_QM_MALLOC.


2015-12-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [420b663] :

	Merge pull request #717 from ionel-cerghit/shmem_rework
	Shmem rework


2015-12-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [49efaa9] :

	comparse_uris: unescape all characters in user field


2015-12-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ef2232c] :

	fix validate_dialog cseq checking
	If prev_cseq from the dlg_leg is not set, check the
	r_cseq


2015-12-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4c1d619] :

	Usrloc: modify invalid contacts behaviour
	* stop inserting a contact even though received is OK
	(call parse_uri() for each contact)
	* at startup, if a bogus contact is found continue processing,
	letting the user know that he has to remove that contact from
	the database


2015-12-21  Razvan Crainea  <razvan at opensips dot org>
	* [bee77b2] :

	b2b_logic: allow the initial setup to have a dummy SDP


2015-12-21  Vlad Paiu  <vladpaiu at opensips dot org>
	* [6110e92] :

	ReINVITE Pinging Improvements : 	- ensure compatibility with NAT scenarios and  Topology Hiding, by extract Contact on the outgoing side 	- extract SDP on the outgoing side, in order to ensure compatibility with RTPProxy and various other SDP changes
	Work still in progress :
		- Properly handle late negociation between endpoints
		- Ensure SDP persistency ( DB and BIN replication )


2015-12-20  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [5a07ed1] :

	add memory status dump to f_malloc and hp_malloc
	* the memory dump contains a summary of allocated fragments
	* also correctly update the used memory statistics


2015-12-18  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [33998ab] :

	sql_caher: remove pkg memory temporary list
	the caching entries are parsed and stored directly in shared memory
	fix delimiters default initialisation, now done before script parsing


2015-12-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d605032] :

	Sipcapture: store in the database without passing through script
		With this new feature it is possible to store the HEP
	message inside the database without going through the script,thus
	allowing you to use the script for processing valid messages,
	since the ones that are send to this node aren't intended for it.
		There have also been defined a return code from the hep
	callbacks(HEP_SCRIPT_SKIP) which allows the type of behaviour
	explained earlier. If at least one HEP callback sets this return
	code then passing through the script shall be skipped.


2015-12-18  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [3d183e7] :

	q_malloc: change memory dump output to show summary of allocated fragments


2015-12-18  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [ec7fb15] :

	menuconfig: add posibility to toggle options in Compile Flags menu
	In order to specify which options should be exclusive with each other, the DEFS lines in Makefile.conf should be preceded by a "#DEFS_GROUP_START" line and followed by a "#DEFS_GROUP_END" line.


2015-12-16  Ovidiu Sas  <osas at voipembedded dot com>
	* [78cc475] :

	uac_registrant: fix index into the reg_hash table  - thanks to Razvan Crainea for spotting this out


2015-12-16  Ionut Ionita  <ionutionita at opensips dot org>
	* [2117a62] :

	Merge pull request #727 from ionutrazvanionita/kill_bug
	Kill bug


2015-12-16  ionutrazvanionita  <ionutionita at opensips dot org>
	* [cf53d0c] :

	wait for all processes to initialize before sending SIGTERM


2015-12-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d13db49] :

	gzip support for hepV3


2015-12-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3cb44df] :

	compression module:export gzip compress/decompress functions through an api


2015-12-14  Ovidiu Sas  <osas at voipembedded dot com>
	* [a4294ff] :

	Merge pull request #701 from nikbyte/master
	uac_registrant: avoid bulk re-registrations on large servers


2015-12-14  Nick Altmann  <nick.altmann at gmail dot com>
	* [e86bbfa] :

	uac_registrant: remove redundant loop


2015-12-14  Nick Altmann  <nick.altmann at gmail dot com>
	* [b69e56f] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2015-12-11  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [d182f9d] :

	blacklists: removed preinit_blacklists function
	the vector of blacklists is now created when the first list is created:w


2015-12-09  Razvan Crainea  <razvan at opensips dot org>
	* [20df836] :

	b2b_logic: set late SDP negociation flag
	For the entity that initiates a call, late SDP negociation is used, because
	the SDP of the first entity is not known. This patch sets the late_sdp flag
	for that entity, to flag the b2b logic to send the ACK with SDP.

	This bug was reported on the mailing list by Sebastian Sastre.


2015-12-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bd050fd] :

	Fix DB key when updating the destination state.
	Beside SIP URI, use the SET ID too when performing FB updates to set the destination state.
	(a SIP URI may be present in multiple SET IDs)
	Closes  #711 , reported by @mishehu


2015-12-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [93061b1] :

	avoid using unallocated jiffies


2015-12-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e9f6e97] :

	fix proto selections issues
	* proto was set to PROTO_UDP in siptrace;now set it depending
	on the protocol used
	* proto_hep function pack_hep will receive the proto id in
	netinet form(IPPROTO_*)
	* siptrace transforms from netinet id (IPPROTO_*) to
	opensips-like id (PROTO_*)


2015-12-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6dd210a] :

	Merge branch 'ar45-fix_sqlite_delete_update_avp_query'


2015-12-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8be032b] :

	Merge branch 'fix_sqlite_delete_update_avp_query' of https://github.com/ar45/opensips into ar45-fix_sqlite_delete_update_avp_query
	Conflicts:
		modules/db_sqlite/dbase.c


2015-12-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9c43924] :

	correctly update markers when multiple messages read


2015-12-07  Răzvan Crainea  <razvan at opensips dot org>
	* [4990532] :

	Merge pull request #718 from sippy/master
	Silently disable GLIBC-specific features if we are not on Linux (unbrear modules on FreeBSD)


2015-12-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1efdcc0] :

	case sensitive compare in sqlite raw query


2015-12-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [222d511] :

	add str_strncasecmp function


2015-12-05  Maksym Sobolyev  <sobomax at sippysoft dot com>
	* [46df8f8] :

	Silently disable GLIBC-specific features if we are not on Linux. This just breaks modules build on the FreeBSD currently.


2015-12-04  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ab5cd61] :

	Merge pull request #681 from shiningstarj/dialoginfo-memory-leak
	Presence_dialoginfo: Fix memory leaks in notify_body.c


2015-12-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e125726] :

	Return <null> value for missing AVPS.
	Maintain database result integrity by supporting null column values.
	Closes #693 and #677
	(cherry picked from commit 88bd36bd8b200bfde902f2bb28c2be8ea0fb18f7)


2015-12-04  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [baddec0] :

	cfgutils: $shv pseudo-variables initized directly in shared memory
	since shared memory is now initialized before script parsing, the
	list containing the variables can be created directly in shared memery in order to
	simplify code


2015-12-04  Razvan Crainea  <razvan at opensips dot org>
	* [b29d7aa] :

	ratelimit: always publish the previous counter
	Although this seems a "hack", without having a stable counter, pipes are never
	stable, and therefore the real limit can never be estimated.


2015-12-04  Razvan Crainea  <razvan at opensips dot org>
	* [22187c0] :

	b2b_logic: parameters cannot be lower than 1


2015-12-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6a2954a] :

	sqlite raw query: search for select only as first word in query


2015-12-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4304777] :

	only exit, no error when no result given


2015-12-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [671fa5c] :

	Merge pull request #667 from ionel-cerghit/kill_dialogs
	modules/dialog: add mi command to terminate all dialogs from a profile


2015-12-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [aa91970] :

	Merge pull request #706 from ionel-cerghit/shmem_rework
	move init_shm before the script parsing


2015-12-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7913288] :

	properly handle epoll events


2015-12-03  Liviu Chircu  <liviu at opensips dot org>
	* [938a88a] :

	Merge pull request #676 from rvlad-patrascu/sql_cacher
	SQL Cacher


2015-12-03  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [e095586] :

	sql_cacher: update documentation with usage example


2015-12-03  Nick Altmann  <nick.altmann at gmail dot com>
	* [ec77280] :

	RPM spec: move ulimit to init-script


2015-12-03  Nick Altmann  <nick.altmann at gmail dot com>
	* [2b57ec6] :

	RPM spec: change folder name to more sensible


2015-12-03  Nick Altmann  <nick.altmann at gmail dot com>
	* [dce2c5b] :

	RPM spec: increase max files limit and add dependencies


2015-12-03  Razvan Crainea  <razvan at opensips dot org>
	* [41168cd] :

	remove rest package


2015-12-03  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [db74655] :

	sql_cacher: further improvements
	-if table is empty don't return error when loading entire table
	-improve error reporting for cache_table parameter
	-cache entire table if no columns are specified
	-don't allocate new array of columns for sql query function call
	-fix memory leaks in insert_in_cachedb()
	-add columns_delimiter module parameter
	-update README


2015-12-02  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [3e56950] :

	blacklists.c: move package memory list initialisation in shared memory


2015-11-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0dca32b] :

	Reduce the amount of "useless" DBG's


2015-11-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [672cb13] :

	fix async: context shall be destroyed only at the last async call


2015-11-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d6d3dd5] :

	Remove annoying LM_INFO


2015-11-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [52d5ef5] :

	Fix proper reporting for the statistics types.
	This fixes the charting of SHMEM related stats in Control Panel


2015-11-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [eccbf8d] :

	Fix bug in populating the PIDs


2015-11-25  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [4089d44] :

	move init_shm before the script parsing
	shared memory is now initialized before script parsing
	removed uid and git script variables (can now be set only from commad line)
	removed pending statistics list from statistics.c as dynamic statistics can now
	be allocated directly in shared memory


2015-11-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [47b5dc9] :

	fix dangling db conns bug
	* database are now started in child_init
	* avoid opening db conns in mod_init and leaving them in the db pool because
	when fork() shall be done all the processes will use the same db
	structure therefore the same tcp connection


2015-11-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4e93c5b] :

	fix Makefile.defs; optimization flags back to O9; set to O0 by commit 82c16b0


2015-11-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [82c16b0] :

	code refactoring in dialplan module
	* fix memory leaks (partition parameters in pkg were not freed when structure
	was moved to shm)
	* avoid to do unnecessary allocations; use static strings received as modparam
	both in pkg and shm partition structure
	* improved code design
	* fix bug in add_rule2hash - when void string match expression received("")
	return error since it will segfault in core's hash function


2015-11-24  Nick Altmann  <nick.altmann at gmail dot com>
	* [e10e647] :

	uac_registrant: avoid bulk re-registrations on large servers with active using of reg_reload


2015-11-23  Ovidiu Sas  <osas at voipembedded dot com>
	* [889f353] :

	dialplan: check if memory is properly allocated when updateing partition records


2015-11-23  Ovidiu Sas  <osas at voipembedded dot com>
	* [bd35916] :

	dialplan: allocate the right amount of memory when creating a partition


2015-11-23  Nick Altmann  <nick.altmann at gmail dot com>
	* [0631965] :

	RPM spec: remove excess rest client package


2015-11-23  Ovidiu Sas  <osas at voipembedded dot com>
	* [1cf5dd8] :

	dialplan: memset to 0 newly alocated memory for dp partition  - suggested by Liviu Chircu


2015-11-23  Ovidiu Sas  <osas at voipembedded dot com>
	* [fb3923d] :

	dialplan: after inserting a new partition, set the pointer to the next record to NULL


2015-11-23  Ovidiu Sas  <osas at voipembedded dot com>
	* [f0a75d9] :

	dialplan: enhance debug probe


2015-11-20  Răzvan Crainea  <razvan at opensips dot org>
	* [af5db9e] :

	Merge pull request #700 from ionel-cerghit/logging_pvars
	add $cfg_file, $cfg_line pvars


2015-11-20  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [1acea06] :

	add $cfg_file, $cfg_line pvars
	this pseudovariables store the current script line and file being executed,
	useful for logging purposes


2015-11-19  Razvan Crainea  <razvan at opensips dot org>
	* [18f5da0] :

	acc:evi: if the request failed send a missed event
	In case the acc_evi_request() function was used on a failed request
	(code < 300), send a missed event rather than the normal one.

	Reported by Trevor Francis from 46Labs


2015-11-18  Razvan Crainea  <razvan at opensips dot org>
	* [1a41bb1] :

	Makefile: use flex -B flag for versions lower than 2.5.6
	Reported by Dragomir Haralambiev


2015-11-17  Razvan Crainea  <razvan at opensips dot org>
	* [8268bf8] :

	Makefile: fix isatty() error + NICER output


2015-11-17  Razvan Crainea  <razvan at opensips dot org>
	* [2debeb8] :

	Makefile remove white spaces


2015-11-17  Razvan Crainea  <razvan at opensips dot org>
	* [19edf61] :

	fix warnings reported by Ovidiu Sas


2015-11-17  Razvan Crainea  <razvan at opensips dot org>
	* [7754003] :

	clusterer: remove exhaustive warnings
	Also re-arrange the code to be properly used


2015-11-17  Razvan Crainea  <razvan at opensips dot org>
	* [d583f0e] :

	clusterer: use proper states for machines


2015-11-17  Razvan Crainea  <razvan at opensips dot org>
	* [6816bad] :

	clusterer: convert WARN to DEBUG
	Reported by Trevor Francis from 46Labs


2015-11-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c4ebfc8] :

	check if startup_done var is allocated before trying to set it


2015-11-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4fdb55b] :

	fix str2int and str2sint input params check
	* if a void string was given to the function ("") 0 value was returned which was not correct
	* input values should be checked for NULL


2015-11-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8a51273] :

	db in string or int pvar for avp_db_query()


2015-11-13  Razvan Crainea  <razvan at opensips dot org>
	* [39a7231] :

	clusterer: add version in db schema
	Thanks go to Trevor Francis from 46Labs for reporting this
	Closes #697


2015-11-12  Liviu Chircu  <liviu at opensips dot org>
	* [6baba32] :

	dialplan: improve startup error reporting
	Reported by Jeff Pyle


2015-11-12  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [f897e89] :

	sql_cacher: small improvements
	-improved coding style
	-more verbose error messages
	-trim whitespaces for cache entry specification
	-fix memory leak: free temporary cache entries list used for parsing


2015-11-12  Razvan Crainea  <razvan at opensips dot org>
	* [c70f765] :

	carrierroute: fix uninitialized warning


2015-11-12  Razvan Crainea  <razvan at opensips dot org>
	* [54657ba] :

	emergency: fix write signature warning


2015-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [5519d76] :

	proto_hep: fixed fixed-aliasing warning


2015-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [e9d2cf4] :

	tls: re-arrange code to be usable


2015-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [e761f7e] :

	remove hep T8 redefinition


2015-11-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d666051] :

	adapt siptrace module to new proto_hep module


2015-11-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [331e48d] :

	adapt sipcapture module to new proto_hep module


2015-11-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [acabbbd] :

	introducing proto_hep module; supports both hepv1/2 & hepv3


2015-11-06  Razvan Crainea  <razvan at opensips dot org>
	* [5286558] :

	dialog: increase ref when setting dialog


2015-11-05  Razvan Crainea  <razvan at opensips dot org>
	* [d69d085] :

	tm: free async context when resuming
	This commit fixes context_alloc memory leak


2015-11-04  Aron Podrigal  <aronp at guaranteedplus dot com>
	* [1882e6b] :

	Fixed sqlite avp_db_query for 'UPDATE and DELETE statements


2015-11-03  Razvan Crainea  <razvan at opensips dot org>
	* [3f3b6fd] :

	async: store cancelled and e2eack transactions in async ctx
	This fix prevents transactions from being unrefferenced when dangling
	transaction pointers remain stored in static variables.


2015-11-03  Razvan Crainea  <razvan at opensips dot org>
	* [f9eac69] :

	topo_hiding: replace LM_INFO with LM_DBG for debugging logs


2015-11-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b13214d] :

	Fixed Post Script callbacks triggering in Async.
	If the async engine in TM detects a SIP retransmission, break script and run the Post Script callbacks, othewise the transaction will stay ref'ed for ever.
	Credits for spotting this problem go to Razvan Crainea.
	(cherry picked from commit 6735c276ba9c66107759fd883da6d7f6301a50f5)


2015-11-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5f3981c] :

	fix mem leak in permissions


2015-10-30  Razvan Crainea  <razvan at opensips dot org>
	* [3c1ffb1] :

	tls_mgm: CRL support is only available starting with openssl 1.0.0


2015-10-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d0f95a8] :

	Replace tlsops with tls_mgm


2015-10-29  Razvan Crainea  <razvan at opensips dot org>
	* [c18c8ea] :

	properly handle async functions when reactor cannot fullfil the request
	Credits go to 46labs for debugging this


2015-10-29  Razvan Crainea  <razvan at opensips dot org>
	* [28bcadf] :

	run destroy context when the message is sent
	Credits go to 46Labs for discovering and providing test scenarios


2015-10-28  Liviu Chircu  <liviu at opensips dot org>
	* [48b88bd] :

	Fix compiler warnings with NO_DEBUG, NO_LOG
	Also add a handy macro for future usage


2015-10-28  Razvan Crainea  <razvan at opensips dot org>
	* [a5b195e] :

	mem: fix c11 inline problems


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [cb5eebe] :

	TCP aliases: Fix more race conditions (issue #589)
	_tcpconn_find() returns a pointer which should never be used outside of
	TCP lock. This patch completes commit 22f4c1a2e05 by fixing two
	additional issues of the same type in tcpconn_add_alias()


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [3e1a1a7] :

	Fix potential memory corruption on TCP write errors
	This patch fixes a well-hidden TCP connection referencing bug which
	would only reveal itself upon running into failed TCP send() operations
	due to various reasons (e.g. full send buffer) in high-traffic environments.

	Credits to Hieu Ta and Don Steul from Jibe Mobile for detailed reporting
	and providing an adequate replication environment


2015-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [a76ab7a] :

	context: add destroy function for registered ctx vars
	(cherry picked from commit 59708d51e1796c0c7e8d7b975af964fc8c9a54e2)


2015-10-26  Razvan Crainea  <razvan at opensips dot org>
	* [1785ab3] :

	fix context reusage if async is made
	This affects timers and failure routes that are supposed to reuse a static context
	(cherry picked from commit d75a0a01a87b8260dc220e1de98c2be20b7755f0)


2015-10-22  shiningstarj  <jordan at onsip dot com>
	* [3f98620] :

	Remove unnecessary fix
	One issue was with a different branch, this now resolves the only actual leak


2015-10-22  shiningstarj  <jordan at onsip dot com>
	* [182959a] :

	Fix memory leaks in notify_body.c


2015-10-22  Vlad Paiu  <vladpaiu at opensips dot org>
	* [27b0b21] :

	Fixed ACKs CSEQ number when doing in-dialog pinging
	The ACK CSEQ number does not depend on the number of pings or other in-dialog requests since the INVITE transaction, it must be the same as the INVITE
	Closes issue #680
	(cherry picked from commit 26a0a62621f6d1e4ea9fee90684a143fbfdc8494)


2015-10-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [bd11680] :

	wb_timer on DB_ONLY:don't update NULL stats;alloc contact id buffer


2015-10-20  Liviu Chircu  <liviu at opensips dot org>
	* [35451d5] :

	Merge pull request #678 from was4444/master
	fix: some sh(busybox) do not support syntax of $(< file)


2015-10-20  wxf  <xiaofeng.wang at bqvision dot com>
	* [ffb2554] :

	fix: some sh(busybox) do not support syntax of `$(< file)'


2015-10-16  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0a826a9] :

	update registrar: now certain AOR, contact can be searched; easier to understand the api
	three new functions added:
		* is_registered - whether or not an AOR is inside the usrloc table
		* is_contact_registered - whether or not a contact and/or a callid is inside the location table
		* is_ip_registered - whether or not an ip from an avp/pvar is registered or not
	two old functions are now deprecated:
		* is_other_contact - replaced with is_ip_registered + all pvar support
		* registered - replaced with is_contact_registered


2015-10-16  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3d91beb] :

	perl_exec(): accept variable as parameter


2015-10-15  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [3e1dc7d] :

	profile_end_dlgs: doesn't return error message if profile is empty


2015-10-14  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [fbccbfd] :

	add Makefile


2015-10-14  Vlad Paiu  <vladpaiu at opensips dot org>
	* [c0f25f7] :

	Added Re-INVITE in-dialog pinging support
	Controlled via the new "R" and "r" flags available to create_dialog() as well as the new reinvite_ping_interval module param

	Work still in progress :
		- Properly handle late negociation between endpoints
		- Ensure SDP persistency ( DB and BIN replication )
		- Ensure compatibility with topology hiding ( currently the Contact header will be bogus when doing TH )
		- Whitelist or blacklist logic ( terminate call for 481 and 408 timeout, or terminate call for anything else other than 200 and 491 )
		- Extensive testing needed for race conditions specified in rfc 5407


2015-10-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [db77978] :

	fix acc: when doing no-cdr accounting, do not use CDR-generated info


2015-10-09  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [238d108] :

	sql_cacher: add documentation


2015-10-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [453ad33] :

	set event only on acc_evi_request


2015-10-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c0f1507] :

	fix acc_*_request: determine the event based on flags
	* cdr flag and acc - cdr logging (E_ACC_CDR for events)
	* only acc flag - normal logging (E_ACC_EVENT for events)
	* missed calls flag - missed calls logging (E_ACC_MISSED event for events)

	The order is as stated so if you set both missed calls and acc flag, only
	acc logging shall be done


2015-10-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [10ada03] :

	fix dispatcher compiler warning


2015-10-08  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [2646f0a] :

	add MI reload function


2015-10-07  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [b219273] :

	modules/dialog: fixed possible memory leak from profile_end_dlgs


2015-10-07  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [ef1b675] :

	modules/dialog: add mi command to terminate all dialogs from a profile
	added the the profile_end_dlgs command


2015-10-06  Razvan Crainea  <razvan at opensips dot org>
	* [ec25c07] :

	ratelimit: avoid deadlock if counter is not updated


2015-10-06  Vlad Paiu  <vladpaiu at opensips dot org>
	* [7ecb192] :

	Added millisecond precision of the call duration to the CDR accounting


2015-10-06  Di-Shi Sun  <di-shi at transnexus dot com>
	* [c7e1eab] :

	Updated to support CNAM diversion use case.


2015-10-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [db25690] :

	fix compression module bugs
	* proper error messages on compress
	* correct buffer size aproximation on gzip compress(10% + 12)
	* fix bug on decompression


2015-10-02  Răzvan Crainea  <razvan at opensips dot org>
	* [05c4d39] :

	Merge pull request #659 from ionel-cerghit/extra_mem_statistics
	add configurable statistics about shared memory usage


2015-10-02  Walter Doekes  <walter+github at wjd dot nu>
	* [7849b7f] :

	dialog: Document that unset_dlg_profile can be used from request_route.
	This has been possible since 23f2322d in 1.8 and higher.


2015-10-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [165d833] :

	fix failover default value when M max results not specified in ds_select_dst/domain


2015-10-01  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [35be9c9] :

	properly handle wrong params count in fixup functions


2015-10-01  Sergey KHripchenko  <shripchenko at intermedia dot net>
	* [0a347bd] :

	Merge pull request #2 from OpenSIPS/master
	Merge upstream OpenSIPS/master to fork


2015-10-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [d7ecb73] :

	add configurable statistics about shared memory usage
	groups of modules can be defined in the .cfg file that would lead
	to statistics being generated with the number of fragments, used memory
	and real-used memory by those modules.
	The global fragments statistics now show the nuber of fragments alocated
	and in use.(for q_malloc, f_malloc) Please enter the commit message for your changes. Lines starting Please enter the commit message for your changes. Lines starting


2015-09-30  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [98dccc5] :

	Merge pull request #654 from eseanucristian/tls-rework
	Tls rework


2015-09-30  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [5a07ba0] :

	Merge pull request #658 from eseanucristian/clusterer-schema
	clusterer: fix readme


2015-09-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [c5b3fe3] :

	tls_mgm: remove unnecessary api functions


2015-09-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [47243b3] :

	clusterer: fix readme


2015-09-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [ff5ab68] :

	tls: fix locking issues


2015-09-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [b419b56] :

	config.h: TLS_PKEY_FILE and TLS_CERT_FILE have different values


2015-09-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [571fd70] :

	tls_mgm: add database schema


2015-09-30  ionutrazvanionita  <ionutionita at opensips dot org>
	* [db84363] :

	on DB error: avoid double free;release only in destroy function


2015-09-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [a19b772] :

	tls_mgm: remove unnecessary DBG messages


2015-09-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [1d5dacc] :

	tls_mgm: can not change domain attributes from the script when the db mode is enabled


2015-09-30  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b4ffc0d] :

	fix possible non '\0' terminated table name bug


2015-09-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6ed6cd7] :

	memset all connection memory to 0 to avoid unwanted values


2015-09-29  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [2012468] :

	tls_mgm: update readme


2015-09-28  Ionut Ionita  <ionutionita at opensips dot org>
	* [4488d95] :

	Merge pull request #653 from wdoekes/wjd-exec_admindoc_safety
	exec: Clarify what not to do with exec().


2015-09-27  Walter Doekes  <walter+github at wjd dot nu>
	* [1051075] :

	exec: Clarify what not to do with exec().
	See:
	https://github.com/OpenSIPS/opensips/pull/375#discussion-diff-19524753


2015-09-25  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [0f8540e] :

	add reload version int in cachedb for full caching reload


2015-09-25  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [23f767f] :

	tls_mgm: updated readme


2015-09-25  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [6826357] :

	add db support for tls


2015-09-24  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [1e1ea14] :

	Merge pull request #648 from dsanders11/patch-3
	Dispatcher module should honor db_default_url


2015-09-24  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [d6cbbff] :

	Merge pull request #649 from dsanders11/patch-4
	Dialplan module should honor db_default_url


2015-09-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cdc5803] :

	Check if at least one DB URL is provided in avpops
	Reported by David Sanders (@dsanders11).
	Closes #644 .
	(cherry picked from commit 34fab0d51ffb473b25871eddd3acef88664c4ec4)


2015-09-24  David Sanders  <dsanders11 at ucsbalum dot com>
	* [566d4db] :

	Dialplan module should honor db_default_url


2015-09-24  David Sanders  <dsanders11 at ucsbalum dot com>
	* [684846d] :

	Dispatcher module should honor db_default_url


2015-09-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [16019d3] :

	Fix usage of t_reply_with_body() with reply lumps.
	Force pushing all reply lumps (headers added to the reply) when using t_reply_with_body() - the function takes the msg from the transaction, not the real msg; so we need to be sure that the msg in transaction was fully cloned.

	Reported by Giuseppe Cardone on mailing list.
	(cherry picked from commit 783a18a8df4b8e9dcfd147ec0c63caceeeaa7bb9)


2015-09-22  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [f59d4bb] :

	improve on demand loading


2015-09-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8a745d9] :

	uri module: remove parameter with given key script function


2015-09-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [fa854c4] :

	no need to set proto since this is determined in parse_proto function


2015-09-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [9874ff1] :

	Merge pull request #627 from eseanucristian/master
	Clusterer readme


2015-09-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a6a896f] :

	Fix auth via B2B module.
	Remove the bogus hooks placed by TM in the outbound SIP buffer (as the buffer may change in local route) and rebuild the B2B invite (with credentials) from the initial sent invite.
	Reported by @DMOsipov and @xxReaper on GITHUB.
	Closing #577 and #628 .


2015-09-21  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [70c4701] :

	usrloc: updated readme


2015-09-21  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [23d0a4e] :

	ratelimit: updated readme


2015-09-21  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [09de554] :

	dialog: updated readme


2015-09-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6a565b8] :

	also check input parameter for exec_async


2015-09-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8f5aab6] :

	correctly check input parameter in exec_sync; close pipe with pclose to avoid leaving unfreed structs in kernel; correctly handle errors in exec_syc


2015-09-17  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [604b67a] :

	add per process  db handlers list


2015-09-16  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [5012365] :

	sql_cacher: immplement on demand caching


2015-09-16  Razvan Crainea  <razvan at opensips dot org>
	* [72926c2] :

	Merge branch 'tls-rework'


2015-09-16  Răzvan Crainea  <razvan at opensips dot org>
	* [67143b1] :

	Merge pull request #636 from mgwilliams/debian_init
	add missing space in debian/opensips.init


2015-09-16  Matthew Williams  <mgwilliams at gmail dot com>
	* [fd11c7d] :

	add missing space in debian/opensips.init


2015-09-15  Razvan Crainea  <razvan at opensips dot org>
	* [878f79e] :

	tls-modules: update readme


2015-09-15  Razvan Crainea  <razvan at opensips dot org>
	* [5ff322d] :

	Makefile-readme: allow different xsl-stylesheets versions


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [bbc2c63] :

	Merge branch 'saghul-xcap-doc-size'


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [70a587f] :

	dbschema: re-generate SQL scripts


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [00489e0] :

	ssl cert: remove passphrase


2015-09-14  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [d419f05] :

	xcap: make the 'doc' column a LONGBLOB on MySQL
	A normal-sized XCAP document with external references easily exceedes
	the default column size, leading to all sorts of problems.


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [a9486e5] :

	tls: remove unnecessary TLS init


2015-09-14  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [d71e8f2] :

	tls_mgm: update dependency list; modify mod_init


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [aa7429e] :

	regex: release the memory for unused pattern strings
	Thanks go to Federico Edorna <fedorna@anura.com.ar> for reporting and giving
	the solution for this memory leak.


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [0faac6a] :

	Revert "Merge pull request #629 from eseanucristian/tls_rework"
	This reverts commit 4a807466714b7228f074e46e0bc5e5669f02d4ee, reversing
	changes made to 579a82b7977e2ee8115048a255dfbdfd0aeb2676.


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [5da100b] :

	emergency: fix compile warning


2015-09-11  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [b9b4aab] :

	tls_mgm: added readme


2015-09-11  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [ace2d5f] :

	proto_tls: readme updated


2015-09-11  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [b2b25a1] :

	tls_mgm: fixed exports; improved find_server_domain api function


2015-09-11  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [35343cd] :

	proto_tls: added tls_mgm dependency; simplified tls_conn_init


2015-09-11  root  <evillaron at gmail dot com>
	* [3a80eb4] :

	emergency -- last test cases


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [1d411bb] :

	dialog: return 0 profile size if no value in cache
	Reported by Damien Sanders
	Closes #562


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [6bf0cff] :

	packaging: fix to properly build on jessie


2015-09-11  Vlad Paiu  <vladpaiu at opensips dot org>
	* [2f6abab] :

	Fixed increasing the CSEQ for in-dialog generated message when uac_auth is used in combination with the dialog module
	(cherry picked from commit d9d254a2fe93700748dd4cc5268409647a209e7f)


2015-09-11  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [7a32301] :

	proto_tls: new module tls_mgm


2015-09-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [fbc2f78] :

	nathelper: fix some -Wformat compiler warnings


2015-09-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0038231] :

	fix possible leak cause by sqlite3_closev2; easier to understand error message on sqlite3_column_metadata


2015-09-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [752dfc2] :

	Fix callid for "ul_add" MI command.
	As now the callid is updatable, we need to provide a callid string.
	Reported by Stas Kobzar
	(cherry picked from commit 02e886f34ba0a6a147ef4fda0035fb1179bbf835)


2015-09-11  Di-Shi Sun  <di-shi at transnexus dot com>
	* [9fad08f] :

	1. Updated to support reporting media addresses, proxy local addresses and provider post dial delay. 2. Updated to support CNAM.


2015-09-11  Liviu Chircu  <liviu at opensips dot org>
	* [1586af2] :

	Fix `make menuconfig` compile warnings


2015-09-11  Liviu Chircu  <liviu at opensips dot org>
	* [440b44f] :

	DBG_LOCK compile flag: Add menuconfig help line


2015-09-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [633f6b6] :

	added hex2int 64 bit versions


2015-09-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d6d5b83] :

	fix unique label in nathelper


2015-09-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b8cfd17] :

	stateful ping for nathelper


2015-09-11  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [b0f65d1] :

	build: fix setting LIBDIR correctly


2015-09-11  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [c8ecd8c] :

	build: fix setting HOST_ARCH on Solaris


2015-09-11  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [0bbb099] :

	Merge pull request #588 from jalung/patch-4
	Update nathelper.c
	(cherry picked from commit 079de59850d9b9e199c5ff5285ba11600a8d2faf)


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [2b5aeb0] :

	perl: Makefile NICER implementation


2015-09-11  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [6af5a11] :

	lock_ops.h: fixed typo for SYSV semaphores


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [62d4ace] :

	copyright: remove duplicate license


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [9df20a3] :

	travis: run in containers


2015-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [7235629] :

	copyright: remove flex generated files


2015-09-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cb18eb6] :

	Re-try the writing on EAGAIN.
	As the UDP sockets were moved to non blocking, sendto() may generate EAGAIN if the prev write operation was not yet completed by the stack.


2015-09-11  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [c1c277a] :

	lock_ops.h: added support for debugging locks
	with the flag DBG_LOCK set(from menuconfig for example), with each
	lock will be stored information regarding the place from where the
	lock was aquired (file, function, line)


2015-09-11  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [9144672] :

	Debian: add package opensips-rest-module
	This package contains the rest_client.so module.


2015-09-11  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [ee9dfb5] :

	Debian: add systemd unit file.
	This unit file supports the configuration check before restart and
	retains the P_MEMORY and S_MEMORY variable usage.

	Since both the systemd configuration and the init script take care of
	creating /var/run/opensips, the opensips.dirs file has been removed.


2015-09-11  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [185c15d] :

	Debian: update dependencies to build on Jessie.
	Unfortunately, the lua module doesn't build anymore because it depends
	on libmemcache, which is not present in Jessie. The other
	memcached-related modules depend on libmemcached, which is fine.

	See https://github.com/OpenSIPS/opensips/issues/580


2015-09-11  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [eeeadd3] :

	Debian: do not make opensips-module-mysql depend on mysql-client
	This makes it impossible to use opensips with mariadb.


2015-09-11  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [c86c386] :

	Debian: make the init script use LSB functions.
	This is more consistent with the other init scripts, and most
	importantly fixes the behaviour of the init script when it comes to
	systemd-enabled systems.


2015-09-11  Ryan Bullock  <rrb3942 at gmail dot com>
	* [85c42c2] :

	Remove use of deprecated synchronous mode in couchbase


2015-09-10  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [39e34d4] :

	* allow alias_db_find() to be called from startup route (f.e. to pre-potulate dbtext cache for a table) * allow alias_db_find(,input,) parameter to be strng or PV or mix of them instead of just PV


2015-09-10  Sergey KHripchenko  <shripchenko at intermedia dot net>
	* [505fcb2] :

	Merge pull request #1 from OpenSIPS/master
	Update fork to origin


2015-09-10  ionutrazvanionita  <ionutionita at opensips dot org>
	* [bf1d089] :

	sqlite: store int values as bigint, but set their type to int


2015-09-10  ionutrazvanionita  <ionutionita at opensips dot org>
	* [97491fc] :

	fix nathelper flag check


2015-09-10  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ab0e7c4] :

	fix sqlite bug: autoincrement check skipped on raw queries


2015-09-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3df19e5] :

	Revert "retrieve table name from select queries on raw_query in order to use sqlite library functions later"
	This reverts commit 779996d9b37ad11f01420961ac708c6daa4d2828.


2015-09-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a5e4a71] :

	Revert "sqlite raw query: fix table name parsing"
	This reverts commit 46c2f42a5f28dd8c8d29c2a73d352b51e04e0938.


2015-09-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [46c2f42] :

	sqlite raw query: fix table name parsing


2015-09-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [779996d] :

	retrieve table name from select queries on raw_query in order to use sqlite library functions later


2015-09-09  Razvan Crainea  <razvan at opensips dot org>
	* [3d7c6c2] :

	emergency: fix compile warning


2015-09-09  Stas Kobzar  <stas at modulis dot ca>
	* [ec8ff54] :

	Fixing bug in debian init script.


2015-09-08  Răzvan Crainea  <razvan at opensips dot org>
	* [4a80746] :

	Merge pull request #629 from eseanucristian/tls_rework
	Tls rework


2015-09-08  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [b2ac11f] :

	tls_mgm: added readme


2015-09-08  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [2f59c7a] :

	proto_tls: readme updated


2015-09-08  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [5919f27] :

	tls_mgm: fixed exports; improved find_server_domain api function


2015-09-08  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [0579d43] :

	proto_tls: added tls_mgm dependency; simplified tls_conn_init


2015-09-08  root  <evillaron at gmail dot com>
	* [579a82b] :

	emergency -- last test cases


2015-09-07  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [4cc712a] :

	add function to get value from cachedb; full caching completed


2015-09-04  Razvan Crainea  <razvan at opensips dot org>
	* [7781342] :

	dialog: return 0 profile size if no value in cache
	Reported by Damien Sanders
	Closes #562


2015-09-04  vladpaiu  <vladpaiu at opensips dot org>
	* [1cb5a2e] :

	Merge pull request #560 from rrb3942/master
	Remove use of deprecated synchronous mode in couchbase


2015-09-04  Razvan Crainea  <razvan at opensips dot org>
	* [230d97a] :

	packaging: fix to properly build on jessie


2015-09-04  Razvan Crainea  <razvan at opensips dot org>
	* [65bfc1a] :

	Merge branch 'BeIP-debian-jessie'


2015-09-04  Razvan Crainea  <razvan at opensips dot org>
	* [cda3986] :

	Merge branch 'debian-jessie' of https://github.com/BeIP/opensips into BeIP-debian-jessie


2015-09-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [086fe7c] :

	Fixed increasing the CSEQ for in-dialog generated message when uac_auth is used in combination with the dialog module
	(cherry picked from commit d9d254a2fe93700748dd4cc5268409647a209e7f)


2015-09-04  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [40f5841] :

	proto_tls: new module tls_mgm


2015-09-03  Razvan Crainea  <razvan at opensips dot org>
	* [f36a8a1] :

	add secure websocket support in parser


2015-09-03  Razvan Crainea  <razvan at opensips dot org>
	* [a889f1e] :

	proto_ws: refactor code
	Split the connection specific logic from the WS implementation


2015-09-02  Ovidiu Sas  <osas at voipembedded dot com>
	* [28a7b2b] :

	nathelper: fix some -Wformat compiler warnings


2015-09-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [eac7b82] :

	fix possible leak cause by sqlite3_closev2; easier to understand error message on sqlite3_column_metadata


2015-09-02  Razvan Crainea  <razvan at opensips dot org>
	* [a2e73ba] :

	fix WS SRV scheme according to the draft


2015-09-02  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [6c22820] :

	remove duplicate code by using macro in parse_cache_entries function


2015-09-02  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [e706558] :

	sql_cacher: add sql_cached_value pseudo-variable; parse pvar name and optimize for next pvar get


2015-09-02  Razvan Crainea  <razvan at opensips dot org>
	* [77f77e3] :

	proto_tls: split tls init in different header


2015-09-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3191ed2] :

	Fix callid for "ul_add" MI command.
	As now the callid is updatable, we need to provide a callid string.
	Reported by Stas Kobzar
	(cherry picked from commit 02e886f34ba0a6a147ef4fda0035fb1179bbf835)


2015-09-01  Di-Shi Sun  <di-shi at transnexus dot com>
	* [0fc5816] :

	1. Updated to support reporting media addresses, proxy local addresses and provider post dial delay. 2. Updated to support CNAM.


2015-08-31  Liviu Chircu  <liviu at opensips dot org>
	* [b9fe3c2] :

	Fix `make menuconfig` compile warnings


2015-08-31  Liviu Chircu  <liviu at opensips dot org>
	* [4bf31be] :

	DBG_LOCK compile flag: Add menuconfig help line


2015-08-31  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d6129b6] :

	added hex2int 64 bit versions


2015-08-31  ionutrazvanionita  <ionutionita at opensips dot org>
	* [56d17be] :

	fix unique label in nathelper


2015-08-31  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a1992cd] :

	stateful ping for nathelper


2015-08-31  Liviu Chircu  <liviu at opensips dot org>
	* [89d06e8] :

	Merge pull request #621 from ionel-cerghit/locking-debug
	lock_ops.h: added support for debugging locks


2015-08-29  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [b4d60f7] :

	Merge pull request #626 from saghul/fix-libdir
	Fix setting LIBDIR


2015-08-28  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [3d485cd] :

	build: fix setting LIBDIR correctly


2015-08-28  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [63bccb4] :

	build: fix setting HOST_ARCH on Solaris


2015-08-28  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [f0fb16f] :

	Merge pull request #588 from jalung/patch-4
	Update nathelper.c
	(cherry picked from commit 079de59850d9b9e199c5ff5285ba11600a8d2faf)


2015-08-28  Razvan Crainea  <razvan at opensips dot org>
	* [7ab18e2] :

	perl: Makefile NICER implementation


2015-08-28  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [0d939a2] :

	lock_ops.h: fixed typo for SYSV semaphores


2015-08-28  Razvan Crainea  <razvan at opensips dot org>
	* [7d6cc39] :

	copyright: remove duplicate license


2015-08-28  Razvan Crainea  <razvan at opensips dot org>
	* [e11409d] :

	travis: run in containers


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [b8fbf7f] :

	copyright: remove flex generated files


2015-08-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d3aaf44] :

	Re-try the writing on EAGAIN.
	As the UDP sockets were moved to non blocking, sendto() may generate EAGAIN if the prev write operation was not yet completed by the stack.


2015-08-27  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [a5e23d8] :

	lock_ops.h: added support for debugging locks
	with the flag DBG_LOCK set(from menuconfig for example), with each
	lock will be stored information regarding the place from where the
	lock was aquired (file, function, line)


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [5e19a94] :

	travis: rename liblua5.1-dev to liblua5.1-0-dev


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [1fac483] :

	travis: switch to legacy until dependencies are added upstream


2015-08-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3cb77f9] :

	Fix warning of printing uint64_t variables.


2015-08-27  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [491e38c] :

	Merge pull request #620 from eseanucristian/clusterer-schema
	Clusterer dependencies


2015-08-27  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [a9a8312] :

	generated sql scripts for clusterer module


2015-08-27  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [98c0533] :

	added default database schema for clusterer module


2015-08-27  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [f614272] :

	ratelimit: added clusterer dependencies


2015-08-27  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [73f5fd3] :

	dialog: added clusterer dependencies


2015-08-27  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [1fcb875] :

	usrloc: added clusterer dependencies


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [489c300] :

	travis: use FASTER compile time


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [a047da9] :

	Revert "travis: install dependencies in a restricted way"
	This reverts commit f5850238d4f1e7d09c9e803480284aa94827ed8f.


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [f585023] :

	travis: install dependencies in a restricted way


2015-08-27  Razvan Crainea  <razvan at opensips dot org>
	* [4a240df] :

	travis: use container-based infrastructure


2015-08-26  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [95d30de] :

	clusterer: changed default name for a column


2015-08-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [db65681] :

	Fix migration of location table to BIGINT index.
	DBTEXT accepts autoincrement for BIGINT columns too.
	Closes #617
	Reported by @arovetto


2015-08-25  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [d12e877] :

	clusterer: added dependencies


2015-08-25  Liviu Chircu  <liviu at opensips dot org>
	* [82c3fd6] :

	-c and -C binary args: Properly validate module dependencies
	Along with script syntax validation, the "-c" and "-C" binary arguments should
	also ensure all necessary modules are loaded.

	Reported by Maxim Sobolev
	Fixes #616


2015-08-25  Razvan Crainea  <razvan at opensips dot org>
	* [aad2e1c] :

	rtpproxy: dialog is not a mandatory dependency


2015-08-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [134dd72] :

	Merge branch 'eseanucristian-clusterer'


2015-08-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e0493bf] :

	Merge branch 'clusterer' of https://github.com/eseanucristian/opensips into eseanucristian-clusterer
	Conflicts:
		modules/ratelimit/ratelimit_helper.c


2015-08-25  Răzvan Crainea  <razvan at opensips dot org>
	* [6b265e8] :

	Merge pull request #613 from chiforbogdan/tls-crl-and-serial
	Tls crl and serial


2015-08-25  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [21a07ba] :

	Merge pull request #615 from sippy/master
	Fix build on FreeBSD.


2015-08-25  Răzvan Crainea  <razvan at opensips dot org>
	* [c0a0f12] :

	Merge pull request #614 from sippy/2.1
	Fix build on FreeBSD (2.1 branch)
	(cherry picked from commit 76a0a56347cfc77775e37fe9944de1fd8c37798f)


2015-08-24  Maksym Sobolyev  <sobomax at sippysoft dot com>
	* [e348489] :

	Fix build on FreeBSD.


2015-08-24  Bogdan Chifor  <chiforbogdan86 at gmail dot com>
	* [d532f41] :

	Extract serial number from certificate subject (TLS module)
	Serial number field from the certificate subject was extracted and
	exposed
	in a script variable. Even though this certificate DN field in quite
	unusual it could be used for a granular client authorization after the
	TLS process. The following script variables were added:
	tls_peer_subject_serial and tls_my_subject_serial. The variable
	tls_peer_subject_serial contains the client certificate subject serial
	number and tls_my_subject_serial contains the server certificate subject
	serial number. In the following example is presented a certificate CN
	field which has a serial number:
	CN=opensips_user/serialNumber=129/emailAddress=opensips_user@opensips.com


2015-08-24  Bogdan Chifor  <chiforbogdan86 at gmail dot com>
	* [5503634] :

	Add CRL (Certificate Revocation List) verification for TLS
	CRL verification was added in the proto tls module. By adding this
	feature revoked client certificates can be detected during the TLS
	process, thus permitting a robust security mechanism. The following
	parameters where added to the proto tls module in the configuration
	script: crl_dir and crl_check_all. The crl_dir parameter specifies the
	directory which contains the CRL files (multiple CRL files can be
	added).
	The crl_check_all parameter must be 0 or 1 and specifies whether all the
	certificates from the chain are verified against a CRL or not.
	By default, CRL verification is enabled only for client certificates
	(or when crl_check_all is 0). If crl_check_all is 1 then the
	issuer (chain) certificates are also verified against the given CRL
	files.


2015-08-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [019494b] :

	Removed useless 'mi_xmlrpc_ng' prefix in param names


2015-08-24  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [e7d27b8] :

	Merge pull request #611 from ionel-cerghit/mi_xmlrpc_ng_format
	mi_xmlrpc_ng: updated documentation


2015-08-24  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [021b18a] :

	mi_xmlrpc_ng: updated documentation the documentation now offers information about the module parameter used to switch between the output formating


2015-08-24  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [33ab7b2] :

	Merge pull request #610 from shripchenko/lb_fl_random
	A new flag for LB module lb_start() function to pick a rand()'om destinations with equal load


2015-08-24  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [30d5f9c] :

	Merge pull request #609 from shripchenko/dbtext_dbt_reload
	New MI command dbt_reload - causes db_text module to reload cached tables from disk.


2015-08-24  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [9ee1c23] :

	Merge pull request #608 from shripchenko/dbtext_bugs
	two bugs fixed in db_text module


2015-08-24  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [e904af7] :

	+ documentation of lb_start() 's' flag


2015-08-24  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [3d00c09] :

	A new flag for LB module lb_start() function to pick a rand()'om destinations with equal load, if multiple destinations selected.
	This could help to offload an excessive load from first destination and distribute load in situations when calls duration is near to zero (like failed calls)
	and counts in resources are almost always zero and does not reflect an actual calls flow.

	Already discussed in PR: OpenSIPS/opensips#345


2015-08-24  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [8cfe55f] :

	New MI command dbt_reload - causes db_text module to reload cached tables from disk.
	Depending on parameters it could be a whole cache or a specified database or a single table.
	If any table cannot be reloaded from disk - the old version
	preserved and error reported.


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [69cc93e] :

	dialog: readme - added necessary parameters to use clusterer api


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [33603b1] :

	clusterer: changed data structure


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [745d362] :

	clusterer: readme


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [c52c4e9] :

	ratelimit: fixed segmentation fault when server_timeout is received


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [3db517b] :

	dialog: added auth_check and timeout parameters


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [e01751d] :

	ratelimit: added auth_check and timeout parameters


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [2dd5b4c] :

	usrloc: improved clusterer api usage for replication


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [778fe7d] :

	ratelimit: improved clusterer api usagefor replication


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [156096b] :

	dialog: improved clusterer api usage for replication


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [f088632] :

	usrloc: clusterer_api is used for replication


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [6c496d4] :

	ratelimit: clusterer api usage for replication


2015-08-24  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [22c720d] :

	dialog:added clusterer api usage for replication


2015-08-24  Razvan Crainea  <razvan at opensips dot org>
	* [d2c08e9] :

	fix gcc 5.2 warnings


2015-08-24  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [de9224b] :

	two bugs fixed in db_text module + incorrect use of strncasecmp() + lost pkg_malloc


2015-08-22  Razvan Crainea  <razvan at opensips dot org>
	* [d13c844] :

	add packaging/ copyrights
	(cherry picked from commit cbfbed00dd9be7f0287decfdbc9f1a3b2fed0337)


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [9073e5b] :

	debian: Makefile skip tests (cherry picked from commit 446e44c3aff6f8e82d29620ef33caadb202a37d9)
	Conflicts:
		packaging/debian/changelog


2015-08-21  Razvan Crainea  <razvan at opensips dot org>
	* [2d64c2c] :

	update copyright files
	(cherry picked from commit eda0ae2088d64a69028d67c6907cb39f0b998049)


2015-08-20  Razvan Crainea  <razvan at opensips dot org>
	* [4bb9e46] :

	debian update build dependency


2015-08-20  Razvan Crainea  <razvan at opensips dot org>
	* [641338b] :

	debian/copyright: remove gentoo files
	They are not included in the tar anyway
	(cherry picked from commit 871d4ebc857ba747d7c9aca8b165d92bc35d6e45)


2015-08-20  Razvan Crainea  <razvan at opensips dot org>
	* [3bf5519] :

	remove invalid Makefile line
	(cherry picked from commit 4e1aa91b826ccdf7725fe00c70124f0066692d79)


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [3099f80] :

	debian: move to new dh_ packaging system
	(cherry picked from commit f45a92998cc9a787b9936753a4965f18edc915b1)


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [6dbf6e1] :

	copyright: fix license names
	(cherry picked from commit b595b829c3f202cad0d42af032c30368dde86bdb)


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [7c261a9] :

	copyright: sync with Julien's work
	http://anonscm.debian.org/viewvc/pkg-voip/opensips/trunk/debian/copyright?view=markup
	(cherry picked from commit ba9c9328e56bb5cc62251b77e7d934250e0cf2a1)


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [8690c30] :

	licence: add BSD and MIT licences


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [4dbfb6b] :

	licence: update FSF address


2015-08-20  Răzvan Crainea  <razvan at opensips dot org>
	* [cf81803] :

	radius: move custom install inside module
	Thanks go to Nick Altman for reporting this


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [70a34b9] :

	tm: fix bavp leaks in case of error
	Thanks go to Mickael Marrache for spotting and debugging


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [dcd3ec4] :

	fix previous commit


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [14b3bb6] :

	Makefile.defs: print target info only if changed


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [47c5ced] :

	debian: change from native to quilt
	(cherry picked from commit 3eaa77fa8d2a382ce37f01750213306206e1c605)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [e6d60ad] :

	remove useless route.c include (cherry picked from commit 857857cd708aa2a7a278cd682debffa123ee4bc3)
	Conflicts:
		modules/emergency/emergency_methods.c


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [92baf28] :

	fix EXPRESSION typo
	(cherry picked from commit 6f07dab0bea530c6da593ab317aed46620deaea6)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [f6981da] :

	debian/rules: add build-{arch,indep} rules
	(cherry picked from commit f53761262947638f5c80cdcd25f75faab679522f)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [cddc950] :

	update github watch file
	(cherry picked from commit ac3ce34482dd7eb4402c5f08794160966cae6d7a)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [e14455a] :

	fix http package description
	(cherry picked from commit d094f09c74e15581d2d05f62ee168701bd1455b0)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [ef28834] :

	fix some spellchecks detected by lintian
	(cherry picked from commit 39bccea3282f94d2a34c6e448b118b99b0085799)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [800035b] :

	install-modules: each module install its own custom files (cherry picked from commit 4afbfefe1fa11d8a01e980fa9baf164a80e16b3c)
	Conflicts:
		Makefile


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [f7025f3] :

	man: fix hyphens
	(cherry picked from commit 2ac0d082aafa6612d79a3479d132553910f380f0)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [3478180] :

	init: add LSB functions support
	(cherry picked from commit 7524b2bd47dcbac10b54f3333ad5af8be07a57b0)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [aa5ebb3] :

	debian: add python dependency for opensips
	(cherry picked from commit 2d1a5d954214fd3698c593fa7c1de6c967eec2a8)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [76c37f0] :

	Makefile: do not install docs on debian installs
	(cherry picked from commit 064d562fad49631be82c97850046a8e3689036ae)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [cb7bc74] :

	Fix man pages
	* add osipsconfig man page
	* fix lists info for opensipsconsole and opensipsdbctl
	(cherry picked from commit 979ee74cb537e71b2c73730386ff215903e30231)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [6e23554] :

	fix debian packaging (cherry picked from commit d4a5a6a5bf353d74d60f286b06e8bc4ffe83b227)
	Conflicts:
		packaging/debian/changelog
		packaging/debian/control


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [e2be56d] :

	ratelimit: rl_list show the last counter


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [87a1958] :

	Merge pull request #605 from saghul/makefile-target-master
	makefile: detect target architecture using the compiler


2015-08-19  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [1161779] :

	makefile: detect target architecture using the compiler
	Fixes producing a 32bit build in a 64bit system.

	Original patch by Andrei Pelinescu-Onciul:
	https://github.com/kamailio/kamailio/commit/c46e79709216c4975abc83869fbce9fa696eac74


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [725573b] :

	Fix handling of ASYNC MI commands
	Similar to report #552.
	(cherry picked from commit 2b3a3ea9588854be5d7b64d4c04b48f6907a91ba)

	Conflicts:
		modules/mi_http/mi_http.c

	(cherry picked from commit 98435049c104151afa01864a8453957d9463ee51)


2015-08-18  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [e7faa3e] :

	sql_cacher: Full caching improvements
	-use fetch_result for queries if sql db supports
	-fix cachedb encoding for null sql db values
	-caching id added in cachedb key


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f01fe37] :

	Fix restoring/freeing the path_vec in failure route.
	The path_vec (array holding the PATH string) was not properly pushed into the faked requests before calling the failure route. This was generating a mixture of shm/pkg memory when the faked request had to be freed.
	This crash was trigger only if PATH support was used and requests were looked up with PATH header.

	Reported by @AVFedorov and @petekelly.
	Closes #484

	Many thanks to @AVFedorov for his details information and to @petekelly for support in investigating and testing.
	(cherry picked from commit cc033520ea5ab59fafd6ca7d52cc88fdad8574ef)


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [69e5671] :

	Fix handling of ASYNC MI commands
	Part of fixing #552.
	Reported by @mqandeel .

	Closes #552
	(cherry picked from commit c08b03310b9d8001b346ff3ba5a45996b1a5dc45)

	Conflicts:
		modules/mi_xmlrpc_ng/http_fnc.h
		modules/mi_xmlrpc_ng/mi_xmlrpc_http.c

	(cherry picked from commit c8c8410d8a97288af40edbabed7b5360dec968fb)


2015-08-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [78da6d3] :

	fix usrloc clabel mask bug


2015-08-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b9cb15f] :

	fix usrloc contact label mask; in get_ucontact_from_id check if contact not found


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2ff5bdf] :

	Fix handling of ASYNC MI commands
	Part of fixing #552.
	Reported by Damien Sandras.
	(cherry picked from commit 5244b54afe63bba02fe45f82b736c327672b221a)

	Conflicts:
		modules/mi_json/mi_json.c

	(cherry picked from commit b1ee3a579a292faa47b6bfb1e5051982882f0447)


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [24def0d] :

	Fix reporting if t_request() failed.
	Capture and report futher if the t_request() failed to send out the PUBLISH request.
	(cherry picked from commit 4791a506912d67f90dfe66e7292500046d59ef4a)


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [efb0c5b] :

	clusterer: added register and send_to API functions


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [6b61980] :

	clusterer:Added clusterer api


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [0d104b7] :

	clusterer: added persistent mode


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [e4bf577] :

	clusterer: improved load_info function


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [ac90425] :

	clusterer: Added initial infrastructure


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [10e2e7a] :

	bin_interface: changed bin_register_cb function


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [a439b28] :

	Removed async forcing code


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [eab11c2] :

	Set async to be disabled by default


2015-08-17  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [b8f9c55] :

	Fixed crash when failing to find a send socket
	Bogus free was done in case of error to find a socket
	Also, do not call raw callbacks for the BIN protocol


2015-08-13  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [230fa58] :

	sql_cacher: full caching in mod_init


2015-08-12  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ac7c05c] :

	fix usrloc doc typo


2015-08-12  ionutrazvanionita  <ionutionita at opensips dot org>
	* [cce2a5b] :

	fixed bug: set contact id val nul to 0 when inserting to db


2015-08-12  Liviu Chircu  <liviu at opensips dot org>
	* [a85c14c] :

	Merge pull request #598 from jarrodb/593
	Do not append colon if uri password is NULL


2015-08-12  Jarrod Baumann  <jarrod at unixc dot org>
	* [76dc734] :

	Do not append colon if uri password is NULL


2015-08-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [40f56ca] :

	usrloc contact label now uses 14 bits instead of 16


2015-08-11  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [18aa625] :

	Merge pull request #596 from rvlad-patrascu/master
	Add synchronous operation for raise functions for event_xmlrpc and event_rabbitmq


2015-08-11  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [caaaf76] :

	Merge pull request #597 from ionel-cerghit/mi_xmlrpc_ng_format
	Mi_xmlrpc_ng response formatting improved


2015-08-11  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [f2a1e3d] :

	Add module parameter to chose response formatting add mi_xmlrpc_ng_format_version parameter to let the user choose between the two ways of formatting output, a value of 1 means the old formating and a value of 2 means the new formatting which is the default.


2015-08-11  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [7f515f9] :

	event_rabbitmq: update documentation for sync_mode module parameter


2015-08-11  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [7c40030] :

	event_xmlrpc: update documentation for sync_mode module parameter


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0e1fabb] :

	Fix use_domain, escaping, cases in remove()
	Use extract_aor() in script function remove() ; extract_aor() takes into account the use_domain and cases settings and is also able to deal with escaped chars.

	Closes #557 .


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4ab975e] :

	Proper test on active destinatins for failover.
	Test both INACTIVE and PROBING flags before considering a destination suitable for failover.
	Reported by @gergelypeli
	Closes #564 .


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [461cd33] :

	Simple text aligment to fit 80 chars wide.


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c8d102e] :

	Simple text aligment to fit 80 chars wide.


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4b3944f] :

	Fix race condition - the log must be under lock
	As information from the alias strucuture is printed, this must be done under lock protection.
	Closes #589 by @dbeskoek.
	(cherry picked from commit 22f4c1a2e05b5f3d8d3c7ba06ec30c21d75bc4de)


2015-08-10  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [83cb342] :

	Merge pull request #595 from ionel-cerghit/add_bin_version
	Add version field in the header of bin protocol


2015-08-10  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [a0dae0a] :

	mi_xmlrpc_ng: fixed formatting and flushing problems in module


2015-08-10  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [87bd7a9] :

	Added version field in the header of bin protocol, to avoid compatibility problems between different versions of opensips


2015-08-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [750d36a] :

	Revert "stateful ping for nathelper"
	This reverts commit aecbf986eee2f931a41057a9c400e18c77bbbaed.


2015-08-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [35426b2] :

	fix bug: db key index when inserting


2015-08-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [aecbf98] :

	stateful ping for nathelper


2015-08-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6112b8b] :

	MyISAM no longer default table engine.
	InnoDB is now the default, and this value can now be changed via MYSQL_ENGINE env variable in opensipsctlrc.

	Closes #399


2015-08-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [67c2c91] :

	Use SIP pinging when NAT traversal is on


2015-08-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [164dbe5] :

	Fix async sleep() in sync mode.
	If the timer FD cannot be placed in reactor, the resume will work (in sync way), but without any actual sleep. We fix this by remembering the time when the sleep should finish and checking it again in resume function.


2015-08-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0ff15f6] :

	Remove double define.
	param_export_t is already defined by sr_module_deps.h which is included from here.


2015-08-06  Răzvan Crainea  <razvan at opensips dot org>
	* [2d15060] :

	fix debian packaging


2015-08-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ad6a923] :

	Fix usage of timerfd on old systems.
	timerfd functions were introduced starting with glib 2.8, so disable them if older glib versions are detected.


2015-08-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5af7010] :

	Fix int64_t printing.


2015-08-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7ef4eaa] :

	Merge branch 'usrlocCID'


2015-08-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7d20a36] :

	fix contact id in DB_ONLY mode issue


2015-08-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [21fb5cd] :

	Just fixing indentation.


2015-08-06  root  <evillaron at gmail dot com>
	* [570d7d7] :

	emergency -- code review


2015-08-05  Razvan Crainea  <razvan at opensips dot org>
	* [3dfc83c] :

	add rest_client specs for debian, fedora and rpms
	Closes #587


2015-07-30  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5c33319] :

	delete multiple contacts in one db call for WRITE_THROUGH and WRITE_BACK


2015-07-30  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [d20175e] :

	Debian: add package opensips-rest-module
	This package contains the rest_client.so module.


2015-07-29  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [4b6996e] :

	Debian: add systemd unit file.
	This unit file supports the configuration check before restart and
	retains the P_MEMORY and S_MEMORY variable usage.

	Since both the systemd configuration and the init script take care of
	creating /var/run/opensips, the opensips.dirs file has been removed.


2015-07-29  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [981c5e6] :

	Debian: update dependencies to build on Jessie.
	Unfortunately, the lua module doesn't build anymore because it depends
	on libmemcache, which is not present in Jessie. The other
	memcached-related modules depend on libmemcached, which is fine.

	See https://github.com/OpenSIPS/opensips/issues/580


2015-07-29  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [459d61d] :

	Debian: do not make opensips-module-mysql depend on mysql-client
	This makes it impossible to use opensips with mariadb.


2015-07-29  Steve Frécinaux  <sfrecinaux at beip dot be>
	* [80143e1] :

	Debian: make the init script use LSB functions.
	This is more consistent with the other init scripts, and most
	importantly fixes the behaviour of the init script when it comes to
	systemd-enabled systems.


2015-07-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a859a45] :

	updated usrloc documentation


2015-07-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [ece2774] :

	get_all/domain_ucontacts: posibility to fetch contact id


2015-07-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [91828e3] :

	possibility to delete a contact only with the id


2015-07-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b46429e] :

	fix db_insert_ucontact: no value for contactid when AUTOINCREMENT wanted


2015-07-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [603a660] :

	for PRIMARY KEY AUTOINCREMENT in sqlite: value is stored as BIGINT, type is INT, allowing in code usage to see the key both int and bigint(default int)


2015-07-28  Liviu Chircu  <liviu at opensips dot org>
	* [b25164e] :

	Add new s.trim / s.trimr / s.triml transformations
	Closes #579


2015-07-28  ionutrazvanionita  <ionutionita at opensips dot org>
	* [bbccb7a] :

	updated location version


2015-07-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [9404a76] :

	update and delete based on contact_id


2015-07-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [4d7c67f] :

	on DB_ONLY insert contact id value is null(autoincrement is used)


2015-07-27  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f1578b1] :

	modified id column to contact_id bigint primary key autoincrement in al dbs; regenerated scripts


2015-07-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [04c9add] :

	introduced contactid as composed of aorhash|recrod label|contact label


2015-07-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3293358] :

	registrar: lookup for aors in branches and expand them to contacts


2015-07-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ef0dc6f] :

	Fix broken condition in handling ASYNC_CONTINUE.
	(cherry picked from commit eaf3ca55148cffad9859fa00f6e7ccc4ce4ec938)


2015-07-22  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [1bc8baf] :

	event_rabbitmq: added synchronous operation for raise function


2015-07-22  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [5a3d230] :

	event_xmlrpc: added synchronous operation for raise function


2015-07-20  Răzvan Crainea  <razvan at opensips dot org>
	* [c959f49] :

	Merge pull request #575 from ar45/patch-1
	Update README - change db_mysql to db_postgres


2015-07-17  Aron Podrigal  <ar45 at users.noreply.github dot com>
	* [37f5449] :

	Update db_postgres_admin.xml
	changed db_mysql to db_postgres


2015-07-17  Aron Podrigal  <ar45 at users.noreply.github dot com>
	* [7ef27a9] :

	Update README


2015-07-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0886073] :

	Fixed memeory exhausting during concurrent reloads.
	Add a new module parameter no_concurrent_reload to prevent multiple reloads in the same time.
	If you have a large routing set (millions of rules/prefixes), you should consider disabling concurrent reload as they will exhaust the shared memory (by reloading into memory, in the same time, multiple instances of routing data).
	(cherry picked from commit 4480d115ee8f15c077a86c41086537758105ba8a)


2015-07-16  Razvan Crainea  <razvan at opensips dot org>
	* [97ea216] :

	event_route: fix uninit _bogus_ warning


2015-07-16  Razvan Crainea  <razvan at opensips dot org>
	* [9eb48f0] :

	ememrgency: fix curl cast warning


2015-07-16  Razvan Crainea  <razvan at opensips dot org>
	* [621bd5a] :

	httpd: fix cb cast warning


2015-07-16  Răzvan Crainea  <razvan at opensips dot org>
	* [dc0edf5] :

	lua: fix compile warning


2015-07-16  Răzvan Crainea  <razvan at opensips dot org>
	* [668533e] :

	mi_xmlrpc_ng: fix include warning


2015-07-16  Răzvan Crainea  <razvan at opensips dot org>
	* [544db1e] :

	xcap_client: fix timer include


2015-07-16  Liviu Chircu  <liviu at opensips dot org>
	* [2649a3a] :

	for-each statement: Add support for $json iterators
	Example way of usage:
	    for ($json(foo) in $(avp(bar)[*]))
	        xlog("JSON fields: $json(foo/baz) $json(foo/qux)\n");


2015-07-16  Liviu Chircu  <liviu at opensips dot org>
	* [3607208] :

	regex: Fix implicit declaration of 'isspace'


2015-07-16  Liviu Chircu  <liviu at opensips dot org>
	* [b391ea3] :

	db_virtual: Do not crash if no DB sets are defined


2015-07-16  Razvan Crainea  <razvan at opensips dot org>
	* [e6fb1c1] :

	emergency: fix warnings


2015-07-16  Razvan Crainea  <razvan at opensips dot org>
	* [9da7c53] :

	gcc 5.1 warnings fix
	re-arranged code to comply with gnu11


2015-07-16  Ovidiu Sas  <osas at voipembedded dot com>
	* [084ed77] :

	avpops: fix undefined symbol: is_script_async_func_used


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [b9d0ad2] :

	add lua proper dependencies


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [a02d31b] :

	travis: add all dependencies


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [bfd6895] :

	travis: add extra dependecies


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [08e0277] :

	travis: skip cachedb_{cassandra,couchbase}


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [96e680a] :

	travis: update dependecies


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [6181434] :

	add markup readme


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [f09522f] :

	travis: check all modules


2015-07-15  Vlad Paiu  <vladpaiu at opensips dot org>
	* [babfdab] :

	Fixed ctl & ctlrc changes introduced by proto_bin commit


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [2b89a69] :

	travis: remove clang compiler


2015-07-15  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [75acc35] :

	event_virtual: Added documentation


2015-07-15  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [0bbd1c7] :

	event_virtual: Added comments, minor changes to socket printing


2015-07-15  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [c22ad08] :

	event_virtual: Added free function; fixed printing of the virtual socket


2015-07-15  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [f2ea585] :

	event_virtual: Added raise function


2015-07-15  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [9f54c5f] :

	event_virtual: created new module: event_virtual, added parse and match functions


2015-07-15  Răzvan Crainea  <razvan at opensips dot org>
	* [ae39a9c] :

	Merge pull request #573 from ionel-cerghit/master
	add new proto_bin module


2015-07-15  Razvan Crainea  <razvan at opensips dot org>
	* [e6dbf9e] :

	add travis file


2015-07-15  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [bfe6bc6] :

	added new proto_bin moudle


2015-07-09  Liviu Chircu  <liviu at opensips dot org>
	* [5a832d9] :

	db_virtual: Do not crash if no DB URLs are defined


2015-07-09  Liviu Chircu  <liviu at opensips dot org>
	* [5415531] :

	config parser: Exit if no more memory available
	Otherwise, some code paths would generate segmentation faults


2015-07-09  Liviu Chircu  <liviu at opensips dot org>
	* [1e675ac] :

	avpops: Proper handling for async with non-async drivers
	Fallback to normal mode in case of no async capabilities.
	If this behaviour is employed, a startup warning will be issued.


2015-07-09  Liviu Chircu  <liviu at opensips dot org>
	* [aad94da] :

	db_mysql: Improve error handling in async mode
	i.e. Logging and error handling in case of bad async queries


2015-07-09  Liviu Chircu  <liviu at opensips dot org>
	* [87acbbc] :

	core API: Add detection for async script function usage


2015-07-09  root  <evillaron at gmail dot com>
	* [0962723] :

	emergency -- change configuration of the module for a new table


2015-07-09  root  <evillaron at gmail dot com>
	* [3cbebd4] :

	emergency -- change configuration of the module for a new table


2015-07-07  Răzvan Crainea  <razvan at opensips dot org>
	* [1b15064] :

	Merge pull request #569 from vladpaiu/master
	New features for OpenSIPS 2.2


2015-07-07  Razvan Crainea  <razvan at opensips dot org>
	* [35ae885] :

	fix inline functions to comply with gnu11
	The new gcc 5.1 version uses by default gnu11 standard, which behaves a bit
	differently with inline functions (more details here:
	https://gcc.gnu.org/gcc-5/porting_to.html)

	Closes #555


2015-07-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [912b0d1] :

	More verbous logging.
	Log the error reported by stat() when it fails.
	(cherry picked from commit 8fefc911e643142b4206fa574896171dbdb1eb82)


2015-07-07  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f077ee7] :

	fix 32 bit warning


2015-07-06  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d9eec58] :

	Also build sqlite files on all Makefile rule


2015-07-06  Vlad Paiu  <vladpaiu at opensips dot org>
	* [43a2619] :

	Fixed typo in encoding the callid


2015-07-06  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [0eb9a8c] :

	db_postgres: Added module parameter max_db_queries


2015-07-06  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [140cc8c] :

	db_mysql: Added module parameters max_db_queries and max_db_retries


2015-07-03  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [524bd1c] :

	dispatcher: first_hit_counter


2015-07-03  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [c1dd6d2] :

	added global parameter for config file: default logging level for xlog


2015-07-03  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [19ac2ea] :

	digiplan.c: Fixed memory leak


2015-07-03  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [322c2cb] :

	dialplan.c: Fixed memory leak


2015-07-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c53b81d] :

	fix db/schmea Makefile bug V2


2015-07-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [5a018a0] :

	fixed db/schema Makefile bug; regenerated files that were affected by this bug


2015-07-03  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [d5691f6] :

	dialplan.c: Fixed mi_show_partition to not show the password


2015-07-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [f55095e] :

	added record and contact labels; currently no usage


2015-07-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [dd89571] :

	exposed get_domain_ucontacts; get_all_ucontacts now calls get_domain_ucontacts


2015-07-03  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [a814271] :

	event_flatstore: added documentation


2015-07-02  Vlad Paiu  <vladpaiu at opensips dot org>
	* [a0ec25a] :

	Fixed generated callid
	= is not a valid character in a callid, so replaced it with a hyphen


2015-07-02  Liviu Chircu  <liviu at opensips dot org>
	* [649a35e] :

	Merge pull request #565 from jarrodb/b64_xor
	Add b64encode, b64decode and xor string transformations


2015-07-02  Jarrod Baumann  <jarrod at unixc dot org>
	* [6eb4431] :

	adds better error reporting and fixes typos


2015-07-02  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [b8b48a3] :

	event_flatstore: fixed coding style


2015-07-02  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [223f0c7] :

	event_flatstore: small fix iov buffer incrementing


2015-07-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6036215] :

	proper error message when ldap tls fails to start


2015-07-02  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [121afc8] :

	event_flatstore: fixed delete and parse for expire


2015-07-02  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [60f2c6b] :

	event_flatstore:fixed raise event


2015-07-01  Jarrod Baumann  <jarrod at unixc dot org>
	* [9d35613] :

	Added b64encode, b64decode, and xor string transformations


2015-07-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [dfd548a] :

	Merge branch 'master' of https://github.com/vladpaiu/opensips
	Conflicts:
		modules/event_flatstore/event_flatstore.c


2015-07-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [875f727] :

	event_flatstore: fixed rotation funcion


2015-07-01  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [d650a69] :

	event_flatstore: added file permission parameter, fixed delimiter parameter


2015-07-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [4e76482] :

	event_flatstore: added debugging messages


2015-07-01  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [ce287e2] :

	Merge branch 'master' of https://github.com/vladpaiu/opensips


2015-07-01  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [787eaff] :

	event_flatstore: added debug info for rotating and delete functions


2015-07-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [63a7aa3] :

	Merge branch 'master' of https://github.com/vladpaiu/opensips


2015-07-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [fbd5020] :

	event_flatstore: added debuging prints


2015-07-01  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [b5481fc] :

	event_flatstore: added debug prints for flat_raise


2015-07-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [034fe68] :

	event_flatstore: check if path is valid (parse)


2015-07-01  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [182f421] :

	event_flatstore:modified raise and parse functions


2015-06-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d6cd8b0] :

	Expose unset_dlg_profile() to Request Route.
	Related to issue #554.
	(cherry picked from commit 23f2322db56540be4d0b36a099a02e380aeafe19)


2015-06-30  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [5ef4a84] :

	event_flatstore: fixed mod_init


2015-06-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [c90fc34] :

	event_flatstore: added destroy and param function


2015-06-30  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [6f2934d] :

	event_flatstore: merged all functions


2015-06-30  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [a6ee51e] :

	event_flatstore: solved conflicts


2015-06-30  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [2a815a2] :

	event_flatstore: added parse function


2015-06-30  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [807df79] :

	event_flatstore: fixed errors


2015-06-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [9cdbc24] :

	Added print, match, rotate and partial raise functions


2015-06-30  Eseanu Marius Cristian  <eseanu.cristian at gmail dot com>
	* [56eba63] :

	Added print, match, rotate and partial raise functions


2015-06-30  rvlad-patrascu  <rvlad.patrascu at gmail dot com>
	* [11f61cf] :

	event_flatstore: added flat_free and verify_delete functions


2015-06-29  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [9642050] :

	event_flatstore: defined used structures and mod_init


2015-06-26  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [cb13543] :

	event_flatstore: infrastructure


2015-06-26  Cerghit Ionel  <ionel.cerghit at gmail dot com>
	* [996fadf] :

	event_route: fix route name when no sync/async


2015-06-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d171b7a] :

	Fix TH for BYEs used as CANCEL
	Trigger the dialog callbacks (used by TH) for BYEs which do not terminate the call (BYEs in early state can be used as CANCELs).
	Reported by Antonis Psaras.
	Closes #555
	(cherry picked from commit b0f52d559e615e8dfecd1e7630b15a9c7584af4f)


2015-06-26  Razvan Crainea  <razvan at opensips dot org>
	* [31f46c2] :

	always create tar with TLS files


2015-06-25  Razvan Crainea  <razvan at opensips dot org>
	* [ea2a041] :

	acc: fix column type mismatch for db missed calls
	This bug was making OpenSIPS crash when a missed call was inserted in DB

	Thanks go to Peter Baines for reporting it (Issue #559)


2015-06-25  Razvan Crainea  <razvan at opensips dot org>
	* [307388d] :

	acc: fix multi_leg_bye info behavior
	This bug was making the ACC module to print less information in case there
	were no AVPs populated for the BYE multi_leg_info


2015-06-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cc06843] :

	Fix $ct and $ct.fields variables.
	Force parsing of all Contact headers.
	Reported by Nick Altmann.


2015-06-22  Ryan Bullock  <rrb3942 at gmail dot com>
	* [80233f8] :

	Remove use of deprecated synchronous mode in couchbase


2015-06-18  Ovidiu Sas  <osas at voipembedded dot com>
	* [237b771] :

	event_rabbitmq: reconnect to rabbit-mq server on "Socket error"  - closes #535


2015-06-15  Razvan Crainea  <razvan at opensips dot org>
	* [1a89f57] :

	dialog: fix profile_get_values to get the proper counter


2015-06-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cfb7415] :

	Fix compile without RADIUS ASYNC support.
	Credits go to Rudy Pedraza.


2015-06-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1bd25ca] :

	Fix name of coumns in emergency tables


2015-06-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c98caf5] :

	async support for ldap module


2015-06-12  Razvan Crainea  <razvan at opensips dot org>
	* [2e8b265] :

	dialog: add missing header file


2015-06-12  Razvan Crainea  <razvan at opensips dot org>
	* [307c593] :

	dialog: add bin profiles replication


2015-06-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [8450630] :

	mi_xmlrpc_ng: unescape xml strings  - related to bug #537


2015-06-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [f6386ca] :

	core: adding unescape_xml() function helper to strcommon.[ch]


2015-06-11  Nick Altmann  <nick.altmann at gmail dot com>
	* [611b9bb] :

	RPM spec: enabled restart feature (in case of crash) in systemd service


2015-06-11  Nick Altmann  <nick.altmann at gmail dot com>
	* [92ffe5b] :

	RPM spec: returned missed m4 feature, changed version number


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2421034] :

	Fix documentation on loose_route().
	loose_route() returns FALSE only if there is no Route header or if preloaded local Route only.
	Reported by @gergelypeli on github
	Closes #550


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [800117b] :

	Revert "Fix parsing for Diversion header."
	This reverts commit 36384927a5d2fd1d900ac36adc2ee15b2acad0c9.


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [44f740b] :

	Fix fixing hdr names shorter than 3 chars.
	The fixup function fails to identify header names shorter than 3 (like To or short formats). This affected script functions like is_present_hf() or remove_hf().
	Reported by Nick Altmann
	(cherry picked from commit 1f7bae0915ac93ca231ede55c5540560e5489a7b)


2015-06-10  Razvan Crainea  <razvan at opensips dot org>
	* [37cd34d] :

	ratelimit: add rl_count(name) variable


2015-06-10  ionutrazvanionita  <ionutionita at opensips dot org>
	* [769cae8] :

	async support for radius module


2015-06-09  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [1bc3a58] :

	Merge pull request #545 from dynamicpacket/master
	fixes for Debian packaging


2015-06-09  User  <user at Users-Mac-Pro dot local>
	* [b0fed16] :

	* Check for freeradius libs in Makefile * Check for json lib include paths in Makefile * Update debian/changelog to reflect 2.1.0 stable * Update debian/control with new dependency names and standards * Update debian/rules to remove deprecated dpatch


2015-06-09  root  <evillaron at gmail dot com>
	* [65444d9] :

	emergency module - change from list to hash


2015-06-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [42ec45a] :

	fix partition list bug


2015-06-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c2fd6c8] :

	fixed permission table_name bug


2015-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [84e78f2] :

	Add emergency tables to TABLES_EXTRA


2015-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [95328b5] :

	DB schema regenerated (to add the emergency tables)


2015-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6cc12f1] :

	Add DB schema for the emergency module.
	Credits go to Robison Gonçalves Tesini.
	Closes #543


2015-06-05  Razvan Crainea  <razvan at opensips dot org>
	* [1e998bb] :

	ratelimit: print the actual counter for the PIPE


2015-06-05  Razvan Crainea  <razvan at opensips dot org>
	* [b3b5888] :

	ratelimit: do not multiply the expiration with the interval


2015-06-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0708685] :

	Add folded_string token.
	This token is now used by xlog, so you can have a multi-chunk (even multi line folded) string as parameter, like:
		xlog("Bob"
				"hates Alice" " very much\n");

	Based on the idea from #538, but done at grammar level.


2015-06-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c146594] :

	Fix init of UDP listener in nofork mode.
	Init the UDP listener before forking the MI procs, otherwise they will not be aware of the network sockets.
	Closes #541
	Self reported.


2015-06-04  Razvan Crainea  <razvan at opensips dot org>
	* [fd8036c] :

	ratelimit: update the last time used for the pipe


2015-06-04  Di-Shi Sun  <di-shi at transnexus dot com>
	* [ab60f69] :

	Updated for OSP Toolkit 4.5.0.


2015-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3638492] :

	Fix parsing for Diversion header.
	As Diversion header may be a multi-body header, do not use the parse_to() function as it does not accept multiple bodies. Use parse_rr() function.
	Reported by Nick Altmann.


2015-06-03  Vlad Paiu  <vladpaiu at opensips dot org>
	* [eea8476] :

	Removed bogus ERR message


2015-06-03  Razvan Crainea  <razvan at opensips dot org>
	* [842588f] :

	ratelimit: add bin support
	Added bin interface replication support. This provides distributed pipes
	features


2015-06-03  Ionut Ionita  <ionutionita at opensips dot org>
	* [4d3ab1f] :

	Merge pull request #528 from jarrodb/db_sqlite_datetime
	update sqlite convert DB_DATETIME types to proper time values


2015-06-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [e45cc1f] :

	Merge pull request #534 from seanchann/1.11
	fix rpm build error on centos
	(cherry picked from commit 715914848153678c473dc3d4211b8b534bf66fa1)


2015-06-02  Razvan Crainea  <razvan at opensips dot org>
	* [05bc754] :

	event_xmlrpc: only retry send/recv a couple of times if there are errors
	Credits go to Joseph Frazier (onsip) for spotting this


2015-06-02  Razvan Crainea  <razvan at opensips dot org>
	* [008b423] :

	event_rabbitmq: EINTR is not an error and should not be considered for retry


2015-06-02  Eric Tamme  <eric.tamme at onsip dot com>
	* [ac419bc] :

	do not always retry write to pipe if we get blocking errors as this causes the proxy to lock up and consume cpu


2015-06-02  Liviu Chircu  <liviu at opensips dot org>
	* [0db7e0e] :

	s.fill transformation: Prioritize string pvars over integer ones
	Reason for this is that a pvar which holds a string is a more
	particular occurrence than an int one, since integers can be
	easily stringified.

	This fixes some issues with pvars which have multiple internal
	representations (e.g. $rm is "INVITE" and 1 at the same time)

	Reported by Eric Tamme


2015-06-02  Liviu Chircu  <liviu at opensips dot org>
	* [954e771] :

	s.width transformation: Fix a rare crash
	Prevent double free in case a negative number is given


2015-06-02  Liviu Chircu  <liviu at opensips dot org>
	* [5ff8ff5] :

	Merge pull request #530 from jarrodb/transformations
	add width string transformation


2015-06-02  Vlad Paiu  <vladpaiu at opensips dot org>
	* [5bf5479] :

	Fixed typo


2015-06-02  Jarrod Baumann  <jarrod at unixc dot org>
	* [1bc334b] :

	Add support for hiredis type REDIS_REPLY_NIL in redis_raw_query


2015-06-02  Liviu Chircu  <liviu at opensips dot org>
	* [ee4374f] :

	s.fill transformations: Allow whitespace in quoted params
	This patch actually fixes several issues:
	    * allows the "s.fill" functions to be used for alignment purposes
	    * bugfix: possible "s.fill" usage which caused infinite loop
	    * new: trim.h string trimming macros
	    * some code refactoring

	Fixes #531


2015-06-02  Liviu Chircu  <liviu at opensips dot org>
	* [21de1c7] :

	Merge pull request #533 from jarrodb/pvar_529
	verify pv_export_t parse_name function is set before calling


2015-06-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [1288d26] :

	event_rabbitmq: add specif error probe for AMQP_STATUS_SOCKET_ERROR  - triggered after rabbitmq server restart


2015-06-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [b516510] :

	event_rabbitmq: enhance AMQP connection error probe


2015-05-31  Jarrod Baumann  <jarrod at unixc dot org>
	* [a9d3150] :

	cleanup code and add comments


2015-05-30  Jarrod Baumann  <jarrod at unixc dot org>
	* [3c47edd] :

	verify pv_export_t parse_name function is set before calling


2015-05-30  Liviu Chircu  <liviu at opensips dot org>
	* [bcf8524] :

	vim syntax: Add full support for OpenSIPS variables
	    * coloured context, indexes and transformations
	    * matching coloured variable parantheses
	    * everything is also shown within strings


2015-05-30  Jarrod Baumann  <jarrod at unixc dot org>
	* [f70fdb9] :

	add string transformation  e.g.


2015-05-29  Jarrod Baumann  <jarrod at unixc dot org>
	* [65e3a6c] :

	update sqlite convert DB_DATETIME types to proper time values


2015-05-29  Liviu Chircu  <liviu at opensips dot org>
	* [94e3593] :

	script parser: fix bad startup error message


2015-05-29  Liviu Chircu  <liviu at opensips dot org>
	* [57938c0] :

	vim syntax: proper matching for route statements
	    * conflicts with route() calls are now solved
	    * add syslog facility validation


2015-05-29  ionutrazvanionita  <ionutionita at opensips dot org>
	* [84b4e7e] :

	partition support for permission module


2015-05-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1713bb2] :

	Fix debug log.
	Do not print un-initialized variables.

	Reported by miha- on IRC.
	(cherry picked from commit 59d0f336083f262c36cac522117addf989c87f99)


2015-05-28  Liviu Chircu  <liviu at opensips dot org>
	* [69f6510] :

	binary interface: skip() functions now return skipped bytes


2015-05-28  Liviu Chircu  <liviu at opensips dot org>
	* [23f6a26] :

	binary interface: Add retcode for too many pop() operations


2015-05-28  Liviu Chircu  <liviu at opensips dot org>
	* [1a396bf] :

	binary interface: push() functions now return added bytes


2015-05-27  Liviu Chircu  <liviu at opensips dot org>
	* [84554f5] :

	bin_interface: also provide source IP address to all callbacks


2015-05-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3f806a3] :

	Add aysnc sleep() and usleep() functions.
	The sleep() and usleep() script functions can now be used with the async statement - the waiting is done non-blocking, but with suspend and resume.


2015-05-27  Liviu Chircu  <liviu at opensips dot org>
	* [91d1b4f] :

	avpops: Fix possible runtime crash
	The patch corrects a bug in commit 685da74670, since mod_init() is
	actually run _before_ module function fixups.

	Detection for raw SQL function calls is now done (properly) at fixup time,
	rather than at module initialization.

	Reported by Antonis Psaras
	Closes #523


2015-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [724d16d] :

	residential cfg: Set db_url for "uri" module when doing auth


2015-05-26  Vlad Paiu  <vladpaiu at opensips dot org>
	* [74a52d0] :

	Set the upsert flag when incrementing / decrementing counters This way the counters don't need to be pre-populated in the DB ( eg. when using them for dialog profiles )


2015-05-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [607fb3e] :

	Fix "dialplan addrule" command.
	The match_len column was replaced with match_flags
	Closes #513


2015-05-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [032c425] :

	Fix NULL value as route param.
	Closes #516, open by @liviuchircu.


2015-05-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6f5dde4] :

	Fix handling of gw_priprefix_avp param.
	Closes #518, reported by @apsaras.
	(cherry picked from commit 3870a57702595a4816e2520c708bb4f337a17546)


2015-05-21  root  <evillaron at gmail dot com>
	* [b667632] :

	emergency -- change callcell identity


2015-05-21  root  <evillaron at gmail dot com>
	* [8221c64] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2015-05-21  root  <evillaron at gmail dot com>
	* [1c56870] :

	emergency -- change callcell identity


2015-05-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [899bbdd] :

	Merge pull request #517 from staskobzar/1.11
	Make sure httpd can recognize Content-Type headers with parameters.
	(cherry picked from commit a8971c2fcb0207a34005a2ee586de97ecf759638)

	Conflicts:
		modules/httpd/httpd_proc.c


2015-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [564acbe] :

	route params: increment nesting level on no-param routes
	Completes commit f3ed4db99


2015-05-20  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6164d1c] :

	Closed connection in child init after data load; Connected to db from mi process in mi_child_init


2015-05-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [a57d67f] :

	Expose API for setting connection attributes in WS module Fix so that tcp_persistent_flag in registrar also works for WS connections


2015-05-20  ionutrazvanionita  <ionutionita at opensips dot org>
	* [fa14431] :

	move db data initialization from mi_child_init to child init


2015-05-19  Ovidiu Sas  <osas at voipembedded dot com>
	* [67948ce] :

	dialplan: documentation for MI command: dp_show_partiton


2015-05-19  Ovidiu Sas  <osas at voipembedded dot com>
	* [3710087] :

	dialplan: doc updates - compact partition example


2015-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1c1d732] :

	Fix $proto to read from loaded protocols


2015-05-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7846e63] :

	fixed partition parsing


2015-05-18  vladpaiu  <vladpaiu at opensips dot org>
	* [31fb1bc] :

	Merge pull request #507 from jarrodb/cachedb_cassandra
	set local variable memory to 0 to prevent core dump


2015-05-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9597bc9] :

	Fix restoring the route type after async jump.
	A more accurate fix on preserving the route type after an async jump - see commit 950966.


2015-05-16  Liviu Chircu  <liviu at opensips dot org>
	* [be87372] :

	fix doc typo
	Reported by Nick Altmann


2015-05-16  Liviu Chircu  <liviu at opensips dot org>
	* [9509665] :

	async: set route type before running resume routes


2015-05-16  Liviu Chircu  <liviu at opensips dot org>
	* [6353c5a] :

	vim syntax: update with all script parameters


2015-05-16  root  <evillaron at gmail dot com>
	* [961752e] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2015-05-16  root  <evillaron at gmail dot com>
	* [70b662c] :

	emergency -- Notifier Implementation


2015-05-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e461b65] :

	Fix - DLG_STATE_CHANGED event contains the DID too
	Reported by Dan Bogos.
	This is a bug, as without the Dialog ID, the DLG_STATE_CHANGED event is useless.


2015-05-15  Ovidiu Sas  <osas at voipembedded dot com>
	* [b3a0b3e] :

	dialplan: dp_show_partition shows db_url for each partition


2015-05-15  Razvan Crainea  <razvan at opensips dot org>
	* [a5d16d2] :

	proto_tls: fix README tcp typo


2015-05-15  Razvan Crainea  <razvan at opensips dot org>
	* [a63d6fe] :

	dialog: do not raise event under lock
	This allows nested dialog operations and prevents opensips from dialog
	deadlock


2015-05-15  Liviu Chircu  <liviu at opensips dot org>
	* [df2c030] :

	bin_interface: use blocking I/O
	The 2.1 code uses non-blocking UDP socket init primitives.
	This specifically made the binary interface workers do a lot of busy-waiting

	Reported by Rik Broers
	Fixes #502


2015-05-14  Ovidiu Sas  <osas at voipembedded dot com>
	* [37ce047] :

	dialplan: new 'dp_show_partition' mi command


2015-05-12  Jarrod Baumann  <jarrod at unixc dot org>
	* [d84df19] :

	set local variable memory to 0 to prevent core dump


2015-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [4d6baa5] :

	io_wait.h: always include pt.h
	pt.h is required even without HAVE_SIGIO_RT

	Reported by @narunask
	Fixes #505


2015-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [999364e] :

	build system: properly parse "uname -r" output
	Also handle "MAJOR.MINOR-SUB" types of strings


2015-05-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [885097d] :

	Fix bogus jump to "error" label.
	if unhash_fd_map() is not done, do not try to do fix_fd_array() .
	(cherry picked from commit 9c066e61673ed35225a4b5a78483c3e6722cc413)


2015-05-11  Liviu Chircu  <liviu at opensips dot org>
	* [c358997] :

	Add vim syntax highlighting script
	Also add INSTALL instructions


2015-05-08  Liviu Chircu  <liviu at opensips dot org>
	* [fd8fc60] :

	async DB core: fix noisy logs


2015-05-07  Liviu Chircu  <liviu at opensips dot org>
	* [2ef34a5] :

	rest_client: properly free ctype buffer


2015-05-07  Liviu Chircu  <liviu at opensips dot org>
	* [910990c] :

	rest_client: update doc & README


2015-05-07  Liviu Chircu  <liviu at opensips dot org>
	* [a614e21] :

	rest_client: properly handle async calls in local deployments
	Proper libcurl usage is to poll for handle status updates after
	each perform operation.

	This patch also fixes a few cleanup issues with the global list of
	pending HTTP headers

	Thanks to Dan Bogos for reporting and helping with troubleshooting


2015-05-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [147ee7f] :

	While doing retransmissions, set the current processing transaction - in case anybody uses it
	(cherry picked from commit ef3c2539323580c713d86b9c554700dff058d7e0)


2015-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [271c7be] :

	Fix crash on building CANCEL requests.
	Avoid the race condition between building a local cancel and handling a negative reply (for the same branch, in different processes). The build_local mya use the temporary uac->reply and end up with a dnagling pointer. Anyhow, in CANCEL situation, you never have a stored reply in transaction (storing is done only during parallel forking for nagative branches - which are not to be cancelled anyhow).
	(cherry picked from commit 156fba8d5eeedaa3bbb5cd89a525e1591a288123)


2015-05-06  Liviu Chircu  <liviu at opensips dot org>
	* [4072c47] :

	revert previous commit (4b5b16f9a)
	Only 1.11 and 1.10 branches are affected by this bug


2015-05-06  Liviu Chircu  <liviu at opensips dot org>
	* [4b5b16f] :

	async TCP: fix memory leak
	Also free the array of chunk pointers when freeing up TCP conns


2015-05-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [409ca2a] :

	README file updated from XML


2015-05-06  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [4d3e2cb] :

	Merge pull request #499 from jarrodb/rest_client_docs
	Added documentation for rest_client:rest_append_hf command


2015-05-05  Jarrod Baumann  <j at rrod dot org>
	* [9764a88] :

	Added documentation for rest_client:rest_append_hf command


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [2e9b36c] :

	sipmsgops: fix possible crash with debug=4
	Introduced in commit 445d90bc7
	Reported by Hieu Ta


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [21344d1] :

	core fd management: suppress DEL errors for closed fds (EBADF)
	Reasons:
	    * library-specific corner-case (e.g. libcurl with async ops)
	    * network core removes the fds anyway


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [82eded8] :

	core fd management: properly remove fds on DEL errors
	Also improve debug printing


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [aa88b5f] :

	Merge pull request #497 from jarrodb/rest_append_hf
	addition of rest_append_hf command


2015-05-05  Răzvan Crainea  <razvan at opensips dot org>
	* [7ba692d] :

	Merge pull request #488 from jarrodb/scripts
	Removed default DBPORT from opensipsdbctl.base 


2015-05-05  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [a91de4c] :

	Merge pull request #498 from olivermt/master
	Make rtpengine retry sending command on UDP fragmentation


2015-05-05  Oliver Severin Mulelid-Tynes  <olivermt at users.noreply.github dot com>
	* [61c5e71] :

	Make rtpengine retry sending command on UDP fragmentation


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [3e82c48] :

	fraud_detection: fix "daysoftheweek" parsing bug
	Parsing was incorrect for sequences such as "Fri-Mon", "Thu-Wed" etc.


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [2d5dcad] :

	fraud_detection: properly release stats lock on error


2015-05-05  Jarrod Baumann  <jarrod at unixc dot org>
	* [6a8c14f] :

	moved curl_slist to global process variable to support addition of rest_append_hf command


2015-05-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [447301c] :

	Fix order of rows during query; respect file order
	When buidling the response to a select query, respect the order of rows as given by the file; before the selected rows were given in the reverted order.
	Reported by @jockmckechnie on github.
	Closes bug #479 .
	(cherry picked from commit 54f6c22303f0d258c9e5f24520bba342aeb11ac3)


2015-05-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [c4eafa7] :

	Fixed json results for negative integers
	(cherry picked from commit 3bf8b49ec8ee3d29409c75e54581141792ee54e9)


2015-05-04  Liviu Chircu  <liviu at opensips dot org>
	* [4d651f4] :

	rest_client: caseless matching when searching for Content-Type
	Also properly handle missing "Content-Type"


2015-05-04  Razvan Crainea  <razvan at opensips dot org>
	* [89eb9dc] :

	acc: when doing no-cdr accounting, do not use CDR-generated info
	Related to ticket #495


2015-05-01  vladpaiu  <vladpaiu at opensips dot org>
	* [ee2a7a2] :

	Merge pull request #491 from jarrodb/event_rabbitmq
	Updated log macro used for reporting event_rabbitmq heartbeat modparam


2015-04-30  Jarrod Baumann  <j at rrod dot org>
	* [25fc10c] :

	Updated log macro used for reporting event_rabbitmq heartbeat modparam


2015-04-30  Jarrod Baumann  <j at rrod dot org>
	* [901c3f7] :

	Removed mandatory statement from opensipsctlrc for PostgreSQL


2015-04-30  Jarrod Baumann  <j at rrod dot org>
	* [c06b45d] :

	Removed default DBPORT from opensipsdbctl.base so it will be determined by the client


2015-04-30  Răzvan Crainea  <razvan at opensips dot org>
	* [6340435] :

	Merge pull request #486 from jarrodb/scripts
	Add DBPORT parameter with comment to opensipsctlrc


2015-04-30  Jarrod Baumann  <j at rrod dot org>
	* [c168307] :

	Add DBPORT parameter with comment to opensipsctlrc to alleviate confusion when using PostgreSQL


2015-04-29  Razvan Crainea  <razvan at opensips dot org>
	* [bf3ae34] :

	socket_info: return socket list only for known protocols


2015-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d154fe2] :

	Docs updated and refurbished.


2015-04-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ed82ac8] :

	Fix: do not try to kill procs which were not created.


2015-04-25  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [dd7b8c8] :

	Merge pull request #474 from jarrodb/ipv6
	resolve inet6 records for hosts and prefer them if dns_try_ipv6 is set


2015-04-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4588f84] :

	Fix name of variable in passwd test


2015-04-25  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [c7eb0d6] :

	Merge pull request #477 from satishdotpatel/patch-2
	Fix reading password from prompt for PGSQL


2015-04-24  Liviu Chircu  <liviu at opensips dot org>
	* [a51be51] :

	Merge pull request #481 from jarrodb/rest
	Populate the rcode pval in rest get/post methods before returning error


2015-04-24  Jarrod Baumann  <jarrod at unixc dot org>
	* [9945b9d] :

	Populate the rcode pval in rest get/post methods before returning error


2015-04-23  Ionut Ionita  <ionutionita at opensips dot org>
	* [cd38248] :

	Merge pull request #478 from jarrodb/sqlite
	Resolves the core dump of issue #473


2015-04-23  Jarrod Baumann  <jarrod at unixc dot org>
	* [0f1576d] :

	Resolves the core dump of issue #473


2015-04-22  satishdotpatel  <satish.lx at gmail dot com>
	* [e0ab1ce] :

	Fix reading password from prompt for PGSQ
	root@dopensips:/etc/opensips# opensipsdbctl create
	INFO: creating database opensips ...
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "version_t_name_idx" for table "version"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "acc_id_seq" for serial column "acc.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "acc_pkey" for table "acc"
	NOTICE:  CREATE TABLE will create implicit sequence "missed_calls_id_seq" for serial column "missed_calls.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "missed_calls_pkey" for table "missed_calls"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "domain_id_seq" for serial column "domain.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "domain_pkey" for table "domain"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "domain_domain_idx" for table "domain"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "grp_id_seq" for serial column "grp.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "grp_pkey" for table "grp"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "grp_account_group_idx" for table "grp"
	NOTICE:  CREATE TABLE will create implicit sequence "re_grp_id_seq" for serial column "re_grp.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "re_grp_pkey" for table "re_grp"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "address_id_seq" for serial column "address.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "address_pkey" for table "address"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "aliases_id_seq" for serial column "aliases.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "aliases_pkey" for table "aliases"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "aliases_alias_idx" for table "aliases"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "location_id_seq" for serial column "location.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "location_pkey" for table "location"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "location_account_contact_idx" for table "location"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "silo_id_seq" for serial column "silo.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "silo_pkey" for table "silo"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dbaliases_id_seq" for serial column "dbaliases.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dbaliases_pkey" for table "dbaliases"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dbaliases_alias_idx" for table "dbaliases"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "uri_id_seq" for serial column "uri.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "uri_pkey" for table "uri"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "uri_account_idx" for table "uri"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "rtpproxy_sockets_id_seq" for serial column "rtpproxy_sockets.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "rtpproxy_sockets_pkey" for table "rtpproxy_sockets"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "speed_dial_id_seq" for serial column "speed_dial.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "speed_dial_pkey" for table "speed_dial"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "speed_dial_speed_dial_idx" for table "speed_dial"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "usr_preferences_id_seq" for serial column "usr_preferences.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "usr_preferences_pkey" for table "usr_preferences"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "subscriber_id_seq" for serial column "subscriber.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "subscriber_pkey" for table "subscriber"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "subscriber_account_idx" for table "subscriber"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "pdt_id_seq" for serial column "pdt.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "pdt_pkey" for table "pdt"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "pdt_sdomain_prefix_idx" for table "pdt"
	Password for user postgres:
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dialog_pkey" for table "dialog"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dispatcher_id_seq" for serial column "dispatcher.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dispatcher_pkey" for table "dispatcher"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dialplan_id_seq" for serial column "dialplan.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dialplan_pkey" for table "dialplan"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dr_gateways_id_seq" for serial column "dr_gateways.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_gateways_pkey" for table "dr_gateways"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dr_gateways_dr_gw_idx" for table "dr_gateways"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_rules_ruleid_seq" for serial column "dr_rules.ruleid"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_rules_pkey" for table "dr_rules"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_carriers_id_seq" for serial column "dr_carriers.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_carriers_pkey" for table "dr_carriers"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dr_carriers_dr_carrier_idx" for table "dr_carriers"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_groups_id_seq" for serial column "dr_groups.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_groups_pkey" for table "dr_groups"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "load_balancer_id_seq" for serial column "load_balancer.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "load_balancer_pkey" for table "load_balancer"
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:


2015-04-22  Jarrod Baumann  <jarrod at unixc dot org>
	* [101b3e4] :

	Reverted to original logic based on comments from @bogdan-iancu and @etamme but preferring v6 records if dns_try_ipv6 is enabled


2015-04-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [52d3ec6] :

	fix escaping issue; two ways of binding values(using sqlite3_bind* interface or sqlite3_snprintf); removed unecessary code


2015-04-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [91fc6cc] :

	added CON_SET_CURR_PS macro


2015-04-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0b6402c] :

	fixed url '\0' issue


2015-04-22  Liviu Chircu  <liviu at opensips dot org>
	* [17d639b] :

	F_MALLOC: suppress warnings for free(NULL)


2015-04-21  Vlad Paiu  <vladpaiu at opensips dot org>
	* [138813f] :

	Fixed json lib dependency


2015-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [cb9f46b] :

	rtpproxy: store the notification buffer in the main stack frame
	Thanks go to Hamid Elaosta for reporting and helping me debug this bug


2015-04-21  Liviu Chircu  <liviu at opensips dot org>
	* [0e80ba3] :

	proto_tcp: fix "microsec" -> "millisec" doc typo


2015-04-20  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b7db080] :

	don't log errors in case connection closed by the other peer; don't call SSL_shutdown when connection is bad/eof


2015-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [1f154c0] :

	db_mysql: properly set TCP-related timeouts
	According to official documentation,  mysql_options() must be used _after_
	mysql_init()


2015-04-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [57f331f] :

	Do not leak the dialog in case there's an error on creation, after linking


2015-04-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ead1033] :

	Merge pull request #442 from rgagnon24/redirect_fix
	Fix get_redirects(max, reason)


2015-04-20  Razvan Crainea  <razvan at opensips dot org>
	* [c26a4a3] :

	rtpproxy: properly parse rtpproxy timeout notifications


2015-04-17  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a32b92a] :

	Merge branch 'jarrodb-sqlite'


2015-04-17  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a97d357] :

	modified and tested sqlite opensipsdbctl create, drop, reinit backup, restore, copy


2015-04-16  Jarrod Baumann  <jarrod at unixc dot org>
	* [40308f9] :

	Reset default /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin references back to original script (had copied from an already installed file)


2015-04-16  Jarrod Baumann  <jarrod at unixc dot org>
	* [0606435] :

	Fixed Makefile script sqlite references that move the database related files into the library path


2015-04-16  Jarrod Baumann  <jarrod at unixc dot org>
	* [5b557d0] :

	updated osipsconsolerc to match the opensipsctlrc header for the DBENGINE definition


2015-04-16  Jarrod Baumann  <jarrod at unixc dot org>
	* [bfde3a3] :

	Updated control scripts to include considerations for the new db_sqlite


2015-04-16  ionutrazvanionita  <ionutionita at opensips dot org>
	* [24341a0] :

	fix extension loading; fix bigint separate case


2015-04-16  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7366daa] :

	redesigned sqlite module


2015-04-16  Razvan Crainea  <razvan at opensips dot org>
	* [0a38032] :

	do not add Makefile.conf to the tarball
	Since every tarball install is independent, Makefile.conf should not be
	inherited


2015-04-15  Liviu Chircu  <liviu at opensips dot org>
	* [00cdfc6] :

	hp_malloc.h: properly include sys/time.h
	Prevents compilation issues with some modules

	Credits to Hamid Elaosta for reporting


2015-04-15  Liviu Chircu  <liviu at opensips dot org>
	* [008fba1] :

	fix compilation issues with no -DSTATISTICS


2015-04-15  Vlad Paiu  <vladpaiu at opensips dot org>
	* [3583989] :

	Set T to T_UNDEFINED
	(cherry picked from commit 6c0625e1f7218265f944d8ee69f7d8fb332b40de)


2015-04-15  Vlad Paiu  <vladpaiu at opensips dot org>
	* [eeff37f] :

	Set the current transaction to NULL when adding FD to reactor for async jump


2015-04-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1ebf813] :

	Removed useless var setting.


2015-04-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4884d6c] :

	Fix race condition on terminating child procs.
	There is a race condition between a child getting initalized (and properly setting all its vars like is_main, pid, etc) and main process trying to terminate that child proc (due a failed startup).
	Use the pt[].pid as a marker to know when the child is init (to be filled only by child). Main proc (when delivering signals) will do a busy waiting if a proc haven't set its pid (still doing init).

	Closes #463


2015-04-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [dbf2aec] :

	Fix dont_fork mode.
	Closes #445.


2015-04-14  Razvan Crainea  <razvan at opensips dot org>
	* [b8c0740] :

	rr: do not force send socket on preloaded routes


2015-04-14  Vlad Paiu  <vladpaiu at opensips dot org>
	* [521bfc0] :

	Maintain rport and received in VIA header of replies when doing topology hiding


2015-04-14  Razvan Crainea  <razvan at opensips dot org>
	* [3ac458f] :

	acc: always populate the created AVP


2015-04-14  Răzvan Crainea  <razvan at opensips dot org>
	* [432c9cc] :

	Merge pull request #462 from jarrodb/dlg_hash
	Verify the dialog mi parameter is not null before passing to dlg_hash


2015-04-13  Jarrod Baumann  <j at rrod dot org>
	* [c745068] :

	Verify the dialog mi parameter is not null before passing to dlg_hash


2015-04-10  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8d8ea6f] :

	fix: extension list free after first connect; when reconnect was done extensions were already freed; now free is done when conn is closed


2015-04-10  Razvan Crainea  <razvan at opensips dot org>
	* [44fa562] :

	proto_ws: send error message before closing the connection
	Spotted by Rik Broers


2015-04-10  Razvan Crainea  <razvan at opensips dot org>
	* [e252740] :

	proto_ws: store mask in request when msg is not complete
	Reported by Rik Broers


2015-04-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [baa342d] :

	added dbschema scripts and tables


2015-04-09  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [0fed048] :

	Merge pull request #456 from jarrodb/pike_rm
	Added pike mi command  for unblocking IP addresses


2015-04-09  Razvan Crainea  <razvan at opensips dot org>
	* [7e1bded] :

	tcp: drop CRLF TCP messages


2015-04-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7bedddd] :

	fixed buffer overflow check when query too big; fixed null value return; query string/blob value is now copied into opensips pkg memory


2015-04-09  Jarrod Baumann  <j at rrod dot org>
	* [3a37fa4] :

	updated logic to reset the block flags and counters instead of actually removing the node from the tree


2015-04-09  Răzvan Crainea  <razvan at opensips dot org>
	* [9dd26b8] :

	proto_ws: update doc to reflect WS client implementation


2015-04-09  Jarrod Baumann  <j at rrod dot org>
	* [996c989] :

	Added simple section to the pike_admin.xml docs detailing the command


2015-04-09  Jarrod Baumann  <j at rrod dot org>
	* [d506309] :

	Added pike mi command  for unblocking IP addresses


2015-04-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [8627946] :

	cc_calls: modified b2buaid to unique and put index on int; id is noi int primary key autoincrement


2015-04-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b2e2a62] :

	username comparation not necessary anymore on db_id


2015-04-08  ionutrazvanionita  <ionutionita at opensips dot org>
	* [82648c2] :

	fixed memset bug when alloc; fixed select query detection in db_raw query; fixed null query parameter in raw_query; fixed lock error in wrapper_single_sqlite_stmt_prepare


2015-04-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [4cb4272] :

	Silence t_newtrani log error in case transaction was already created
	(cherry picked from commit 9e9818f86ca61cc22bf1273fd5eefda7a62e4ffc)


2015-04-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [210a096] :

	Do not crash when faked req has no lumps added to it


2015-04-06  Ovidiu Sas  <osas at voipembedded dot com>
	* [0a404a7] :

	nathelper: fix documentation typo


2015-04-05  Liviu Chircu  <liviu at opensips dot org>
	* [445d90b] :

	sipmsgops: fix buffer management issue
	is_present_hf() and remove_hf() would sometimes misbehave
	when used with pseudo-variables (commit 6e88f653702).

	Reported by Eric Werkhoven

	Also fix a couple of noisy log messages.


2015-04-03  Ovidiu Sas  <osas at voipembedded dot com>
	* [1119c66] :

	Makefile.conf.template: add db_sqlite to the list of excluded modules


2015-04-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [0a2be49] :

	introducing sqlite module


2015-04-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2682925] :

	added str_strstr function


2015-04-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2f192ca] :

	hold original url in id structure


2015-04-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4a12950] :

	Better err logging
	(cherry picked from commit a9ea0a142fc0e18f36e17e5129f522407edcab80)


2015-04-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ac8c2e6] :

	Fix changing proto via force_send_socket().
	If the RURI does not request any protocol, use the proto of the forced socket (if any).
	Related to #420


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [5a346da] :

	force_send_socket(): update error message on bad parameter
	The transport protocol is now mandatory

	Reported by @hydrosine
	Closes #447


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [bc160a7] :

	flag fixups: fix a sign conversion bug
	Reported by @hydrosine
	Fixes #448


2015-04-01  Vlad Paiu  <vladpaiu at opensips dot org>
	* [d62bc96] :

	Accept TCP aliases by default Do not rely on the previous hop signaling alias via param


2015-03-31  Liviu Chircu  <liviu at opensips dot org>
	* [54b3291] :

	Merge pull request #444 from etamme/master
	fixed flex sub version check for isatty definition 


2015-03-31  Ovidiu Sas  <osas at voipembedded dot com>
	* [b52b2b9] :

	parser: fix memory leak  - add Supported header to the list of headers that performs memory allocation


2015-03-30  Eric Tamme  <eric at uphreak dot com>
	* [9393492] :

	fixed flex sub version check to include unistd.h for anything subversion 36 or higher


2015-03-30  Eric Tamme  <eric at uphreak dot com>
	* [4015747] :

	fixed flex sub version check for isatty definition - isatty was removed in .36


2015-03-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3da2b0d] :

	Fix documentation typo.
	Credits go to Antonis Psaras.


2015-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [4c5e226] :

	proto_ws: proper clen print


2015-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [5883393] :

	Add client support for websocket


2015-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [12467f2] :

	net expose tcp destroy


2015-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [6572930] :

	split tcp_create function in two
	this allows you to first create the connection, do stuff with it and
	only then release it


2015-03-27  Razvan Crainea  <razvan at opensips dot org>
	* [9a4ae5c] :

	proto_ws: prevent buffer overflow when masking


2015-03-27  rgagnon24  <rgagnon24 at gmail dot com>
	* [53a1700] :

	Maintain "n/a" string if none supplied for backward compatibility


2015-03-27  rgagnon24  <rgagnon24 at gmail dot com>
	* [832295c] :

	Name prototype variables the same as function usage


2015-03-27  rgagnon24  <rgagnon24 at gmail dot com>
	* [f842752] :

	Remove whitespace change


2015-03-27  rgagnon24  <rgagnon24 at gmail dot com>
	* [a25753a] :

	Fix function prototypes and casts


2015-03-27  rgagnon24  <rgagnon24 at gmail dot com>
	* [ddbe64b] :

	Add editor, fix <email> tags


2015-03-27  rgagnon24  <rgagnon24 at gmail dot com>
	* [2567b63] :

	Fix get_redirects(max, reason) so that reason is properly transferred to the acc module function


2015-03-25  ionutrazvanionita  <ionutionita at opensips dot org>
	* [d29cd9d] :

	no warnings from emergency; modified list deletion logic; removed trailing whitespaces


2015-03-25  Razvan Crainea  <razvan at opensips dot org>
	* [adc4455] :

	rename modules_obsolete to obsolete_modules
	this makes tree browsing easier using autocompletion


2015-03-24  Razvan Crainea  <razvan at opensips dot org>
	* [e5b793e] :

	replace libmysqlclient*-dev with metapackage libmysqlclient-dev
	Credits go to Leo for reporting this


2015-03-24  Razvan Crainea  <razvan at opensips dot org>
	* [a305152] :

	tcp & tls: preserve fd after connect succeeds
	Credits go to Peter Kelly for reporting this and helping with the testing


2015-03-24  Vlad Paiu  <vladpaiu at opensips dot org>
	* [558a4f1] :

	Fixed TLS CRLF pingpong regression
	Properly handle CRLFCRLF pings over TLS


2015-03-23  Vlad Paiu  <vladpaiu at opensips dot org>
	* [bfbb5bb] :

	Fixed TLS connection closing Update the SSL library with the TCP main socket before running SSL_Shutdown
	Thanks to Lirakis for the help in debugging this
	(cherry picked from commit 9ee50938482621e92074fd69cd5d0a078c47596b)


2015-03-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e5b7abc] :

	removed unecessary rootCA files


2015-03-23  Răzvan Crainea  <razvan at opensips dot org>
	* [1dd83cf] :

	python: add documentation


2015-03-23  Liviu Chircu  <liviu at opensips dot org>
	* [1fdb716] :

	Merge pull request #437 from rgagnon24/master
	RTPEngine.c cleanup


2015-03-23  Rob Gagnon  <rgagnon at vcentos7.telepointglobal dot com>
	* [715f62e] :

	Fix functions to match their documented API Change function prototypes to use gparam_p instead of char *


2015-03-23  Razvan Crainea  <razvan at opensips dot org>
	* [593f269] :

	python: properly parse the script name


2015-03-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8d953eb] :

	Have tcp_async by default ON.
	(cherry picked from commit 525bd70bef7de94a18bebaa61f6b18125598ebbd)


2015-03-23  Vlad Paiu  <vladpaiu at opensips dot org>
	* [712b75e] :

	opensipsdbctl : Fixed creating Postgres database
	(cherry picked from commit 3eb5f2bf9eb13451f621ced244c7d65ee40ae18c)

	Conflicts:
		scripts/opensipsdbctl.base


2015-03-23  Liviu Chircu  <liviu at opensips dot org>
	* [eed1c0a] :

	fix typo in previous commit


2015-03-23  Liviu Chircu  <liviu at opensips dot org>
	* [49ed85a] :

	opensipsdbctl: allow running from root dir for _all_ SQL backends
	(completes commit 31c472c)


2015-03-23  Razvan Crainea  <razvan at opensips dot org>
	* [5092a46] :

	python: add more verbose error reporting
	Even though the errors are only reported at stderr,
	this is still useful for debugging.
	In the future we should find a way to log the errors
	at the logging facility


2015-03-21  root  <evillaron at gmail dot com>
	* [5a167bc] :

	subscriber function for emergency module


2015-03-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [8cc812d] :

	Added compression and emergency to excluded modules list They depend on zlib and respectively libcurl for compiling


2015-03-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1337a5f] :

	Fix compile err/warn on redhat.
	Reported by Nick Altmann.
	Credits go to Liviu Chircu.
	(cherry picked from commit a1ea06b97a9212378d21456afc750ad8ed0b9d86)


2015-03-19  Vlad Paiu  <vladpaiu at opensips dot org>
	* [eb9a063] :

	Fixed msilo README - added mention of the extra route types the function can be called in Credits to Nick Altmann


2015-03-19  Razvan Crainea  <razvan at opensips dot org>
	* [ab93408] :

	obsolete pdt module


2015-03-18  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ad6ef2c] :

	Merge pull request #435 from etamme/master
	fix rtpstat for rtpengine - thanks to jarrod for tracking down the fix


2015-03-18  Eric Tamme  <eric at uphreak dot com>
	* [d10e679] :

	fix rtpstat for rtpengine - thanks to jarrod for tracking down the fix


2015-03-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f276691] :

	Fix PKG mem leak


2015-03-18  Razvan Crainea  <razvan at opensips dot org>
	* [dd81c75] :

	increase devel version


2015-03-18  Razvan Crainea  <razvan at opensips dot org>
	* [936e93b] :

	update version name


2015-03-18  Razvan Crainea  <razvan at opensips dot org>
	* [d1c151a] :

	update ChangeLog for 2.1


2015-03-18  Ovidiu Sas  <osas at voipembedded dot com>
	* [f1652d2] :

	mi_http: update copyright


2015-03-18  Ovidiu Sas  <osas at voipembedded dot com>
	* [b7e2137] :

	pi_http: fix compiler warning


2015-03-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [75c8154] :

	Fix route_to_carrier and route_to_gw Duplicate the RURI before pushing GWs for usage ( first gw will overwrite the actual URI )


2015-03-18  Liviu Chircu  <liviu at opensips dot org>
	* [3c6873c] :

	update acc SQL scripts


